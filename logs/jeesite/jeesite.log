2017-08-24 14:17:51,132 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.get] - ==>  Preparing: SELECT a.*, a.gen_table_id AS "genTable.id" FROM gen_scheme a WHERE a.id = ? 
2017-08-24 14:17:51,218 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.get] - ==> Parameters: 3626584e6d35431c9ef8f58a8bebda4a(String)
2017-08-24 14:17:51,342 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.get] - <==      Total: 1
2017-08-24 14:17:51,400 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.update] - ==>  Preparing: UPDATE gen_scheme SET name = ?, category = ?, package_name = ?, module_name = ?, sub_module_name = ?, function_name = ?, function_name_simple = ?, function_author = ?, gen_table_id = ?, update_by = ?, update_date = ?, remarks = ? WHERE id = ? 
2017-08-24 14:17:51,403 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.update] - ==> Parameters: 促销活动(String), curd_lvmama(String), com.lvmama.lvtraffic(String), promotion(String), activity(String), 促销活动(String), 促销活动(String), lsq(String), b7c541a41c4f437394a70b358dc72334(String), null, 2017-08-24 14:17:51.4(Timestamp), (String), 3626584e6d35431c9ef8f58a8bebda4a(String)
2017-08-24 14:17:51,497 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.update] - <==    Updates: 1
2017-08-24 14:17:51,497 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableDao.get] - ==>  Preparing: SELECT a.* FROM gen_table a WHERE a.id = ? 
2017-08-24 14:17:51,498 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableDao.get] - ==> Parameters: b7c541a41c4f437394a70b358dc72334(String)
2017-08-24 14:17:51,575 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableDao.get] - <==      Total: 1
2017-08-24 14:17:51,729 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableColumnDao.findList] - ==>  Preparing: SELECT a.*, b.id AS "genTable.id", b.name AS "genTable.name", b.comments AS "genTable.comments", b.class_name AS "genTable.className", b.parent_table AS "genTable.parentTable", b.parent_table_fk AS "genTable.parentTableFk" FROM gen_table_column a JOIN gen_table b ON b.id = a.gen_table_id WHERE a.del_flag = ? AND a.gen_table_id = ? ORDER BY a.sort ASC 
2017-08-24 14:17:51,729 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableColumnDao.findList] - ==> Parameters: 0(String), b7c541a41c4f437394a70b358dc72334(String)
2017-08-24 14:17:51,868 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableColumnDao.findList] - <==      Total: 40
2017-08-24 14:17:53,251 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java
2017-08-24 14:17:53,260 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.common.client;

import org.codehaus.jackson.type.TypeReference;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

import com.lvmama.lvf.common.client.RestClient;
import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvf.common.exception.ExceptionCode;
import com.lvmama.lvf.common.exception.ExceptionWrapper;
import com.lvmama.lvf.common.utils.JSONMapper;
import com.lvmama.lvtraffic.promotion.common.client.path.TPromotionActivityInfoBusinessClientPath;
import com.lvmama.lvtraffic.promotion.common.dto.enums.ValidStatus;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto; 

@Component
public class TPromotionActivityInfoClient {

	private static final Logger logger = LoggerFactory.getLogger(TPromotionActivityInfoClient.class);

	@Value("traffic-promotion-service.baseurl")
	private String baseUrl;

	@Autowired
	private RestClient restClient;

	/**
	 * 根据id获得促销活动
	* @param  
	* @return BaseResponseDto<Object>
	* @throws
	 */
	public TPromotionActivityInfoDto queryTPromotionActivityInfoById(Long cityId){ 
		TPromotionActivityInfoBusinessClientPath command = TPromotionActivityInfoBusinessClientPath.QUERY_TPROMOTIONACTIVITYINFO_BY_ID;
		String url = command.url(baseUrl);
		try { 
			String resultStr = restClient.post(url,  String.class, cityId);			
			return JSONMapper.getInstance().readValue(resultStr, new TypeReference<TPromotionActivityInfoDto>() { });
		} catch (ExceptionWrapper ew) {
			ew.setErrMessage(ExceptionCode.REMOTE_INVOKE.errMessage(command.cnName, url)+ew.getErrMessage());
			logger.error(ew.getErrMessage(),ew);
			throw ew;
		} catch (Exception e) {
			e.printStackTrace();
		} 
		return null;
	}
	
	/**
	 * 获得促销活动列表 
	 * @param
	 * @return BaseResponseDto<Object>
	 * @throws
	 */
	public BaseResultDto<TPromotionActivityInfoDto> queryTPromotionActivityInfoList(BaseQueryDto<TPromotionActivityInfoDto> query) { 
		TPromotionActivityInfoBusinessClientPath command = TPromotionActivityInfoBusinessClientPath.QUERY_TPROMOTIONACTIVITYINFO_LIST;
		String url = command.url(baseUrl);
		try {
			String resultStr = restClient.post(url, String.class, query);
			return JSONMapper.getInstance().readValue(resultStr,
					new TypeReference<BaseResultDto<TPromotionActivityInfoDto>>() {
					});
		} catch (ExceptionWrapper ew) {
			ew.setErrMessage(ExceptionCode.REMOTE_INVOKE.errMessage(
					command.cnName, url) + ew.getErrMessage());
			logger.error(ew.getErrMessage(), ew);
			throw ew;
		} catch (Exception e) {
			e.printStackTrace();
		}
		return null;
	} 
	
	/**
	 * 新增促销活动.
	 * @param promotionProductInfo
	 * @return
	 */
	public BaseSingleResultDto<TPromotionActivityInfoDto> insertTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto){ 
		TPromotionActivityInfoBusinessClientPath command = TPromotionActivityInfoBusinessClientPath.INSERT_TPROMOTIONACTIVITYINFO;
		String url = command.url(baseUrl);
		try {
			String resultStr = restClient.post(url, String.class, tPromotionActivityInfoDto);
			return JSONMapper.getInstance().readValue(resultStr, new TypeReference<BaseSingleResultDto<TPromotionActivityInfoDto>>(){});
		} catch (ExceptionWrapper ew) {
			ew.setErrMessage(ExceptionCode.REMOTE_INVOKE.errMessage(command.cnName, url)+ew.getErrMessage());
			logger.error(ew.getErrMessage(),ew);
			throw ew;
		} catch (Exception e) {
			e.printStackTrace();
		}
		return null;
	}
	 
	 /**
	 * 修改促销活动
	 * @param tPromotionActivityInfoDto
	 * @return
	 */
	 public BaseSingleResultDto<TPromotionActivityInfoDto> editTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto) { 
		TPromotionActivityInfoBusinessClientPath command = TPromotionActivityInfoBusinessClientPath.EDIT_TPROMOTIONACTIVITYINFO;
		String url = command.url(baseUrl);
		try {
			String resultStr = restClient.post(url, String.class,tPromotionActivityInfoDto);
			return JSONMapper.getInstance().readValue(
							resultStr,new TypeReference<BaseSingleResultDto<TPromotionActivityInfoDto>>() {
							});
		} catch (ExceptionWrapper ew) {
			ew.setErrMessage(ExceptionCode.REMOTE_INVOKE.errMessage(
					command.cnName, url) + ew.getErrMessage());
			logger.error(ew.getErrMessage(), ew);
			throw ew;
		} catch (Exception e) {
			e.printStackTrace();
		}
		return null;
	}
}
2017-08-24 14:17:53,289 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java 文件不存在!
2017-08-24 14:17:53,292 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java 文件创建成功!
2017-08-24 14:17:53,294 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java 写入成功!
2017-08-24 14:17:53,295 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java
2017-08-24 14:17:53,296 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java
2017-08-24 14:17:53,298 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.common.client.path;

import com.lvmama.lvf.common.utils.CustomizedPropertyPlaceholderConfigurer;

/**
 * 促销活动相关clientpath枚举.
 * 
 * @author Administrator
 * 
 */
public enum TPromotionActivityInfoBusinessClientPath {
	QUERY_TPROMOTIONACTIVITYINFO_LIST(Path.QUERY_TPROMOTIONACTIVITYINFO_LIST, "查询促销活动列表"),
	QUERY_TPROMOTIONACTIVITYINFO_BY_ID(Path.QUERY_TPROMOTIONACTIVITYINFO_BY_ID, "根据id查询促销活动列表"),
	INSERT_TPROMOTIONACTIVITYINFO(Path.INSERT_TPROMOTIONACTIVITYINFO, "新增促销活动"), 
	EDIT_TPROMOTIONACTIVITYINFO(Path.EDIT_TPROMOTIONACTIVITYINFO, "编辑促销活动") ;

	public String path;
	public String cnName;
	
	private TPromotionActivityInfoBusinessClientPath(String path, String cnName) {
		this.path = path;
		this.cnName = cnName;
	}
	
	public String getPath() {
		return path;
	}
	
	public String getCnName() {
		return cnName;
	}
	
	public String url(String baseUrl){
		if(!baseUrl.contains("http")){
			baseUrl = CustomizedPropertyPlaceholderConfigurer.getContextProperty(baseUrl);
		}
		if(baseUrl.endsWith("/")){
			return baseUrl+this.path;
		}
		return baseUrl+"/" +this.path;
	}
	
	public String url(String baseUrl,Object... args){
		String url = url(baseUrl);
		String pat="\\{\\w*\\}";
		return String.format(url.replaceAll(pat,"%s"),args);
	}
	
	public static class Path {

		public final static String basePath = "promotiontransfer/business";

		public final static String QUERY_TPROMOTIONACTIVITYINFO_LIST = basePath + "/queryTPromotionActivityInfoList";
		
		public final static String QUERY_TPROMOTIONACTIVITYINFO_BY_ID = basePath + "/queryTPromotionActivityInfoById";  
		
		public final static String INSERT_TPROMOTIONACTIVITYINFO = basePath + "/insertTPromotionActivityInfo"; 
		
		public final static String EDIT_TPROMOTIONACTIVITYINFO = basePath + "/updateTPromotionActivityInfo"; 
	}
}
2017-08-24 14:17:53,298 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java 文件不存在!
2017-08-24 14:17:53,299 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java 文件创建成功!
2017-08-24 14:17:53,300 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java 写入成功!
2017-08-24 14:17:53,301 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java
2017-08-24 14:17:53,301 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java
2017-08-24 14:17:53,304 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.offline.web.controller.vas;

import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.ui.Model;

import com.lvmama.lvf.common.dto.BaseResponseDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvtraffic.offline.web.form.vas.TPromotionActivityInfoForm;

public interface TPromotionActivityInfoController   {
	/**
	 * 进入促销活动查询界面
	 * 
	 * @param model
	 * @return String
	 */
	public String toTPromotionActivityInfoListQuery(Model model);  
	
	/**
	 * 导出促销活动列表
	 * @param i
	 * @param response
	 */
	public void exportCsv(TPromotionActivityInfoForm input, HttpServletResponse response);   

	/**
	 * 进入新增促销活动
	 * @param model
	 * @return
	 */
	public String toAddTPromotionActivityInfo(Model model);
	
	/**
	 * 新增促销活动
	 * @param model
	 * @param queryForm
	 * @param request
	 * @param response
	 * @return
	 */
	public Map<String,Object> insertTPromotionActivityInfo(Model model,TPromotionActivityInfoForm queryForm,HttpServletRequest request,HttpServletResponse response);
	
	/**
	 * 进入编辑促销活动界面
	 * @param model
	 * @param cityId
	 * @return
	 */
	public String toEditTPromotionActivityInfo(Model model,Long cityId);
	
	/**
	 * 编辑促销活动
	 * @param model
	 * @param editForm
	 * @param request
	 * @param response
	 * @return
	 */
	public Map<String,Object> editTPromotionActivityInfo(Model model,TPromotionActivityInfoForm editForm,HttpServletRequest request,HttpServletResponse response);
	
	/**
	 * 查询所有促销活动
	 * @param model
	 * @param queryForm
	 * @return
	 */
	public BaseResponseDto<TPromotionActivityInfoForm> queryVasCityList(Model model,TPromotionActivityInfoForm queryForm);
	
}
2017-08-24 14:17:53,304 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java 文件不存在!
2017-08-24 14:17:53,308 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java 文件创建成功!
2017-08-24 14:17:53,309 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java 写入成功!
2017-08-24 14:17:53,309 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java
2017-08-24 14:17:53,310 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java
2017-08-24 14:17:53,317 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.offline.web.controller.vas.impl;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.beanutils.BeanUtils;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.lvmama.comm.pet.po.perm.PermUser;
import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResponseDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvf.common.utils.DateUtils;
import com.lvmama.lvtraffic.offline.web.controller.vas.TPromotionActivityInfoController;
import com.lvmama.lvtraffic.offline.web.form.vas.TPromotionActivityInfoForm;
import com.lvmama.lvtraffic.offline.web.utils.servlet.Constant;
import com.lvmama.lvtraffic.offline.web.utils.servlet.ServletUtil;
import com.lvmama.lvtraffic.vas.common.client.VasLogClient;
import com.lvmama.lvtraffic.vas.common.client.VasTransferClient;
import com.lvmama.lvtraffic.vas.common.dto.enums.OperName;
import com.lvmama.lvtraffic.vas.common.dto.enums.OperSouce;
import com.lvmama.lvtraffic.vas.common.dto.enums.OperType;
import com.lvmama.lvtraffic.vas.common.dto.enums.ValidStatus;
import com.lvmama.lvtraffic.vas.common.dto.log.LogOperateInfoDto;
import com.lvmama.lvtraffic.vas.common.dto.transfer.TPromotionActivityInfoDto;

@Controller
@RequestMapping("tPromotionActivityInfo")
public class TPromotionActivityInfoControllerImpl implements TPromotionActivityInfoController {
	private static final Logger logger = Logger.getLogger(TPromotionActivityInfoControllerImpl.class);
	@Autowired
	private VasTransferClient vasTransferClient; 

	@Autowired
	private VasLogClient vasLogClient;
	
	@Override
	@RequestMapping("toTPromotionActivityInfoListQuery")
	public String toTPromotionActivityInfoListQuery(Model model) {  
		model.addAttribute("validStatus", ValidStatus.values());
		return "vas/vas_tPromotionActivityInfo_list";
	} 
	
	@Override
	public void exportCsv(TPromotionActivityInfoForm input, HttpServletResponse response) {
		// TODO Auto-generated method stub
		
	}
 
	@Override
	@ResponseBody
	@RequestMapping("queryTPromotionActivityInfoList")
	public BaseResponseDto<TPromotionActivityInfoForm> queryVasCityList(Model model,
			TPromotionActivityInfoForm queryForm) {   
		BaseQueryDto<TPromotionActivityInfoDto> query = new BaseQueryDto<TPromotionActivityInfoDto>(queryForm.getPagination(),queryForm);
		BaseResultDto<TPromotionActivityInfoDto> baseResult = vasTransferClient.queryTPromotionActivityInfoList(query);
		List<TPromotionActivityInfoDto> results = baseResult.getResults(); 
		
		List<TPromotionActivityInfoForm> forms = new ArrayList<TPromotionActivityInfoForm>();
		try {
			for (TPromotionActivityInfoDto vpt : results) {
				TPromotionActivityInfoForm retForm = new TPromotionActivityInfoForm();
				BeanUtils.copyProperties(retForm,vpt);
				retForm.setCreateTimeStr(getTimeStr(vpt.getCreateTime()));
				retForm.setUpdateTimeStr(getTimeStr(vpt.getUpdateTime())); 
				forms.add(retForm);
			}
		} catch (Exception e) {
			e.printStackTrace();
			logger.error("出现异常："+e.getMessage(),e);
		}
		BaseResponseDto<TPromotionActivityInfoForm> response = new BaseResponseDto<TPromotionActivityInfoForm>();
		response.setResults(forms); 
		response.setPagination(baseResult.getPagination());
		return response;
	}

	public String getTimeStr(Date d) {
		if(d!=null)
			return DateUtils.formatCnHmDate(d);
		return "";
	}

	@Override
	@RequestMapping("toAddTPromotionActivityInfo")
	public String toAddTPromotionActivityInfo(Model model) {
		return "vas/add_tPromotionActivityInfo";
	}

	@Override
	@RequestMapping("insertTPromotionActivityInfo")
	@ResponseBody
	public Map<String, Object> insertTPromotionActivityInfo(Model model,
			TPromotionActivityInfoForm queryForm, HttpServletRequest request,
			HttpServletResponse response) {
		TPromotionActivityInfoDto TPromotionActivityInfoDto = queryForm.getTPromotionActivityInfoDto();
		//TPromotionActivityInfoDto.setCityStatus(ValidStatus.VALID);//默认有效
		BaseSingleResultDto<TPromotionActivityInfoDto> result =  vasTransferClient.insertTPromotionActivityInfo(TPromotionActivityInfoDto);
		Map<String, Object> retMap = new HashMap<String, Object>();
		retMap.put("flag", result.getStatus().name());
		
		Long id = result.getResult().getId();
		
		 //添加操作日志
		LogOperateInfoDto logOperateInfo = new LogOperateInfoDto();
		logOperateInfo.setOperSouce(OperSouce.VAS_TRANSFER_CITY);
		logOperateInfo.setSourceId(id);
		logOperateInfo.setOperType(OperType.VAS_TRANSFER_CITY_ADD);
		logOperateInfo.setOperDesc("新增促销活动");
		logOperateInfo.setOperTime(new Date());
		PermUser user = (PermUser)ServletUtil.getSession(request, response, Constant.SESSION_BACK_USER);
		if(null!=user){
			logOperateInfo.setOperAccount(user.getUserName());	
			logOperateInfo.setOperName(OperName.TRANSFER);
		}
		vasLogClient.insertVasOpLog(logOperateInfo);
		return retMap;
	}

	@Override
	@RequestMapping(value="toEditTPromotionActivityInfo/{cityId}",method=RequestMethod.GET)
	public String toEditTPromotionActivityInfo(Model model,@PathVariable Long cityId) {
		TPromotionActivityInfoDto transferCity = vasTransferClient.queryTPromotionActivityInfoById(cityId);
		model.addAttribute("tPromotionActivityInfo", transferCity); 
		model.addAttribute("validStatus", ValidStatus.values());
		return "vas/edit_tPromotionActivityInfo";
	}

	@Override
	@RequestMapping("editTPromotionActivityInfo")
	@ResponseBody
	public Map<String, Object> editTPromotionActivityInfo(Model model,
			TPromotionActivityInfoForm TPromotionActivityInfoForm,
			HttpServletRequest request, HttpServletResponse response) {
		String oldCityCode = (String)request.getAttribute("oldCityCode");
		Map<String, Object> retMap = new HashMap<String, Object>();
		TPromotionActivityInfoDto TPromotionActivityInfoDto = TPromotionActivityInfoForm.getTPromotionActivityInfoDto();
		BaseSingleResultDto<TPromotionActivityInfoDto> result = vasTransferClient.editTPromotionActivityInfo(TPromotionActivityInfoDto);
		retMap.put("flag", result.getStatus().name());

		// 添加操作日志
		LogOperateInfoDto logOperateInfo = new LogOperateInfoDto();
		logOperateInfo.setOperSouce(OperSouce.VAS_TRANSFER_CITY);
		logOperateInfo.setSourceId(TPromotionActivityInfoDto.getId());
		logOperateInfo.setOperType(OperType.VAS_TRANSFER_CITY_UPDATE);
		logOperateInfo.setOperDesc("编辑促销活动");
		logOperateInfo.setOperTime(new Date());
		PermUser user = (PermUser) ServletUtil.getSession(request, response,
				Constant.SESSION_BACK_USER);
		if (null != user) {
			logOperateInfo.setOperAccount(user.getUserName());
			logOperateInfo.setOperName(OperName.TRANSFER);
		}
		vasLogClient.insertVasOpLog(logOperateInfo);

		return retMap;
	}
}
2017-08-24 14:17:53,318 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java 文件不存在!
2017-08-24 14:17:53,319 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java 文件创建成功!
2017-08-24 14:17:53,320 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java 写入成功!
2017-08-24 14:17:53,320 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java
2017-08-24 14:17:53,321 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java
2017-08-24 14:17:53,323 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.offline.web.form.promotion;

import java.io.Serializable;

import com.lvmama.lvf.common.dto.Pagination;
import com.lvmama.lvf.common.form.Form;
import com.lvmama.lvtraffic.promotion.common.dto.enums.ValidStatus;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto;

public class TPromotionActivityInfoForm extends TPromotionActivityInfoDto implements Form,Serializable {
	private static final long serialVersionUID = 1L;

	private Pagination pagination = new Pagination();

	private String createTimeStr;
	private String updateTimeStr;   
	private TPromotionActivityInfoDto tPromotionActivityInfoDto = new TPromotionActivityInfoDto();

	public Pagination getPagination() {
		return pagination;
	}

	public void setPagination(Pagination pagination) {
		this.pagination = pagination;
	}

	public TPromotionActivityInfoDto getTPromotionActivityInfoDto() {
		return tPromotionActivityInfoDto;
	}

	public void setTPromotionActivityInfoDto(TPromotionActivityInfoDto tPromotionActivityInfoDto) {
		this.tPromotionActivityInfoDto = tPromotionActivityInfoDto;
	}

	public void countRecords(int records) {
		pagination.countRecords(records);
	}

	public int getEndRow() {
		return pagination.getEndRow();
	}

	public int getPage() {
		return pagination.getPage();
	}

	public int getRecords() {
		return pagination.getRecords();
	}

	public int getRows() {
		return pagination.getRows();
	}

	public String getSidx() {
		return pagination.getSidx();
	}

	public String getSord() {
		return pagination.getSord();
	}

	public int getStartRow() {
		return pagination.getStartRow();
	}

	public int getTotal() {
		return pagination.getTotal();
	}

	public boolean isSearch() {
		return pagination.isSearch();
	}

	public void setPage(int page) {
		pagination.setPage(page);
	}

	public void setRecords(int records) {
		pagination.setRecords(records);
	}

	public void setRows(int rows) {
		pagination.setRows(rows);
	}

	public void setRowsByCustom(int customRows) {
		pagination.setRowsByCustom(customRows);
	}

	public void setSearch(boolean search) {
		pagination.setSearch(search);
	}

	public void setSidx(String sidx) {
		pagination.setSidx(sidx);
	}

	public void setSord(String sord) {
		pagination.setSord(sord);
	}

	public void setTotal(int total) {
		pagination.setTotal(total);
	} 
	
	public void setCreateTimeStr(String createTimeStr) {
		this.createTimeStr = createTimeStr;
	}

	public void setUpdateTimeStr(String updateTimeStr) {
		this.updateTimeStr = updateTimeStr;
	} 
 
	public String getCreateTimeStr() {
		return createTimeStr;
	}

	public String getUpdateTimeStr() {
		return updateTimeStr;
	} 
}
2017-08-24 14:17:53,323 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java 文件不存在!
2017-08-24 14:17:53,324 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java 文件创建成功!
2017-08-24 14:17:53,325 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java 写入成功!
2017-08-24 14:17:53,325 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java
2017-08-24 14:17:53,326 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java
2017-08-24 14:17:53,327 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.persistence.mapper;

import org.apache.ibatis.annotations.Param;

import com.lvmama.lvf.common.domain.DomainEntityBaseMapper;
import com.lvmama.lvf.common.domain.DomainEntityByNoMapper;
import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.Dto;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto;
import java.util.List;
public interface TPromotionActivityInfoMapper	extends
		DomainEntityBaseMapper<TPromotionActivityInfoDto, BaseQueryDto<? extends Dto>>,
		DomainEntityByNoMapper<TPromotionActivityInfoDto> {
	 /**
	 * 不分页查询
	 * @param q
	 * @return
	 */
	public List<TPromotionActivityInfoDto> queryNoPage(BaseQueryDto<TPromotionActivityInfoDto> q);
}
2017-08-24 14:17:53,327 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java 文件不存在!
2017-08-24 14:17:53,328 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java 文件创建成功!
2017-08-24 14:17:53,329 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java 写入成功!
2017-08-24 14:17:53,330 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java
2017-08-24 14:17:53,332 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml
2017-08-24 14:17:53,526 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lvmama.lvtraffic.promotion.persistence.mapper.TPromotionActivityInfoMapper"> 
     <resultMap id="BaseResultMap" type="com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto" >  
		<result column="id" property="id" jdbcType="INTEGER" />
		<result column="activity_name" property="activityName" jdbcType="VARCHAR" />
		<result column="category_type" property="categoryType" jdbcType="VARCHAR" />
		<result column="activity_type" property="activityType" jdbcType="VARCHAR" />
		<result column="activity_source" property="activitySource" jdbcType="VARCHAR" />
		<result column="vst_activity_id" property="vstActivityId" jdbcType="VARCHAR" />
		<result column="exclusive" property="exclusive" jdbcType="VARCHAR" />
		<result column="frist_channel_code" property="fristChannelCode" jdbcType="VARCHAR" />
		<result column="frist_channel_name" property="fristChannelName" jdbcType="VARCHAR" />
		<result column="second_chanel_code" property="secondChanelCode" jdbcType="VARCHAR" />
		<result column="second_channel_name" property="secondChannelName" jdbcType="VARCHAR" />
		<result column="fee_chanel_code" property="feeChanelCode" jdbcType="VARCHAR" />
		<result column="fee_chanel_name" property="feeChanelName" jdbcType="VARCHAR" />
		<result column="total_amount" property="totalAmount" jdbcType="VARCHAR" />
		<result column="balance" property="balance" jdbcType="VARCHAR" />
		<result column="start_time" property="startTime" jdbcType="TIMESTAMP" />
		<result column="endtime" property="endtime" jdbcType="TIMESTAMP" />
		<result column="desc_str" property="descStr" jdbcType="VARCHAR" />
		<result column="prom_branchs" property="promBranchs" jdbcType="VARCHAR" />
		<result column="start_visit_time" property="startVisitTime" jdbcType="TIMESTAMP" />
		<result column="end_visit_time" property="endVisitTime" jdbcType="TIMESTAMP" />
		<result column="amount_type" property="amountType" jdbcType="VARCHAR" />
		<result column="rule_type" property="ruleType" jdbcType="VARCHAR" />
		<result column="rule_value" property="ruleValue" jdbcType="VARCHAR" />
		<result column="add_each" property="addEach" jdbcType="VARCHAR" />
		<result column="fixed_amount" property="fixedAmount" jdbcType="VARCHAR" />
		<result column="rate_amount" property="rateAmount" jdbcType="VARCHAR" />
		<result column="price_type" property="priceType" jdbcType="VARCHAR" />
		<result column="user_type" property="userType" jdbcType="VARCHAR" />
		<result column="user_levels" property="userLevels" jdbcType="VARCHAR" />
		<result column="order_sources" property="orderSources" jdbcType="VARCHAR" />
		<result column="buy_tickets_types" property="buyTicketsTypes" jdbcType="VARCHAR" />
		<result column="all_line_valid" property="allLineValid" jdbcType="VARCHAR" />
		<result column="status" property="status" jdbcType="VARCHAR" />
		<result column="first_order_valid" property="firstOrderValid" jdbcType="VARCHAR" />
		<result column="first_order_username" property="firstOrderUsername" jdbcType="VARCHAR" />
		<result column="first_order_facility" property="firstOrderFacility" jdbcType="VARCHAR" />
		<result column="first_order_phone" property="firstOrderPhone" jdbcType="VARCHAR" />
		<result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
		<result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
	 </resultMap> 
	 
  <sql id="columns" >
		id,activity_name,category_type,activity_type,activity_source,vst_activity_id,exclusive,frist_channel_code,frist_channel_name,second_chanel_code,second_channel_name,fee_chanel_code,fee_chanel_name,total_amount,balance,start_time,endtime,desc_str,prom_branchs,start_visit_time,end_visit_time,amount_type,rule_type,rule_value,add_each,fixed_amount,rate_amount,price_type,user_type,user_levels,order_sources,buy_tickets_types,all_line_valid,status,first_order_valid,first_order_username,first_order_facility,first_order_phone,create_time,update_time
   </sql> 
	
	<sql id="queryCondition">
		<trim prefix="WHERE" prefixOverrides="AND"> 
			<if test="condition != null">
				<if test="condition.id!=null and condition.id != ''">
					AND id = #{condition.id,jdbcType=INTEGER}
				</if>
				<if test="condition.activityName!=null and condition.activityName != ''">
					AND activity_name = #{condition.activityName,jdbcType=VARCHAR}
				</if>
				<if test="condition.categoryType!=null and condition.categoryType != ''">
					AND category_type = #{condition.categoryType,jdbcType=VARCHAR}
				</if>
				<if test="condition.activityType!=null and condition.activityType != ''">
					AND activity_type = #{condition.activityType,jdbcType=VARCHAR}
				</if>
				<if test="condition.activitySource!=null and condition.activitySource != ''">
					AND activity_source = #{condition.activitySource,jdbcType=VARCHAR}
				</if>
				<if test="condition.vstActivityId!=null and condition.vstActivityId != ''">
					AND vst_activity_id = #{condition.vstActivityId,jdbcType=VARCHAR}
				</if>
				<if test="condition.exclusive!=null and condition.exclusive != ''">
					AND exclusive = #{condition.exclusive,jdbcType=VARCHAR}
				</if>
				<if test="condition.fristChannelCode!=null and condition.fristChannelCode != ''">
					AND frist_channel_code = #{condition.fristChannelCode,jdbcType=VARCHAR}
				</if>
				<if test="condition.fristChannelName!=null and condition.fristChannelName != ''">
					AND frist_channel_name = #{condition.fristChannelName,jdbcType=VARCHAR}
				</if>
				<if test="condition.secondChanelCode!=null and condition.secondChanelCode != ''">
					AND second_chanel_code = #{condition.secondChanelCode,jdbcType=VARCHAR}
				</if>
				<if test="condition.secondChannelName!=null and condition.secondChannelName != ''">
					AND second_channel_name = #{condition.secondChannelName,jdbcType=VARCHAR}
				</if>
				<if test="condition.feeChanelCode!=null and condition.feeChanelCode != ''">
					AND fee_chanel_code = #{condition.feeChanelCode,jdbcType=VARCHAR}
				</if>
				<if test="condition.feeChanelName!=null and condition.feeChanelName != ''">
					AND fee_chanel_name = #{condition.feeChanelName,jdbcType=VARCHAR}
				</if>
				<if test="condition.totalAmount!=null and condition.totalAmount != ''">
					AND total_amount = #{condition.totalAmount,jdbcType=VARCHAR}
				</if>
				<if test="condition.balance!=null and condition.balance != ''">
					AND balance = #{condition.balance,jdbcType=VARCHAR}
				</if>
				<if test="condition.startTime!=null and condition.startTime != ''">
					AND start_time = #{condition.startTime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.endtime!=null and condition.endtime != ''">
					AND endtime = #{condition.endtime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.descStr!=null and condition.descStr != ''">
					AND desc_str = #{condition.descStr,jdbcType=VARCHAR}
				</if>
				<if test="condition.promBranchs!=null and condition.promBranchs != ''">
					AND prom_branchs = #{condition.promBranchs,jdbcType=VARCHAR}
				</if>
				<if test="condition.startVisitTime!=null and condition.startVisitTime != ''">
					AND start_visit_time = #{condition.startVisitTime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.endVisitTime!=null and condition.endVisitTime != ''">
					AND end_visit_time = #{condition.endVisitTime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.amountType!=null and condition.amountType != ''">
					AND amount_type = #{condition.amountType,jdbcType=VARCHAR}
				</if>
				<if test="condition.ruleType!=null and condition.ruleType != ''">
					AND rule_type = #{condition.ruleType,jdbcType=VARCHAR}
				</if>
				<if test="condition.ruleValue!=null and condition.ruleValue != ''">
					AND rule_value = #{condition.ruleValue,jdbcType=VARCHAR}
				</if>
				<if test="condition.addEach!=null and condition.addEach != ''">
					AND add_each = #{condition.addEach,jdbcType=VARCHAR}
				</if>
				<if test="condition.fixedAmount!=null and condition.fixedAmount != ''">
					AND fixed_amount = #{condition.fixedAmount,jdbcType=VARCHAR}
				</if>
				<if test="condition.rateAmount!=null and condition.rateAmount != ''">
					AND rate_amount = #{condition.rateAmount,jdbcType=VARCHAR}
				</if>
				<if test="condition.priceType!=null and condition.priceType != ''">
					AND price_type = #{condition.priceType,jdbcType=VARCHAR}
				</if>
				<if test="condition.userType!=null and condition.userType != ''">
					AND user_type = #{condition.userType,jdbcType=VARCHAR}
				</if>
				<if test="condition.userLevels!=null and condition.userLevels != ''">
					AND user_levels = #{condition.userLevels,jdbcType=VARCHAR}
				</if>
				<if test="condition.orderSources!=null and condition.orderSources != ''">
					AND order_sources = #{condition.orderSources,jdbcType=VARCHAR}
				</if>
				<if test="condition.buyTicketsTypes!=null and condition.buyTicketsTypes != ''">
					AND buy_tickets_types = #{condition.buyTicketsTypes,jdbcType=VARCHAR}
				</if>
				<if test="condition.allLineValid!=null and condition.allLineValid != ''">
					AND all_line_valid = #{condition.allLineValid,jdbcType=VARCHAR}
				</if>
				<if test="condition.status!=null and condition.status != ''">
					AND status = #{condition.status,jdbcType=VARCHAR}
				</if>
				<if test="condition.firstOrderValid!=null and condition.firstOrderValid != ''">
					AND first_order_valid = #{condition.firstOrderValid,jdbcType=VARCHAR}
				</if>
				<if test="condition.firstOrderUsername!=null and condition.firstOrderUsername != ''">
					AND first_order_username = #{condition.firstOrderUsername,jdbcType=VARCHAR}
				</if>
				<if test="condition.firstOrderFacility!=null and condition.firstOrderFacility != ''">
					AND first_order_facility = #{condition.firstOrderFacility,jdbcType=VARCHAR}
				</if>
				<if test="condition.firstOrderPhone!=null and condition.firstOrderPhone != ''">
					AND first_order_phone = #{condition.firstOrderPhone,jdbcType=VARCHAR}
				</if>
				<if test="condition.createTime!=null and condition.createTime != ''">
					AND create_time = #{condition.createTime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.updateTime!=null and condition.updateTime != ''">
					AND update_time = #{condition.updateTime,jdbcType=TIMESTAMP}
				</if>
			</if>
		</trim>
	</sql>
	  
	<select id="get" resultMap="BaseResultMap">
		SELECT 
			<include refid="columns"/>
		FROM t_promotion_activity_info a 
		WHERE a.id = #{id}
	</select>
	
	<select id="query"  resultMap="BaseResultMap">
		select distinct * from  (SELECT 
			<include refid="columns"/>
		FROM t_promotion_activity_info a 
		<include refid="queryCondition"/>) t
		<include refid="MYSQL.pagination" />
	</select>
	
	<select id="queryNoPage"  resultMap="BaseResultMap">
		SELECT 
			<include refid="columns"/>
		FROM t_promotion_activity_info a 
		<include refid="queryCondition"/>
	</select>
	
	<select id="count" resultType="java.lang.Integer">
		SELECT COUNT(1) from 		
		(select distinct (a.id)  from t_promotion_activity_info a 
		<include refid="queryCondition"/>) t
	</select>
	
	<insert id="insert">
		INSERT INTO t_promotion_activity_info(
			id, 
			activity_name, 
			category_type, 
			activity_type, 
			activity_source, 
			vst_activity_id, 
			exclusive, 
			frist_channel_code, 
			frist_channel_name, 
			second_chanel_code, 
			second_channel_name, 
			fee_chanel_code, 
			fee_chanel_name, 
			total_amount, 
			balance, 
			start_time, 
			endtime, 
			desc_str, 
			prom_branchs, 
			start_visit_time, 
			end_visit_time, 
			amount_type, 
			rule_type, 
			rule_value, 
			add_each, 
			fixed_amount, 
			rate_amount, 
			price_type, 
			user_type, 
			user_levels, 
			order_sources, 
			buy_tickets_types, 
			all_line_valid, 
			status, 
			first_order_valid, 
			first_order_username, 
			first_order_facility, 
			first_order_phone, 
			create_time, 
			update_time
		) VALUES (
			#{id}, 
			#{activityName}, 
			#{categoryType}, 
			#{activityType}, 
			#{activitySource}, 
			#{vstActivityId}, 
			#{exclusive}, 
			#{fristChannelCode}, 
			#{fristChannelName}, 
			#{secondChanelCode}, 
			#{secondChannelName}, 
			#{feeChanelCode}, 
			#{feeChanelName}, 
			#{totalAmount}, 
			#{balance}, 
			#{startTime}, 
			#{endtime}, 
			#{descStr}, 
			#{promBranchs}, 
			#{startVisitTime}, 
			#{endVisitTime}, 
			#{amountType}, 
			#{ruleType}, 
			#{ruleValue}, 
			#{addEach}, 
			#{fixedAmount}, 
			#{rateAmount}, 
			#{priceType}, 
			#{userType}, 
			#{userLevels}, 
			#{orderSources}, 
			#{buyTicketsTypes}, 
			#{allLineValid}, 
			#{status}, 
			#{firstOrderValid}, 
			#{firstOrderUsername}, 
			#{firstOrderFacility}, 
			#{firstOrderPhone}, 
			#{createTime}, 
			#{updateTime}
		)
	</insert>
	
	<select id="getById" resultMap="BaseResultMap" parameterType="java.lang.Long">
		SELECT 
			<include refid="columns"/>
		FROM t_promotion_activity_info a 
		WHERE id = #{id}
	</select>  
	
	<update id="updateById">
		UPDATE t_promotion_activity_info  
		<set> 	
			<if test="i.id!=null">
				id = #{i.id,jdbcType=INTEGER},
			</if>
			<if test="i.activityName!=null">
				activity_name = #{i.activityName,jdbcType=VARCHAR},
			</if>
			<if test="i.categoryType!=null">
				category_type = #{i.categoryType,jdbcType=VARCHAR},
			</if>
			<if test="i.activityType!=null">
				activity_type = #{i.activityType,jdbcType=VARCHAR},
			</if>
			<if test="i.activitySource!=null">
				activity_source = #{i.activitySource,jdbcType=VARCHAR},
			</if>
			<if test="i.vstActivityId!=null">
				vst_activity_id = #{i.vstActivityId,jdbcType=VARCHAR},
			</if>
			<if test="i.exclusive!=null">
				exclusive = #{i.exclusive,jdbcType=VARCHAR},
			</if>
			<if test="i.fristChannelCode!=null">
				frist_channel_code = #{i.fristChannelCode,jdbcType=VARCHAR},
			</if>
			<if test="i.fristChannelName!=null">
				frist_channel_name = #{i.fristChannelName,jdbcType=VARCHAR},
			</if>
			<if test="i.secondChanelCode!=null">
				second_chanel_code = #{i.secondChanelCode,jdbcType=VARCHAR},
			</if>
			<if test="i.secondChannelName!=null">
				second_channel_name = #{i.secondChannelName,jdbcType=VARCHAR},
			</if>
			<if test="i.feeChanelCode!=null">
				fee_chanel_code = #{i.feeChanelCode,jdbcType=VARCHAR},
			</if>
			<if test="i.feeChanelName!=null">
				fee_chanel_name = #{i.feeChanelName,jdbcType=VARCHAR},
			</if>
			<if test="i.totalAmount!=null">
				total_amount = #{i.totalAmount,jdbcType=VARCHAR},
			</if>
			<if test="i.balance!=null">
				balance = #{i.balance,jdbcType=VARCHAR},
			</if>
			<if test="i.startTime!=null">
				start_time = #{i.startTime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.endtime!=null">
				endtime = #{i.endtime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.descStr!=null">
				desc_str = #{i.descStr,jdbcType=VARCHAR},
			</if>
			<if test="i.promBranchs!=null">
				prom_branchs = #{i.promBranchs,jdbcType=VARCHAR},
			</if>
			<if test="i.startVisitTime!=null">
				start_visit_time = #{i.startVisitTime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.endVisitTime!=null">
				end_visit_time = #{i.endVisitTime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.amountType!=null">
				amount_type = #{i.amountType,jdbcType=VARCHAR},
			</if>
			<if test="i.ruleType!=null">
				rule_type = #{i.ruleType,jdbcType=VARCHAR},
			</if>
			<if test="i.ruleValue!=null">
				rule_value = #{i.ruleValue,jdbcType=VARCHAR},
			</if>
			<if test="i.addEach!=null">
				add_each = #{i.addEach,jdbcType=VARCHAR},
			</if>
			<if test="i.fixedAmount!=null">
				fixed_amount = #{i.fixedAmount,jdbcType=VARCHAR},
			</if>
			<if test="i.rateAmount!=null">
				rate_amount = #{i.rateAmount,jdbcType=VARCHAR},
			</if>
			<if test="i.priceType!=null">
				price_type = #{i.priceType,jdbcType=VARCHAR},
			</if>
			<if test="i.userType!=null">
				user_type = #{i.userType,jdbcType=VARCHAR},
			</if>
			<if test="i.userLevels!=null">
				user_levels = #{i.userLevels,jdbcType=VARCHAR},
			</if>
			<if test="i.orderSources!=null">
				order_sources = #{i.orderSources,jdbcType=VARCHAR},
			</if>
			<if test="i.buyTicketsTypes!=null">
				buy_tickets_types = #{i.buyTicketsTypes,jdbcType=VARCHAR},
			</if>
			<if test="i.allLineValid!=null">
				all_line_valid = #{i.allLineValid,jdbcType=VARCHAR},
			</if>
			<if test="i.status!=null">
				status = #{i.status,jdbcType=VARCHAR},
			</if>
			<if test="i.firstOrderValid!=null">
				first_order_valid = #{i.firstOrderValid,jdbcType=VARCHAR},
			</if>
			<if test="i.firstOrderUsername!=null">
				first_order_username = #{i.firstOrderUsername,jdbcType=VARCHAR},
			</if>
			<if test="i.firstOrderFacility!=null">
				first_order_facility = #{i.firstOrderFacility,jdbcType=VARCHAR},
			</if>
			<if test="i.firstOrderPhone!=null">
				first_order_phone = #{i.firstOrderPhone,jdbcType=VARCHAR},
			</if>
			<if test="i.createTime!=null">
				create_time = #{i.createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.updateTime!=null">
				update_time = #{i.updateTime,jdbcType=TIMESTAMP}
			</if>
		</set> 	
		WHERE id = #{id}
	</update>
	
	<update id="delete">
		DELETE FROM t_promotion_activity_info
		WHERE id = #{id}
	</update>
	
</mapper>
2017-08-24 14:17:53,528 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml 文件不存在!
2017-08-24 14:17:53,528 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml 文件创建成功!
2017-08-24 14:17:53,530 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml 写入成功!
2017-08-24 14:17:53,530 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml
2017-08-24 14:17:53,531 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java
2017-08-24 14:17:53,537 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.service;

import java.util.List;

import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvf.common.dto.Pagination;
import com.lvmama.lvtraffic.promotion.business.service.TPromotionActivityInfoService;
import com.lvmama.lvtraffic.promotion.common.client.path.TPromotionActivityInfoBusinessClientPath;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoVehicleDto;

@Component
@Path("")
public class TPromotionActivityInfoResource{
	
	private static final Logger logger = LoggerFactory.getLogger(TPromotionActivityInfoResource.class);
	
	@Autowired
	private  TPromotionActivityInfoService tPromotionActivityInfoService;
	
	/**
	 * 
	 * @Description: 根据id获得促销活动
	 * @param request
	 * @return Response 
	 * @throws
	 */
	@POST
	@Produces(MediaType.APPLICATION_JSON)
	@Consumes(MediaType.APPLICATION_JSON)
	@Path(TPromotionActivityInfoBusinessClientPath.Path.QUERY_TPROMOTIONACTIVITYINFO_BY_ID)
	public Response queryTPromotionActivityInfoById(Long cityId){ 
		try {
			TPromotionActivityInfoDto tPromotionActivityInfoDto = tPromotionActivityInfoService.queryTPromotionActivityInfoById(cityId);
			return Response.ok(tPromotionActivityInfoDto).build();
		} catch (Exception e) {
			e.printStackTrace();
			return Response.noContent().build();
		}
	}  
	
	@POST
	@GET
	@Produces(MediaType.APPLICATION_JSON)
	@Consumes(MediaType.APPLICATION_JSON)
	@Path(TPromotionActivityInfoBusinessClientPath.Path.QUERY_TPROMOTIONACTIVITYINFO_LIST)
	public Response queryTPromotionActivityInfoList(BaseQueryDto<TPromotionActivityInfoDto> request){
		try { 
			BaseResultDto<TPromotionActivityInfoDto> baseResult = new BaseResultDto<TPromotionActivityInfoDto>(); 
			List<TPromotionActivityInfoDto> data = tPromotionActivityInfoService.queryTPromotionActivityInfos(request);
			int count = tPromotionActivityInfoService.queryTPromotionActivityInfoCount(request);
			Pagination pagination = request.getPagination();
			pagination.setRecords(count);
			pagination.countRecords(count); 
			
			baseResult.setResults(data);
			baseResult.setPagination(pagination);
			return Response.ok(baseResult).build();
		} catch (Exception e) {
			logger.error(e.getMessage(),e);
			return Response.noContent().build();
		}
	}
	
	@POST
	@Produces(MediaType.APPLICATION_JSON)
	@Consumes(MediaType.APPLICATION_JSON)
	@Path(TPromotionActivityInfoBusinessClientPath.Path.INSERT_TPROMOTIONACTIVITYINFO)
	public Response insertTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto){ 
		try{ 
			BaseSingleResultDto<TPromotionActivityInfoDto> result = new BaseSingleResultDto<TPromotionActivityInfoDto>();		
			
			result = tPromotionActivityInfoService.insertTPromotionActivityInfo(tPromotionActivityInfoDto);
			
			return Response.ok(result).build();
		}catch (Exception e) {
			
			e.printStackTrace();
			return Response.noContent().build();
		}
	}
	
	@POST
	@Produces(MediaType.APPLICATION_JSON)
	@Consumes(MediaType.APPLICATION_JSON)
	@Path(TPromotionActivityInfoBusinessClientPath.Path.EDIT_TPROMOTIONACTIVITYINFO)
	public Response editTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto){ 
		try{ 
			BaseSingleResultDto<TPromotionActivityInfoDto> result = new BaseSingleResultDto<TPromotionActivityInfoDto>();		
			
			result = tPromotionActivityInfoService.updateTPromotionActivityInfo(tPromotionActivityInfoDto);
			
			return Response.ok(result).build();
		}catch (Exception e) {
			
			e.printStackTrace();
			return Response.noContent().build();
		}
	}
}
2017-08-24 14:17:53,537 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java 文件不存在!
2017-08-24 14:17:53,538 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java 文件创建成功!
2017-08-24 14:17:53,539 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java 写入成功!
2017-08-24 14:17:53,539 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java
2017-08-24 14:17:53,540 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java
2017-08-24 14:17:53,541 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.business.service;

import java.util.List;

import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto; 
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto; 

/**
 * 促销活动服务
* @author Administrator
* @date 
*/
public interface TPromotionActivityInfoService {   
	/**
	 * 查询促销活动.
	 * @param queryCondition
	 * @return
	 */
	List<TPromotionActivityInfoDto> queryTPromotionActivityInfos(BaseQueryDto<TPromotionActivityInfoDto> queryCondition);
	
	/**
	 * 查询促销活动.
	 * @param queryCondition
	 * @return
	 */
	TPromotionActivityInfoDto queryTPromotionActivityInfoById(Long id);
	
	/**
	 * 查询促销活动数量
	 * @param queryCondition
	 * @return
	 */
	int queryTPromotionActivityInfoCount(BaseQueryDto<TPromotionActivityInfoDto> queryCondition);
	
	/**
	 * 新增促销活动
	 * @param tPromotionActivityInfoDto
	 * @return
	 */
	public BaseSingleResultDto<TPromotionActivityInfoDto> insertTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto);
	
	/**
	 * 修改促销活动.
	 * @param tPromotionActivityInfoDto
	 * @return
	 */
	public BaseSingleResultDto<TPromotionActivityInfoDto> updateTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto);  
}
2017-08-24 14:17:53,542 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java 文件不存在!
2017-08-24 14:17:53,543 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java 文件创建成功!
2017-08-24 14:17:53,544 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java 写入成功!
2017-08-24 14:17:53,544 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java
2017-08-24 14:17:53,545 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl
2017-08-24 14:17:53,584 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
     <link rel="stylesheet" href="${request.contextPath}/css/trip-list.css">
    <link rel="stylesheet" href="${request.contextPath}/css/order-details.css" type="text/css"/>
	<link type="text/css" rel="stylesheet" href="${request.contextPath}/js/resources/jquery-ui-1.8.11/css/redmond/jquery-ui-1.8.11.css"/>
	<link type="text/css" rel="stylesheet" href="${request.contextPath}/js/resources/jqGrid/css/ui.jqgrid.css"/>
	<script src="${request.contextPath}/js/resources/jqGrid/js/jquery-1.7.2.min.js"> </script>
	<script src="${request.contextPath}/js/resources/jquery-ui-1.8.10.custom.min.js"></script>
	<script src="${request.contextPath}/js/resources/jqGrid/src/i18n/grid.locale-cn.js"></script>
	<script src="${request.contextPath}/js/resources/jqGrid/js/jquery.jqGrid.src.js"></script>
	<script type="text/javascript" src="${request.contextPath}/js/My97DatePicker/WdatePicker.js"></script>

  	<style>
        span{
            width: 15%;
        }
    </style>
</head>
<body>
<div class="content content1">
    <div class="breadnav"><span>增值服务</span>>促销活动</div>
    <form id="myForm" autocomplete="off" >
        <div class="infor1">
            <div class="product message">
                <div class="main">

                    <div class="part">
                                      
                    </div>

                </div>
            </div>
        </div>

        <div class="click">
            <a href="javascript:;"><div class="button" onclick="query()">查询</div></a>
            <a href="javascript:;"><div class="button" onclick="add()">新增</div></a> 
        </div>

    </form>

    <div class="content1" style="margin-top:50px;">
        <table id="tPromotionActivityInfoList"></table>
        <div id="pager"></div>
    </div>

	<div id="jsContainer" class="jsContainer" style="height: 0">
		<div id="tuna_alert"
			style="display: none; position: absolute; z-index: 999; overflow: hidden;"></div>
		<div id="tuna_jmpinfo"
			style="visibility: hidden; position: absolute; z-index: 120;"></div>
	</div>                 
	
		
	<div id="addLayer" class="content content1" style="display:none; width: 400px; height: 380px;">
		<table width="100%" style="margin-top: 5px;">
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>id：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addId" name="addId"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>促销活动名称：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addActivityName" name="addActivityName"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动品类类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addCategoryType" name="addCategoryType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addActivityType" name="addActivityType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动来源(VST/大交通)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addActivitySource" name="addActivitySource"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>VST活动ID：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addVstActivityId" name="addVstActivityId"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>是否排他(Y/N)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addExclusive" name="addExclusive"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>一级渠道code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFristChannelCode" name="addFristChannelCode"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>一级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFristChannelName" name="addFristChannelName"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>二级渠道code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addSecondChanelCode" name="addSecondChanelCode"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>二级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addSecondChannelName" name="addSecondChannelName"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>三级渠道Code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFeeChanelCode" name="addFeeChanelCode"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>三级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFeeChanelName" name="addFeeChanelName"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动总金额：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addTotalAmount" name="addTotalAmount"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动剩余金额：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addBalance" name="addBalance"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动开始时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addStartTime" name="addStartTime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动结束时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addEndtime" name="addEndtime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>备注说明：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addDescStr" name="addDescStr"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠类别(成人/儿童)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addPromBranchs" name="addPromBranchs"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>游玩开始时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addStartVisitTime" name="addStartVisitTime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>游玩结束时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addEndVisitTime" name="addEndVisitTime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠方式(按金额/按折扣)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addAmountType" name="addAmountType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠规则类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addRuleType" name="addRuleType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠起始值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addRuleValue" name="addRuleValue"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠每次增加值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addAddEach" name="addAddEach"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>按金额立减值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFixedAmount" name="addFixedAmount"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>按百分比立减值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addRateAmount" name="addRateAmount"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>针对价格类型(销售价/结算价)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addPriceType" name="addPriceType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>会员类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addUserType" name="addUserType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>选中会员等级：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addUserLevels" name="addUserLevels"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠支持渠道(PC,WAP等)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addOrderSources" name="addOrderSources"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>购票方式(自取票/12306购票等)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addBuyTicketsTypes" name="addBuyTicketsTypes"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>所有线路城市是否优惠：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addAllLineValid" name="addAllLineValid"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>促销活动状态(是否开启)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addStatus" name="addStatus"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>是否首单立减：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFirstOrderValid" name="addFirstOrderValid"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>首单是否判断用户名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFirstOrderUsername" name="addFirstOrderUsername"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>首单判断设配号：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFirstOrderFacility" name="addFirstOrderFacility"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>首单判断手机号：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFirstOrderPhone" name="addFirstOrderPhone"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>create_time：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addCreateTime" name="addCreateTime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>update_time：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addUpdateTime" name="addUpdateTime"/>
				</td>
			</tr>
		</table>
		<div class="click" style="margin:0px 240px;margin-top: 20px;">
			<a href="javascript:void(0);" id="bt_add_tPromotionActivityInfo"><div class="button" id="div2310">保存</div></a>
		</div>
	</div>

	<div id="editLayer" class="content content1" style="display:none; width: 400px; height: 380px;">
		<table width="100%" style="margin-top: 5px;">
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>id：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editId" name="editId" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>促销活动名称：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editActivityName" name="editActivityName" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动品类类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editCategoryType" name="editCategoryType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editActivityType" name="editActivityType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动来源(VST/大交通)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editActivitySource" name="editActivitySource" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>VST活动ID：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editVstActivityId" name="editVstActivityId" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>是否排他(Y/N)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editExclusive" name="editExclusive" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>一级渠道code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFristChannelCode" name="editFristChannelCode" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>一级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFristChannelName" name="editFristChannelName" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>二级渠道code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editSecondChanelCode" name="editSecondChanelCode" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>二级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editSecondChannelName" name="editSecondChannelName" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>三级渠道Code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFeeChanelCode" name="editFeeChanelCode" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>三级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFeeChanelName" name="editFeeChanelName" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动总金额：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editTotalAmount" name="editTotalAmount" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动剩余金额：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editBalance" name="editBalance" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动开始时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editStartTime" name="editStartTime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动结束时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editEndtime" name="editEndtime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>备注说明：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editDescStr" name="editDescStr" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠类别(成人/儿童)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editPromBranchs" name="editPromBranchs" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>游玩开始时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editStartVisitTime" name="editStartVisitTime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>游玩结束时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editEndVisitTime" name="editEndVisitTime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠方式(按金额/按折扣)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editAmountType" name="editAmountType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠规则类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editRuleType" name="editRuleType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠起始值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editRuleValue" name="editRuleValue" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠每次增加值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editAddEach" name="editAddEach" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>按金额立减值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFixedAmount" name="editFixedAmount" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>按百分比立减值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editRateAmount" name="editRateAmount" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>针对价格类型(销售价/结算价)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editPriceType" name="editPriceType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>会员类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editUserType" name="editUserType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>选中会员等级：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editUserLevels" name="editUserLevels" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠支持渠道(PC,WAP等)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editOrderSources" name="editOrderSources" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>购票方式(自取票/12306购票等)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editBuyTicketsTypes" name="editBuyTicketsTypes" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>所有线路城市是否优惠：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editAllLineValid" name="editAllLineValid" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>促销活动状态(是否开启)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editStatus" name="editStatus" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>是否首单立减：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFirstOrderValid" name="editFirstOrderValid" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>首单是否判断用户名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFirstOrderUsername" name="editFirstOrderUsername" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>首单判断设配号：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFirstOrderFacility" name="editFirstOrderFacility" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>首单判断手机号：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFirstOrderPhone" name="editFirstOrderPhone" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>create_time：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editCreateTime" name="editCreateTime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>update_time：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editUpdateTime" name="editUpdateTime" />
				</td>
			</tr>
		</table>
		<div class="click" style="margin:0px 240px;margin-top: 20px;">
			<a href="javascript:void(0);" id="bt_edit_tPromotionActivityInfo"><div class="button" id="div2311">保存</div></a>
		</div>
	</div> 
</div>
</body>
<script type="text/javascript"> 
    $(function (){ 
        initGrid(); 
		
		$("#bt_edit_tPromotionActivityInfo").on("click",function(){ 
			var idVal = $("#editId").val();
			var activityNameVal = $("#editActivityName").val();
			var categoryTypeVal = $("#editCategoryType").val();
			var activityTypeVal = $("#editActivityType").val();
			var activitySourceVal = $("#editActivitySource").val();
			var vstActivityIdVal = $("#editVstActivityId").val();
			var exclusiveVal = $("#editExclusive").val();
			var fristChannelCodeVal = $("#editFristChannelCode").val();
			var fristChannelNameVal = $("#editFristChannelName").val();
			var secondChanelCodeVal = $("#editSecondChanelCode").val();
			var secondChannelNameVal = $("#editSecondChannelName").val();
			var feeChanelCodeVal = $("#editFeeChanelCode").val();
			var feeChanelNameVal = $("#editFeeChanelName").val();
			var totalAmountVal = $("#editTotalAmount").val();
			var balanceVal = $("#editBalance").val();
			var startTimeVal = $("#editStartTime").val();
			var endtimeVal = $("#editEndtime").val();
			var descStrVal = $("#editDescStr").val();
			var promBranchsVal = $("#editPromBranchs").val();
			var startVisitTimeVal = $("#editStartVisitTime").val();
			var endVisitTimeVal = $("#editEndVisitTime").val();
			var amountTypeVal = $("#editAmountType").val();
			var ruleTypeVal = $("#editRuleType").val();
			var ruleValueVal = $("#editRuleValue").val();
			var addEachVal = $("#editAddEach").val();
			var fixedAmountVal = $("#editFixedAmount").val();
			var rateAmountVal = $("#editRateAmount").val();
			var priceTypeVal = $("#editPriceType").val();
			var userTypeVal = $("#editUserType").val();
			var userLevelsVal = $("#editUserLevels").val();
			var orderSourcesVal = $("#editOrderSources").val();
			var buyTicketsTypesVal = $("#editBuyTicketsTypes").val();
			var allLineValidVal = $("#editAllLineValid").val();
			var statusVal = $("#editStatus").val();
			var firstOrderValidVal = $("#editFirstOrderValid").val();
			var firstOrderUsernameVal = $("#editFirstOrderUsername").val();
			var firstOrderFacilityVal = $("#editFirstOrderFacility").val();
			var firstOrderPhoneVal = $("#editFirstOrderPhone").val();
			var createTimeVal = $("#editCreateTime").val();
			var updateTimeVal = $("#editUpdateTime").val();
			
			/*
            if(cityNameVal == ''){
				alert("城市名称不能空");
				return false;
			} */
            $.ajax({
                url : '${request.contextPath}/tPromotionActivityInfo/editTPromotionActivityInfo',
                type : 'POST',
                data : {
	                "tPromotionActivityInfoDto.id" : idVal, 
	                	                "tPromotionActivityInfoDto.activityName" : activityNameVal, 
	                	                "tPromotionActivityInfoDto.categoryType" : categoryTypeVal, 
	                	                "tPromotionActivityInfoDto.activityType" : activityTypeVal, 
	                	                "tPromotionActivityInfoDto.activitySource" : activitySourceVal, 
	                	                "tPromotionActivityInfoDto.vstActivityId" : vstActivityIdVal, 
	                	                "tPromotionActivityInfoDto.exclusive" : exclusiveVal, 
	                	                "tPromotionActivityInfoDto.fristChannelCode" : fristChannelCodeVal, 
	                	                "tPromotionActivityInfoDto.fristChannelName" : fristChannelNameVal, 
	                	                "tPromotionActivityInfoDto.secondChanelCode" : secondChanelCodeVal, 
	                	                "tPromotionActivityInfoDto.secondChannelName" : secondChannelNameVal, 
	                	                "tPromotionActivityInfoDto.feeChanelCode" : feeChanelCodeVal, 
	                	                "tPromotionActivityInfoDto.feeChanelName" : feeChanelNameVal, 
	                	                "tPromotionActivityInfoDto.totalAmount" : totalAmountVal, 
	                	                "tPromotionActivityInfoDto.balance" : balanceVal, 
	                	                "tPromotionActivityInfoDto.startTime" : startTimeVal, 
	                	                "tPromotionActivityInfoDto.endtime" : endtimeVal, 
	                	                "tPromotionActivityInfoDto.descStr" : descStrVal, 
	                	                "tPromotionActivityInfoDto.promBranchs" : promBranchsVal, 
	                	                "tPromotionActivityInfoDto.startVisitTime" : startVisitTimeVal, 
	                	                "tPromotionActivityInfoDto.endVisitTime" : endVisitTimeVal, 
	                	                "tPromotionActivityInfoDto.amountType" : amountTypeVal, 
	                	                "tPromotionActivityInfoDto.ruleType" : ruleTypeVal, 
	                	                "tPromotionActivityInfoDto.ruleValue" : ruleValueVal, 
	                	                "tPromotionActivityInfoDto.addEach" : addEachVal, 
	                	                "tPromotionActivityInfoDto.fixedAmount" : fixedAmountVal, 
	                	                "tPromotionActivityInfoDto.rateAmount" : rateAmountVal, 
	                	                "tPromotionActivityInfoDto.priceType" : priceTypeVal, 
	                	                "tPromotionActivityInfoDto.userType" : userTypeVal, 
	                	                "tPromotionActivityInfoDto.userLevels" : userLevelsVal, 
	                	                "tPromotionActivityInfoDto.orderSources" : orderSourcesVal, 
	                	                "tPromotionActivityInfoDto.buyTicketsTypes" : buyTicketsTypesVal, 
	                	                "tPromotionActivityInfoDto.allLineValid" : allLineValidVal, 
	                	                "tPromotionActivityInfoDto.status" : statusVal, 
	                	                "tPromotionActivityInfoDto.firstOrderValid" : firstOrderValidVal, 
	                	                "tPromotionActivityInfoDto.firstOrderUsername" : firstOrderUsernameVal, 
	                	                "tPromotionActivityInfoDto.firstOrderFacility" : firstOrderFacilityVal, 
	                	                "tPromotionActivityInfoDto.firstOrderPhone" : firstOrderPhoneVal, 
	                	                "tPromotionActivityInfoDto.createTime" : createTimeVal, 
	                	                "tPromotionActivityInfoDto.updateTime" : updateTimeVal   
                },
                success : function(data){ 
                    if(data.flag == 'SUCCESS'){
                        alert("数据修改成功！");
						$("#editLayer").dialog('close')  ;				
						query();
                    }else{
                        alert("数据修改失败");
                    }
                }
            });
        });
		
		 $("#bt_add_tPromotionActivityInfo").on("click",function(){  
			var idVal = $("#addId").val();
			var activityNameVal = $("#addActivityName").val();
			var categoryTypeVal = $("#addCategoryType").val();
			var activityTypeVal = $("#addActivityType").val();
			var activitySourceVal = $("#addActivitySource").val();
			var vstActivityIdVal = $("#addVstActivityId").val();
			var exclusiveVal = $("#addExclusive").val();
			var fristChannelCodeVal = $("#addFristChannelCode").val();
			var fristChannelNameVal = $("#addFristChannelName").val();
			var secondChanelCodeVal = $("#addSecondChanelCode").val();
			var secondChannelNameVal = $("#addSecondChannelName").val();
			var feeChanelCodeVal = $("#addFeeChanelCode").val();
			var feeChanelNameVal = $("#addFeeChanelName").val();
			var totalAmountVal = $("#addTotalAmount").val();
			var balanceVal = $("#addBalance").val();
			var startTimeVal = $("#addStartTime").val();
			var endtimeVal = $("#addEndtime").val();
			var descStrVal = $("#addDescStr").val();
			var promBranchsVal = $("#addPromBranchs").val();
			var startVisitTimeVal = $("#addStartVisitTime").val();
			var endVisitTimeVal = $("#addEndVisitTime").val();
			var amountTypeVal = $("#addAmountType").val();
			var ruleTypeVal = $("#addRuleType").val();
			var ruleValueVal = $("#addRuleValue").val();
			var addEachVal = $("#addAddEach").val();
			var fixedAmountVal = $("#addFixedAmount").val();
			var rateAmountVal = $("#addRateAmount").val();
			var priceTypeVal = $("#addPriceType").val();
			var userTypeVal = $("#addUserType").val();
			var userLevelsVal = $("#addUserLevels").val();
			var orderSourcesVal = $("#addOrderSources").val();
			var buyTicketsTypesVal = $("#addBuyTicketsTypes").val();
			var allLineValidVal = $("#addAllLineValid").val();
			var statusVal = $("#addStatus").val();
			var firstOrderValidVal = $("#addFirstOrderValid").val();
			var firstOrderUsernameVal = $("#addFirstOrderUsername").val();
			var firstOrderFacilityVal = $("#addFirstOrderFacility").val();
			var firstOrderPhoneVal = $("#addFirstOrderPhone").val();
			var createTimeVal = $("#addCreateTime").val();
			var updateTimeVal = $("#addUpdateTime").val();
			/*
            if(cityNameV == ''){
				alert("城市名称不能空");
				return false;
			} */
			
            $.ajax({
                url : '${request.contextPath}/tPromotionActivityInfo/insertTPromotionActivityInfo',
                type : 'POST',
                data : {
	                "tPromotionActivityInfoDto.id" : idVal, 
	                	                "tPromotionActivityInfoDto.activityName" : activityNameVal, 
	                	                "tPromotionActivityInfoDto.categoryType" : categoryTypeVal, 
	                	                "tPromotionActivityInfoDto.activityType" : activityTypeVal, 
	                	                "tPromotionActivityInfoDto.activitySource" : activitySourceVal, 
	                	                "tPromotionActivityInfoDto.vstActivityId" : vstActivityIdVal, 
	                	                "tPromotionActivityInfoDto.exclusive" : exclusiveVal, 
	                	                "tPromotionActivityInfoDto.fristChannelCode" : fristChannelCodeVal, 
	                	                "tPromotionActivityInfoDto.fristChannelName" : fristChannelNameVal, 
	                	                "tPromotionActivityInfoDto.secondChanelCode" : secondChanelCodeVal, 
	                	                "tPromotionActivityInfoDto.secondChannelName" : secondChannelNameVal, 
	                	                "tPromotionActivityInfoDto.feeChanelCode" : feeChanelCodeVal, 
	                	                "tPromotionActivityInfoDto.feeChanelName" : feeChanelNameVal, 
	                	                "tPromotionActivityInfoDto.totalAmount" : totalAmountVal, 
	                	                "tPromotionActivityInfoDto.balance" : balanceVal, 
	                	                "tPromotionActivityInfoDto.startTime" : startTimeVal, 
	                	                "tPromotionActivityInfoDto.endtime" : endtimeVal, 
	                	                "tPromotionActivityInfoDto.descStr" : descStrVal, 
	                	                "tPromotionActivityInfoDto.promBranchs" : promBranchsVal, 
	                	                "tPromotionActivityInfoDto.startVisitTime" : startVisitTimeVal, 
	                	                "tPromotionActivityInfoDto.endVisitTime" : endVisitTimeVal, 
	                	                "tPromotionActivityInfoDto.amountType" : amountTypeVal, 
	                	                "tPromotionActivityInfoDto.ruleType" : ruleTypeVal, 
	                	                "tPromotionActivityInfoDto.ruleValue" : ruleValueVal, 
	                	                "tPromotionActivityInfoDto.addEach" : addEachVal, 
	                	                "tPromotionActivityInfoDto.fixedAmount" : fixedAmountVal, 
	                	                "tPromotionActivityInfoDto.rateAmount" : rateAmountVal, 
	                	                "tPromotionActivityInfoDto.priceType" : priceTypeVal, 
	                	                "tPromotionActivityInfoDto.userType" : userTypeVal, 
	                	                "tPromotionActivityInfoDto.userLevels" : userLevelsVal, 
	                	                "tPromotionActivityInfoDto.orderSources" : orderSourcesVal, 
	                	                "tPromotionActivityInfoDto.buyTicketsTypes" : buyTicketsTypesVal, 
	                	                "tPromotionActivityInfoDto.allLineValid" : allLineValidVal, 
	                	                "tPromotionActivityInfoDto.status" : statusVal, 
	                	                "tPromotionActivityInfoDto.firstOrderValid" : firstOrderValidVal, 
	                	                "tPromotionActivityInfoDto.firstOrderUsername" : firstOrderUsernameVal, 
	                	                "tPromotionActivityInfoDto.firstOrderFacility" : firstOrderFacilityVal, 
	                	                "tPromotionActivityInfoDto.firstOrderPhone" : firstOrderPhoneVal, 
	                	                "tPromotionActivityInfoDto.createTime" : createTimeVal, 
	                	                "tPromotionActivityInfoDto.updateTime" : updateTimeVal   
                },
                success : function(data){ 
                    if(data.flag == 'SUCCESS'){
                        alert("数据新增成功！"); 
						$("#addLayer").dialog('close')  ;	
						query(); 
                    }else{
                        alert("数据新增失败");
                    }
                }
            });
        });
    });

    //清空查询信息
    function reset() {
        document.getElementById("myForm").reset();
    } 
	
    //查询列表信息
    function query() { 
        $("#tPromotionActivityInfoList").jqGrid('setGridParam', {
            url : "${request.contextPath}/tPromotionActivityInfo/queryTPromotionActivityInfoList",
            datatype : "json",
            mtype : "POST",
            postData : getQueryParams()
        }).trigger("reloadGrid");
    }
 
	
	//修改
	function edit(trNode) {  
		$("#editId").val($(trNode).children().eq(1).text());
		$("#editActivityName").val($(trNode).children().eq(2).text());
		$("#editCategoryType").val($(trNode).children().eq(3).text());
		$("#editActivityType").val($(trNode).children().eq(4).text());
		$("#editActivitySource").val($(trNode).children().eq(5).text());
		$("#editVstActivityId").val($(trNode).children().eq(6).text());
		$("#editExclusive").val($(trNode).children().eq(7).text());
		$("#editFristChannelCode").val($(trNode).children().eq(8).text());
		$("#editFristChannelName").val($(trNode).children().eq(9).text());
		$("#editSecondChanelCode").val($(trNode).children().eq(10).text());
		$("#editSecondChannelName").val($(trNode).children().eq(11).text());
		$("#editFeeChanelCode").val($(trNode).children().eq(12).text());
		$("#editFeeChanelName").val($(trNode).children().eq(13).text());
		$("#editTotalAmount").val($(trNode).children().eq(14).text());
		$("#editBalance").val($(trNode).children().eq(15).text());
		$("#editStartTime").val($(trNode).children().eq(16).text());
		$("#editEndtime").val($(trNode).children().eq(17).text());
		$("#editDescStr").val($(trNode).children().eq(18).text());
		$("#editPromBranchs").val($(trNode).children().eq(19).text());
		$("#editStartVisitTime").val($(trNode).children().eq(20).text());
		$("#editEndVisitTime").val($(trNode).children().eq(21).text());
		$("#editAmountType").val($(trNode).children().eq(22).text());
		$("#editRuleType").val($(trNode).children().eq(23).text());
		$("#editRuleValue").val($(trNode).children().eq(24).text());
		$("#editAddEach").val($(trNode).children().eq(25).text());
		$("#editFixedAmount").val($(trNode).children().eq(26).text());
		$("#editRateAmount").val($(trNode).children().eq(27).text());
		$("#editPriceType").val($(trNode).children().eq(28).text());
		$("#editUserType").val($(trNode).children().eq(29).text());
		$("#editUserLevels").val($(trNode).children().eq(30).text());
		$("#editOrderSources").val($(trNode).children().eq(31).text());
		$("#editBuyTicketsTypes").val($(trNode).children().eq(32).text());
		$("#editAllLineValid").val($(trNode).children().eq(33).text());
		$("#editStatus").val($(trNode).children().eq(34).text());
		$("#editFirstOrderValid").val($(trNode).children().eq(35).text());
		$("#editFirstOrderUsername").val($(trNode).children().eq(36).text());
		$("#editFirstOrderFacility").val($(trNode).children().eq(37).text());
		$("#editFirstOrderPhone").val($(trNode).children().eq(38).text());
		$("#editCreateTime").val($(trNode).children().eq(39).text());
		$("#editUpdateTime").val($(trNode).children().eq(40).text());
		
		$('#editLayer').dialog({
				title:'修改数据',
				width:600,
				height:400,
				modal:'true'
			});
	} 
	
	function add(){ 
		 $('#addLayer input').val('');
		 $('#addLayer').dialog({
			title:'新增数据',
			width:600,
			height:400,
			modal:'true'
		});
	}
  

   function getQueryParams() {  
    } 
		
    function initGrid() {
        $("#tPromotionActivityInfoList").jqGrid({
            url : "${request.contextPath}/tPromotionActivityInfo/queryTPromotionActivityInfoList",
            datatype : "json",
            mtype : "POST",
            colNames : ['id','促销活动名称','活动品类类型','优惠类型','活动来源(VST/大交通)','VST活动ID','是否排他(Y/N)','一级渠道code','一级渠道名','二级渠道code','二级渠道名','三级渠道Code','三级渠道名','活动总金额','活动剩余金额','活动开始时间','活动结束时间','备注说明','优惠类别(成人/儿童)','游玩开始时间','游玩结束时间','优惠方式(按金额/按折扣)','优惠规则类型','优惠起始值','优惠每次增加值','按金额立减值','按百分比立减值','针对价格类型(销售价/结算价)','会员类型','选中会员等级','优惠支持渠道(PC,WAP等)','购票方式(自取票/12306购票等)','所有线路城市是否优惠','促销活动状态(是否开启)','是否首单立减','首单是否判断用户名','首单判断设配号','首单判断手机号','create_time','update_time','操作'],
            colModel : [{
                name : 'id',//id
                index : 'id',
                align : 'center', 
                sortable:false
            },{
                name : 'activityName',//促销活动名称
                index : 'activityName',
                align : 'center', 
                sortable:false
            },{
                name : 'categoryType',//活动品类类型
                index : 'categoryType',
                align : 'center', 
                sortable:false
            },{
                name : 'activityType',//优惠类型
                index : 'activityType',
                align : 'center', 
                sortable:false
            },{
                name : 'activitySource',//活动来源(VST/大交通)
                index : 'activitySource',
                align : 'center', 
                sortable:false
            },{
                name : 'vstActivityId',//VST活动ID
                index : 'vstActivityId',
                align : 'center', 
                sortable:false
            },{
                name : 'exclusive',//是否排他(Y/N)
                index : 'exclusive',
                align : 'center', 
                sortable:false
            },{
                name : 'fristChannelCode',//一级渠道code
                index : 'fristChannelCode',
                align : 'center', 
                sortable:false
            },{
                name : 'fristChannelName',//一级渠道名
                index : 'fristChannelName',
                align : 'center', 
                sortable:false
            },{
                name : 'secondChanelCode',//二级渠道code
                index : 'secondChanelCode',
                align : 'center', 
                sortable:false
            },{
                name : 'secondChannelName',//二级渠道名
                index : 'secondChannelName',
                align : 'center', 
                sortable:false
            },{
                name : 'feeChanelCode',//三级渠道Code
                index : 'feeChanelCode',
                align : 'center', 
                sortable:false
            },{
                name : 'feeChanelName',//三级渠道名
                index : 'feeChanelName',
                align : 'center', 
                sortable:false
            },{
                name : 'totalAmount',//活动总金额
                index : 'totalAmount',
                align : 'center', 
                sortable:false
            },{
                name : 'balance',//活动剩余金额
                index : 'balance',
                align : 'center', 
                sortable:false
            },{
                name : 'startTime',//活动开始时间
                index : 'startTime',
                align : 'center', 
                sortable:false
            },{
                name : 'endtime',//活动结束时间
                index : 'endtime',
                align : 'center', 
                sortable:false
            },{
                name : 'descStr',//备注说明
                index : 'descStr',
                align : 'center', 
                sortable:false
            },{
                name : 'promBranchs',//优惠类别(成人/儿童)
                index : 'promBranchs',
                align : 'center', 
                sortable:false
            },{
                name : 'startVisitTime',//游玩开始时间
                index : 'startVisitTime',
                align : 'center', 
                sortable:false
            },{
                name : 'endVisitTime',//游玩结束时间
                index : 'endVisitTime',
                align : 'center', 
                sortable:false
            },{
                name : 'amountType',//优惠方式(按金额/按折扣)
                index : 'amountType',
                align : 'center', 
                sortable:false
            },{
                name : 'ruleType',//优惠规则类型
                index : 'ruleType',
                align : 'center', 
                sortable:false
            },{
                name : 'ruleValue',//优惠起始值
                index : 'ruleValue',
                align : 'center', 
                sortable:false
            },{
                name : 'addEach',//优惠每次增加值
                index : 'addEach',
                align : 'center', 
                sortable:false
            },{
                name : 'fixedAmount',//按金额立减值
                index : 'fixedAmount',
                align : 'center', 
                sortable:false
            },{
                name : 'rateAmount',//按百分比立减值
                index : 'rateAmount',
                align : 'center', 
                sortable:false
            },{
                name : 'priceType',//针对价格类型(销售价/结算价)
                index : 'priceType',
                align : 'center', 
                sortable:false
            },{
                name : 'userType',//会员类型
                index : 'userType',
                align : 'center', 
                sortable:false
            },{
                name : 'userLevels',//选中会员等级
                index : 'userLevels',
                align : 'center', 
                sortable:false
            },{
                name : 'orderSources',//优惠支持渠道(PC,WAP等)
                index : 'orderSources',
                align : 'center', 
                sortable:false
            },{
                name : 'buyTicketsTypes',//购票方式(自取票/12306购票等)
                index : 'buyTicketsTypes',
                align : 'center', 
                sortable:false
            },{
                name : 'allLineValid',//所有线路城市是否优惠
                index : 'allLineValid',
                align : 'center', 
                sortable:false
            },{
                name : 'status',//促销活动状态(是否开启)
                index : 'status',
                align : 'center', 
                sortable:false
            },{
                name : 'firstOrderValid',//是否首单立减
                index : 'firstOrderValid',
                align : 'center', 
                sortable:false
            },{
                name : 'firstOrderUsername',//首单是否判断用户名
                index : 'firstOrderUsername',
                align : 'center', 
                sortable:false
            },{
                name : 'firstOrderFacility',//首单判断设配号
                index : 'firstOrderFacility',
                align : 'center', 
                sortable:false
            },{
                name : 'firstOrderPhone',//首单判断手机号
                index : 'firstOrderPhone',
                align : 'center', 
                sortable:false
            },{
                name : 'createTime',//create_time
                index : 'createTime',
                align : 'center', 
                sortable:false
            },{
                name : 'updateTime',//update_time
                index : 'updateTime',
                align : 'center', 
                sortable:false
            },{
                name : 'operate',
                index : 'operate',
                align : 'center',
                sortable:false
            }],
            rowNum: 10,            //每页显示记录数
            autowidth: true,      //自动匹配宽度
            pager: '#pager',      //表格数据关联的分页条，html元素
            rowList:[10,20,50,500],   //分页选项，可以下拉选择每页显示记录数
            viewrecords: true,    //显示总记录数
            height:'auto',//高度，表格高度。可为数值、百分比或'auto' 
            gridview:true,        //加速显示
            viewrecords: true,    //显示总记录数
            multiselect : true,
            sortable:true,        //可以排序
            sortname: 'createTime',  //排序字段名
            sortorder: "desc",    //排序方式：倒序
            caption : '促销活动列表',
            jsonReader : {
                root : "results",                
                page : "pagination.page",       
                records : "pagination.records",  
                total:'pagination.total',        
                repeatitems : false            
            },
            onPaging : function(pgButton) {
                $("#tPromotionActivityInfoList").jqGrid('setGridParam', {
                    postData : getQueryParams()
                });
            },
            postData : getQueryParams(),
            gridComplete:function(){  
                var ids=jQuery("#tPromotionActivityInfoList").jqGrid('getDataIDs');
                for(var i=0; i<ids.length; i++){
                    var id=ids[i];
                    var rowData = $('#tPromotionActivityInfoList').jqGrid('getRowData',id);
					var operateClick = '<a href="javascript:;" style="color:blue" onclick="edit(this.parentNode.parentNode)" >修改</a> ';
                    jQuery("#tPromotionActivityInfoList").jqGrid('setRowData', id , {operate:operateClick});
                }
            }
        });
    } 
     
    </script> 
</html>
2017-08-24 14:17:53,593 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl 文件不存在!
2017-08-24 14:17:53,594 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl 文件创建成功!
2017-08-24 14:17:53,595 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl 写入成功!
2017-08-24 14:17:53,595 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl
2017-08-24 14:17:53,596 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java
2017-08-24 14:17:53,598 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.business.service.impl;

import java.util.Date;
import java.util.List;

import org.apache.commons.lang.StringUtils;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvf.common.dto.status.ResultStatus;
import com.lvmama.lvtraffic.promotion.business.service.TPromotionActivityInfoService;
import com.lvmama.lvtraffic.promotion.common.dto.enums.ValidStatus; 
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto; 
import com.lvmama.lvtraffic.promotion.persistence.mapper.TPromotionActivityInfoMapper; 

/**
 * 促销活动服务实现类.
 * @author Administrator
 *
 */
@Service
public class TPromotionActivityInfoServiceImpl implements TPromotionActivityInfoService {
	public static Logger logger = Logger.getLogger(TPromotionActivityInfoServiceImpl.class);

	@Autowired
	private TPromotionActivityInfoMapper tPromotionActivityInfoMapper; 
	 
	@Override
	public List<TPromotionActivityInfoDto> queryTPromotionActivityInfos(
			BaseQueryDto<TPromotionActivityInfoDto> q) { 
		List<TPromotionActivityInfoDto> promotionOrderInfoDtoList = tPromotionActivityInfoMapper.query(q); 
		return promotionOrderInfoDtoList;
	}

	@Override
	public int queryTPromotionActivityInfoCount(BaseQueryDto<TPromotionActivityInfoDto> q) {
		return tPromotionActivityInfoMapper.count(q); 
	}

	@Override
	public TPromotionActivityInfoDto queryTPromotionActivityInfoById(Long id) { 
		return tPromotionActivityInfoMapper.getById(id);
	}  
	
	@Override
	public BaseSingleResultDto<TPromotionActivityInfoDto> insertTPromotionActivityInfo(
			TPromotionActivityInfoDto tPromotionActivityInfoDto) {
		BaseSingleResultDto<TPromotionActivityInfoDto> result = new BaseSingleResultDto<TPromotionActivityInfoDto>();
		int  record = tPromotionActivityInfoMapper.insert(tPromotionActivityInfoDto);
		
		result.setResult(tPromotionActivityInfoDto);
		if(record == 0){ 
			result.setErrorMessage("新增促销活动失败");
			return result;
		} 
		return result;
	}

	@Override
	public BaseSingleResultDto<TPromotionActivityInfoDto> updateTPromotionActivityInfo(
			TPromotionActivityInfoDto tPromotionActivityInfoDto) {
		BaseSingleResultDto<TPromotionActivityInfoDto> result = new BaseSingleResultDto<TPromotionActivityInfoDto>();
		try{
			tPromotionActivityInfoMapper.updateById(tPromotionActivityInfoDto.getId(), tPromotionActivityInfoDto);
		}catch(Exception e){ 
			logger.error(e.getMessage(),e); 
			result.setErrorMessage("新增促销活动失败:"+e.getMessage());
			return result; 
		}  
		result.setResult(tPromotionActivityInfoDto); 
		return result;
	} 
}
2017-08-24 14:17:53,598 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java 文件不存在!
2017-08-24 14:17:53,599 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java 文件创建成功!
2017-08-24 14:17:53,600 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java 写入成功!
2017-08-24 14:17:53,600 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java
2017-08-24 14:17:53,601 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java
2017-08-24 14:17:53,604 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.business.service;

import java.io.Serializable;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import com.lvmama.lvf.common.dto.Entity;  
import com.lvmama.lvtraffic.promotion.common.dto.request.transfer.TPromotionActivityInfoSearchRequest;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoProductDto;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoVehicleDto;

/**
 * 促销活动信息
* @author Administrator
* @date 
*/
public class TPromotionActivityInfoDto  extends Entity implements Serializable {
	private static final long serialVersionUID = 1L; 
 	//id
 	private Long id;
 	
 	public Long getId(){
 		return this.id;
 	}
 	
 	public void setId(Long id){
 		this.id = id;
 	} 
 	
 	//促销活动名称
 	private String activityName;
 	
 	public String getActivityName(){
 		return this.activityName;
 	}
 	
 	public void setActivityName(String activityName){
 		this.activityName = activityName;
 	} 
 	
 	//活动品类类型
 	private String categoryType;
 	
 	public String getCategoryType(){
 		return this.categoryType;
 	}
 	
 	public void setCategoryType(String categoryType){
 		this.categoryType = categoryType;
 	} 
 	
 	//优惠类型
 	private String activityType;
 	
 	public String getActivityType(){
 		return this.activityType;
 	}
 	
 	public void setActivityType(String activityType){
 		this.activityType = activityType;
 	} 
 	
 	//活动来源(VST/大交通)
 	private String activitySource;
 	
 	public String getActivitySource(){
 		return this.activitySource;
 	}
 	
 	public void setActivitySource(String activitySource){
 		this.activitySource = activitySource;
 	} 
 	
 	//VST活动ID
 	private String vstActivityId;
 	
 	public String getVstActivityId(){
 		return this.vstActivityId;
 	}
 	
 	public void setVstActivityId(String vstActivityId){
 		this.vstActivityId = vstActivityId;
 	} 
 	
 	//是否排他(Y/N)
 	private String exclusive;
 	
 	public String getExclusive(){
 		return this.exclusive;
 	}
 	
 	public void setExclusive(String exclusive){
 		this.exclusive = exclusive;
 	} 
 	
 	//一级渠道code
 	private String fristChannelCode;
 	
 	public String getFristChannelCode(){
 		return this.fristChannelCode;
 	}
 	
 	public void setFristChannelCode(String fristChannelCode){
 		this.fristChannelCode = fristChannelCode;
 	} 
 	
 	//一级渠道名
 	private String fristChannelName;
 	
 	public String getFristChannelName(){
 		return this.fristChannelName;
 	}
 	
 	public void setFristChannelName(String fristChannelName){
 		this.fristChannelName = fristChannelName;
 	} 
 	
 	//二级渠道code
 	private String secondChanelCode;
 	
 	public String getSecondChanelCode(){
 		return this.secondChanelCode;
 	}
 	
 	public void setSecondChanelCode(String secondChanelCode){
 		this.secondChanelCode = secondChanelCode;
 	} 
 	
 	//二级渠道名
 	private String secondChannelName;
 	
 	public String getSecondChannelName(){
 		return this.secondChannelName;
 	}
 	
 	public void setSecondChannelName(String secondChannelName){
 		this.secondChannelName = secondChannelName;
 	} 
 	
 	//三级渠道Code
 	private String feeChanelCode;
 	
 	public String getFeeChanelCode(){
 		return this.feeChanelCode;
 	}
 	
 	public void setFeeChanelCode(String feeChanelCode){
 		this.feeChanelCode = feeChanelCode;
 	} 
 	
 	//三级渠道名
 	private String feeChanelName;
 	
 	public String getFeeChanelName(){
 		return this.feeChanelName;
 	}
 	
 	public void setFeeChanelName(String feeChanelName){
 		this.feeChanelName = feeChanelName;
 	} 
 	
 	//活动总金额
 	private String totalAmount;
 	
 	public String getTotalAmount(){
 		return this.totalAmount;
 	}
 	
 	public void setTotalAmount(String totalAmount){
 		this.totalAmount = totalAmount;
 	} 
 	
 	//活动剩余金额
 	private String balance;
 	
 	public String getBalance(){
 		return this.balance;
 	}
 	
 	public void setBalance(String balance){
 		this.balance = balance;
 	} 
 	
 	//活动开始时间
 	private Date startTime;
 	
 	public Date getStartTime(){
 		return this.startTime;
 	}
 	
 	public void setStartTime(Date startTime){
 		this.startTime = startTime;
 	} 
 	
 	//活动结束时间
 	private Date endtime;
 	
 	public Date getEndtime(){
 		return this.endtime;
 	}
 	
 	public void setEndtime(Date endtime){
 		this.endtime = endtime;
 	} 
 	
 	//备注说明
 	private String descStr;
 	
 	public String getDescStr(){
 		return this.descStr;
 	}
 	
 	public void setDescStr(String descStr){
 		this.descStr = descStr;
 	} 
 	
 	//优惠类别(成人/儿童)
 	private String promBranchs;
 	
 	public String getPromBranchs(){
 		return this.promBranchs;
 	}
 	
 	public void setPromBranchs(String promBranchs){
 		this.promBranchs = promBranchs;
 	} 
 	
 	//游玩开始时间
 	private Date startVisitTime;
 	
 	public Date getStartVisitTime(){
 		return this.startVisitTime;
 	}
 	
 	public void setStartVisitTime(Date startVisitTime){
 		this.startVisitTime = startVisitTime;
 	} 
 	
 	//游玩结束时间
 	private Date endVisitTime;
 	
 	public Date getEndVisitTime(){
 		return this.endVisitTime;
 	}
 	
 	public void setEndVisitTime(Date endVisitTime){
 		this.endVisitTime = endVisitTime;
 	} 
 	
 	//优惠方式(按金额/按折扣)
 	private String amountType;
 	
 	public String getAmountType(){
 		return this.amountType;
 	}
 	
 	public void setAmountType(String amountType){
 		this.amountType = amountType;
 	} 
 	
 	//优惠规则类型
 	private String ruleType;
 	
 	public String getRuleType(){
 		return this.ruleType;
 	}
 	
 	public void setRuleType(String ruleType){
 		this.ruleType = ruleType;
 	} 
 	
 	//优惠起始值
 	private String ruleValue;
 	
 	public String getRuleValue(){
 		return this.ruleValue;
 	}
 	
 	public void setRuleValue(String ruleValue){
 		this.ruleValue = ruleValue;
 	} 
 	
 	//优惠每次增加值
 	private String addEach;
 	
 	public String getAddEach(){
 		return this.addEach;
 	}
 	
 	public void setAddEach(String addEach){
 		this.addEach = addEach;
 	} 
 	
 	//按金额立减值
 	private String fixedAmount;
 	
 	public String getFixedAmount(){
 		return this.fixedAmount;
 	}
 	
 	public void setFixedAmount(String fixedAmount){
 		this.fixedAmount = fixedAmount;
 	} 
 	
 	//按百分比立减值
 	private String rateAmount;
 	
 	public String getRateAmount(){
 		return this.rateAmount;
 	}
 	
 	public void setRateAmount(String rateAmount){
 		this.rateAmount = rateAmount;
 	} 
 	
 	//针对价格类型(销售价/结算价)
 	private String priceType;
 	
 	public String getPriceType(){
 		return this.priceType;
 	}
 	
 	public void setPriceType(String priceType){
 		this.priceType = priceType;
 	} 
 	
 	//会员类型
 	private String userType;
 	
 	public String getUserType(){
 		return this.userType;
 	}
 	
 	public void setUserType(String userType){
 		this.userType = userType;
 	} 
 	
 	//选中会员等级
 	private String userLevels;
 	
 	public String getUserLevels(){
 		return this.userLevels;
 	}
 	
 	public void setUserLevels(String userLevels){
 		this.userLevels = userLevels;
 	} 
 	
 	//优惠支持渠道(PC,WAP等)
 	private String orderSources;
 	
 	public String getOrderSources(){
 		return this.orderSources;
 	}
 	
 	public void setOrderSources(String orderSources){
 		this.orderSources = orderSources;
 	} 
 	
 	//购票方式(自取票/12306购票等)
 	private String buyTicketsTypes;
 	
 	public String getBuyTicketsTypes(){
 		return this.buyTicketsTypes;
 	}
 	
 	public void setBuyTicketsTypes(String buyTicketsTypes){
 		this.buyTicketsTypes = buyTicketsTypes;
 	} 
 	
 	//所有线路城市是否优惠
 	private String allLineValid;
 	
 	public String getAllLineValid(){
 		return this.allLineValid;
 	}
 	
 	public void setAllLineValid(String allLineValid){
 		this.allLineValid = allLineValid;
 	} 
 	
 	//促销活动状态(是否开启)
 	private String status;
 	
 	public String getStatus(){
 		return this.status;
 	}
 	
 	public void setStatus(String status){
 		this.status = status;
 	} 
 	
 	//是否首单立减
 	private String firstOrderValid;
 	
 	public String getFirstOrderValid(){
 		return this.firstOrderValid;
 	}
 	
 	public void setFirstOrderValid(String firstOrderValid){
 		this.firstOrderValid = firstOrderValid;
 	} 
 	
 	//首单是否判断用户名
 	private String firstOrderUsername;
 	
 	public String getFirstOrderUsername(){
 		return this.firstOrderUsername;
 	}
 	
 	public void setFirstOrderUsername(String firstOrderUsername){
 		this.firstOrderUsername = firstOrderUsername;
 	} 
 	
 	//首单判断设配号
 	private String firstOrderFacility;
 	
 	public String getFirstOrderFacility(){
 		return this.firstOrderFacility;
 	}
 	
 	public void setFirstOrderFacility(String firstOrderFacility){
 		this.firstOrderFacility = firstOrderFacility;
 	} 
 	
 	//首单判断手机号
 	private String firstOrderPhone;
 	
 	public String getFirstOrderPhone(){
 		return this.firstOrderPhone;
 	}
 	
 	public void setFirstOrderPhone(String firstOrderPhone){
 		this.firstOrderPhone = firstOrderPhone;
 	} 
 	
 	//create_time
 	private Date createTime;
 	
 	public Date getCreateTime(){
 		return this.createTime;
 	}
 	
 	public void setCreateTime(Date createTime){
 		this.createTime = createTime;
 	} 
 	
 	//update_time
 	private Date updateTime;
 	
 	public Date getUpdateTime(){
 		return this.updateTime;
 	}
 	
 	public void setUpdateTime(Date updateTime){
 		this.updateTime = updateTime;
 	} 
 	
}
2017-08-24 14:17:53,605 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java 文件不存在!
2017-08-24 14:17:53,606 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java 文件创建成功!
2017-08-24 14:17:53,607 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java 写入成功!
2017-08-24 14:17:53,608 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java
2017-08-24 14:17:53,751 [Thread-2] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 清除SpringContextHolder中的ApplicationContext:org.springframework.context.support.GenericApplicationContext@6c9c035a: startup date [Thu Aug 24 14:17:44 CST 2017]; root of context hierarchy
2017-08-24 14:34:43,590 [main] WARN  [org.springframework.web.context.support.XmlWebApplicationContext] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
2017-08-24 14:34:43,594 [main] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 娓SpringContextHolder涓ApplicationContext:Root WebApplicationContext: startup date [Thu Aug 24 14:34:38 CST 2017]; root of context hierarchy
2017-08-24 14:34:43,667 [main] ERROR [org.springframework.web.context.ContextLoader] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:359)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:108)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1475)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1220)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:736)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:762)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)
	at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:434)
	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)
	at com.thinkgem.jeesite.modules.sys.listener.WebContextListener.initWebApplicationContext(WebContextListener.java:16)
	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)
	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:746)
	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:238)
	at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1240)
	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:689)
	at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:482)
	at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
	at org.eclipse.jetty.server.Server.doStart(Server.java:281)
	at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:520)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:365)
	at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:521)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1572)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:351)
	... 62 more
Caused by: org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:522)
	at org.mybatis.spring.SqlSessionFactoryBean.afterPropertiesSet(SqlSessionFactoryBean.java:374)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1631)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1568)
	... 69 more
Caused by: org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:145)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:103)
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:519)
	... 72 more
Caused by: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:103)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:313)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:297)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElements(XMLMapperBuilder.java:289)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:140)
	... 74 more
Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:117)
	at org.apache.ibatis.builder.BaseBuilder.resolveAlias(BaseBuilder.java:130)
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:101)
	... 78 more
Caused by: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:190)
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:89)
	at org.apache.ibatis.io.Resources.classForName(Resources.java:256)
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:113)
	... 80 more
2017-08-24 14:35:54,740 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.get] - ==>  Preparing: SELECT a.*, a.gen_table_id AS "genTable.id" FROM gen_scheme a WHERE a.id = ? 
2017-08-24 14:35:54,794 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.get] - ==> Parameters: 3626584e6d35431c9ef8f58a8bebda4a(String)
2017-08-24 14:35:54,825 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.get] - <==      Total: 1
2017-08-24 14:35:54,863 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.update] - ==>  Preparing: UPDATE gen_scheme SET name = ?, category = ?, package_name = ?, module_name = ?, sub_module_name = ?, function_name = ?, function_name_simple = ?, function_author = ?, gen_table_id = ?, update_by = ?, update_date = ?, remarks = ? WHERE id = ? 
2017-08-24 14:35:54,866 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.update] - ==> Parameters: 促销活动(String), curd_lvmama(String), com.lvmama.lvtraffic(String), promotion(String), activity(String), 促销活动(String), 促销活动(String), lsq(String), b7c541a41c4f437394a70b358dc72334(String), null, 2017-08-24 14:35:54.863(Timestamp), (String), 3626584e6d35431c9ef8f58a8bebda4a(String)
2017-08-24 14:35:54,867 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenSchemeDao.update] - <==    Updates: 1
2017-08-24 14:35:54,867 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableDao.get] - ==>  Preparing: SELECT a.* FROM gen_table a WHERE a.id = ? 
2017-08-24 14:35:54,868 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableDao.get] - ==> Parameters: b7c541a41c4f437394a70b358dc72334(String)
2017-08-24 14:35:54,870 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableDao.get] - <==      Total: 1
2017-08-24 14:35:54,962 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableColumnDao.findList] - ==>  Preparing: SELECT a.*, b.id AS "genTable.id", b.name AS "genTable.name", b.comments AS "genTable.comments", b.class_name AS "genTable.className", b.parent_table AS "genTable.parentTable", b.parent_table_fk AS "genTable.parentTableFk" FROM gen_table_column a JOIN gen_table b ON b.id = a.gen_table_id WHERE a.del_flag = ? AND a.gen_table_id = ? ORDER BY a.sort ASC 
2017-08-24 14:35:54,963 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableColumnDao.findList] - ==> Parameters: 0(String), b7c541a41c4f437394a70b358dc72334(String)
2017-08-24 14:35:55,009 [main] DEBUG [com.thinkgem.jeesite.modules.gen.dao.GenTableColumnDao.findList] - <==      Total: 40
2017-08-24 14:35:55,460 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java
2017-08-24 14:35:55,467 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.common.client;

import org.codehaus.jackson.type.TypeReference;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

import com.lvmama.lvf.common.client.RestClient;
import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvf.common.exception.ExceptionCode;
import com.lvmama.lvf.common.exception.ExceptionWrapper;
import com.lvmama.lvf.common.utils.JSONMapper;
import com.lvmama.lvtraffic.promotion.common.client.path.TPromotionActivityInfoBusinessClientPath;
import com.lvmama.lvtraffic.promotion.common.dto.enums.ValidStatus;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto; 

@Component
public class TPromotionActivityInfoClient {

	private static final Logger logger = LoggerFactory.getLogger(TPromotionActivityInfoClient.class);

	@Value("traffic-promotion-service.baseurl")
	private String baseUrl;

	@Autowired
	private RestClient restClient;

	/**
	 * 根据id获得促销活动
	* @param  
	* @return BaseResponseDto<Object>
	* @throws
	 */
	public TPromotionActivityInfoDto queryTPromotionActivityInfoById(Long cityId){ 
		TPromotionActivityInfoBusinessClientPath command = TPromotionActivityInfoBusinessClientPath.QUERY_TPROMOTIONACTIVITYINFO_BY_ID;
		String url = command.url(baseUrl);
		try { 
			String resultStr = restClient.post(url,  String.class, cityId);			
			return JSONMapper.getInstance().readValue(resultStr, new TypeReference<TPromotionActivityInfoDto>() { });
		} catch (ExceptionWrapper ew) {
			ew.setErrMessage(ExceptionCode.REMOTE_INVOKE.errMessage(command.cnName, url)+ew.getErrMessage());
			logger.error(ew.getErrMessage(),ew);
			throw ew;
		} catch (Exception e) {
			e.printStackTrace();
		} 
		return null;
	}
	
	/**
	 * 获得促销活动列表 
	 * @param
	 * @return BaseResponseDto<Object>
	 * @throws
	 */
	public BaseResultDto<TPromotionActivityInfoDto> queryTPromotionActivityInfoList(BaseQueryDto<TPromotionActivityInfoDto> query) { 
		TPromotionActivityInfoBusinessClientPath command = TPromotionActivityInfoBusinessClientPath.QUERY_TPROMOTIONACTIVITYINFO_LIST;
		String url = command.url(baseUrl);
		try {
			String resultStr = restClient.post(url, String.class, query);
			return JSONMapper.getInstance().readValue(resultStr,
					new TypeReference<BaseResultDto<TPromotionActivityInfoDto>>() {
					});
		} catch (ExceptionWrapper ew) {
			ew.setErrMessage(ExceptionCode.REMOTE_INVOKE.errMessage(
					command.cnName, url) + ew.getErrMessage());
			logger.error(ew.getErrMessage(), ew);
			throw ew;
		} catch (Exception e) {
			e.printStackTrace();
		}
		return null;
	} 
	
	/**
	 * 新增促销活动.
	 * @param promotionProductInfo
	 * @return
	 */
	public BaseSingleResultDto<TPromotionActivityInfoDto> insertTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto){ 
		TPromotionActivityInfoBusinessClientPath command = TPromotionActivityInfoBusinessClientPath.INSERT_TPROMOTIONACTIVITYINFO;
		String url = command.url(baseUrl);
		try {
			String resultStr = restClient.post(url, String.class, tPromotionActivityInfoDto);
			return JSONMapper.getInstance().readValue(resultStr, new TypeReference<BaseSingleResultDto<TPromotionActivityInfoDto>>(){});
		} catch (ExceptionWrapper ew) {
			ew.setErrMessage(ExceptionCode.REMOTE_INVOKE.errMessage(command.cnName, url)+ew.getErrMessage());
			logger.error(ew.getErrMessage(),ew);
			throw ew;
		} catch (Exception e) {
			e.printStackTrace();
		}
		return null;
	}
	 
	 /**
	 * 修改促销活动
	 * @param tPromotionActivityInfoDto
	 * @return
	 */
	 public BaseSingleResultDto<TPromotionActivityInfoDto> editTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto) { 
		TPromotionActivityInfoBusinessClientPath command = TPromotionActivityInfoBusinessClientPath.EDIT_TPROMOTIONACTIVITYINFO;
		String url = command.url(baseUrl);
		try {
			String resultStr = restClient.post(url, String.class,tPromotionActivityInfoDto);
			return JSONMapper.getInstance().readValue(
							resultStr,new TypeReference<BaseSingleResultDto<TPromotionActivityInfoDto>>() {
							});
		} catch (ExceptionWrapper ew) {
			ew.setErrMessage(ExceptionCode.REMOTE_INVOKE.errMessage(
					command.cnName, url) + ew.getErrMessage());
			logger.error(ew.getErrMessage(), ew);
			throw ew;
		} catch (Exception e) {
			e.printStackTrace();
		}
		return null;
	}
}
2017-08-24 14:35:55,483 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java 文件不存在!
2017-08-24 14:35:55,484 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java 文件创建成功!
2017-08-24 14:35:55,486 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java 写入成功!
2017-08-24 14:35:55,486 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoClient.java
2017-08-24 14:35:55,487 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java
2017-08-24 14:35:55,489 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.common.client.path;

import com.lvmama.lvf.common.utils.CustomizedPropertyPlaceholderConfigurer;

/**
 * 促销活动相关clientpath枚举.
 * 
 * @author Administrator
 * 
 */
public enum TPromotionActivityInfoBusinessClientPath {
	QUERY_TPROMOTIONACTIVITYINFO_LIST(Path.QUERY_TPROMOTIONACTIVITYINFO_LIST, "查询促销活动列表"),
	QUERY_TPROMOTIONACTIVITYINFO_BY_ID(Path.QUERY_TPROMOTIONACTIVITYINFO_BY_ID, "根据id查询促销活动列表"),
	INSERT_TPROMOTIONACTIVITYINFO(Path.INSERT_TPROMOTIONACTIVITYINFO, "新增促销活动"), 
	EDIT_TPROMOTIONACTIVITYINFO(Path.EDIT_TPROMOTIONACTIVITYINFO, "编辑促销活动") ;

	public String path;
	public String cnName;
	
	private TPromotionActivityInfoBusinessClientPath(String path, String cnName) {
		this.path = path;
		this.cnName = cnName;
	}
	
	public String getPath() {
		return path;
	}
	
	public String getCnName() {
		return cnName;
	}
	
	public String url(String baseUrl){
		if(!baseUrl.contains("http")){
			baseUrl = CustomizedPropertyPlaceholderConfigurer.getContextProperty(baseUrl);
		}
		if(baseUrl.endsWith("/")){
			return baseUrl+this.path;
		}
		return baseUrl+"/" +this.path;
	}
	
	public String url(String baseUrl,Object... args){
		String url = url(baseUrl);
		String pat="\\{\\w*\\}";
		return String.format(url.replaceAll(pat,"%s"),args);
	}
	
	public static class Path {

		public final static String basePath = "promotiontransfer/business";

		public final static String QUERY_TPROMOTIONACTIVITYINFO_LIST = basePath + "/queryTPromotionActivityInfoList";
		
		public final static String QUERY_TPROMOTIONACTIVITYINFO_BY_ID = basePath + "/queryTPromotionActivityInfoById";  
		
		public final static String INSERT_TPROMOTIONACTIVITYINFO = basePath + "/insertTPromotionActivityInfo"; 
		
		public final static String EDIT_TPROMOTIONACTIVITYINFO = basePath + "/updateTPromotionActivityInfo"; 
	}
}
2017-08-24 14:35:55,490 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java 文件不存在!
2017-08-24 14:35:55,491 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java 文件创建成功!
2017-08-24 14:35:55,492 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java 写入成功!
2017-08-24 14:35:55,492 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoBusinessClientPath.java
2017-08-24 14:35:55,495 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java
2017-08-24 14:35:55,499 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.offline.web.controller.vas;

import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.ui.Model;

import com.lvmama.lvf.common.dto.BaseResponseDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvtraffic.offline.web.form.vas.TPromotionActivityInfoForm;

public interface TPromotionActivityInfoController   {
	/**
	 * 进入促销活动查询界面
	 * 
	 * @param model
	 * @return String
	 */
	public String toTPromotionActivityInfoListQuery(Model model);  
	
	/**
	 * 导出促销活动列表
	 * @param i
	 * @param response
	 */
	public void exportCsv(TPromotionActivityInfoForm input, HttpServletResponse response);   

	/**
	 * 进入新增促销活动
	 * @param model
	 * @return
	 */
	public String toAddTPromotionActivityInfo(Model model);
	
	/**
	 * 新增促销活动
	 * @param model
	 * @param queryForm
	 * @param request
	 * @param response
	 * @return
	 */
	public Map<String,Object> insertTPromotionActivityInfo(Model model,TPromotionActivityInfoForm queryForm,HttpServletRequest request,HttpServletResponse response);
	
	/**
	 * 进入编辑促销活动界面
	 * @param model
	 * @param cityId
	 * @return
	 */
	public String toEditTPromotionActivityInfo(Model model,Long cityId);
	
	/**
	 * 编辑促销活动
	 * @param model
	 * @param editForm
	 * @param request
	 * @param response
	 * @return
	 */
	public Map<String,Object> editTPromotionActivityInfo(Model model,TPromotionActivityInfoForm editForm,HttpServletRequest request,HttpServletResponse response);
	
	/**
	 * 查询所有促销活动
	 * @param model
	 * @param queryForm
	 * @return
	 */
	public BaseResponseDto<TPromotionActivityInfoForm> queryVasCityList(Model model,TPromotionActivityInfoForm queryForm);
	
}
2017-08-24 14:35:55,500 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java 文件不存在!
2017-08-24 14:35:55,503 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java 文件创建成功!
2017-08-24 14:35:55,504 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java 写入成功!
2017-08-24 14:35:55,505 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoController.java
2017-08-24 14:35:55,506 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java
2017-08-24 14:35:55,512 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.offline.web.controller.vas.impl;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.beanutils.BeanUtils;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import com.lvmama.comm.pet.po.perm.PermUser;
import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResponseDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvf.common.utils.DateUtils;
import com.lvmama.lvtraffic.offline.web.controller.vas.TPromotionActivityInfoController;
import com.lvmama.lvtraffic.offline.web.form.vas.TPromotionActivityInfoForm;
import com.lvmama.lvtraffic.offline.web.utils.servlet.Constant;
import com.lvmama.lvtraffic.offline.web.utils.servlet.ServletUtil;
import com.lvmama.lvtraffic.vas.common.client.VasLogClient;
import com.lvmama.lvtraffic.vas.common.client.VasTransferClient;
import com.lvmama.lvtraffic.vas.common.dto.enums.OperName;
import com.lvmama.lvtraffic.vas.common.dto.enums.OperSouce;
import com.lvmama.lvtraffic.vas.common.dto.enums.OperType;
import com.lvmama.lvtraffic.vas.common.dto.enums.ValidStatus;
import com.lvmama.lvtraffic.vas.common.dto.log.LogOperateInfoDto;
import com.lvmama.lvtraffic.vas.common.dto.transfer.TPromotionActivityInfoDto;

@Controller
@RequestMapping("tPromotionActivityInfo")
public class TPromotionActivityInfoControllerImpl implements TPromotionActivityInfoController {
	private static final Logger logger = Logger.getLogger(TPromotionActivityInfoControllerImpl.class);
	@Autowired
	private VasTransferClient vasTransferClient; 

	@Autowired
	private VasLogClient vasLogClient;
	
	@Override
	@RequestMapping("toTPromotionActivityInfoListQuery")
	public String toTPromotionActivityInfoListQuery(Model model) {  
		model.addAttribute("validStatus", ValidStatus.values());
		return "vas/vas_tPromotionActivityInfo_list";
	} 
	
	@Override
	public void exportCsv(TPromotionActivityInfoForm input, HttpServletResponse response) {
		// TODO Auto-generated method stub
		
	}
 
	@Override
	@ResponseBody
	@RequestMapping("queryTPromotionActivityInfoList")
	public BaseResponseDto<TPromotionActivityInfoForm> queryVasCityList(Model model,
			TPromotionActivityInfoForm queryForm) {   
		BaseQueryDto<TPromotionActivityInfoDto> query = new BaseQueryDto<TPromotionActivityInfoDto>(queryForm.getPagination(),queryForm);
		BaseResultDto<TPromotionActivityInfoDto> baseResult = vasTransferClient.queryTPromotionActivityInfoList(query);
		List<TPromotionActivityInfoDto> results = baseResult.getResults(); 
		
		List<TPromotionActivityInfoForm> forms = new ArrayList<TPromotionActivityInfoForm>();
		try {
			for (TPromotionActivityInfoDto vpt : results) {
				TPromotionActivityInfoForm retForm = new TPromotionActivityInfoForm();
				BeanUtils.copyProperties(retForm,vpt);
				retForm.setCreateTimeStr(getTimeStr(vpt.getCreateTime()));
				retForm.setUpdateTimeStr(getTimeStr(vpt.getUpdateTime())); 
				forms.add(retForm);
			}
		} catch (Exception e) {
			e.printStackTrace();
			logger.error("出现异常："+e.getMessage(),e);
		}
		BaseResponseDto<TPromotionActivityInfoForm> response = new BaseResponseDto<TPromotionActivityInfoForm>();
		response.setResults(forms); 
		response.setPagination(baseResult.getPagination());
		return response;
	}

	public String getTimeStr(Date d) {
		if(d!=null)
			return DateUtils.formatCnHmDate(d);
		return "";
	}

	@Override
	@RequestMapping("toAddTPromotionActivityInfo")
	public String toAddTPromotionActivityInfo(Model model) {
		return "vas/add_tPromotionActivityInfo";
	}

	@Override
	@RequestMapping("insertTPromotionActivityInfo")
	@ResponseBody
	public Map<String, Object> insertTPromotionActivityInfo(Model model,
			TPromotionActivityInfoForm queryForm, HttpServletRequest request,
			HttpServletResponse response) {
		TPromotionActivityInfoDto TPromotionActivityInfoDto = queryForm.getTPromotionActivityInfoDto();
		//TPromotionActivityInfoDto.setCityStatus(ValidStatus.VALID);//默认有效
		BaseSingleResultDto<TPromotionActivityInfoDto> result =  vasTransferClient.insertTPromotionActivityInfo(TPromotionActivityInfoDto);
		Map<String, Object> retMap = new HashMap<String, Object>();
		retMap.put("flag", result.getStatus().name());
		
		Long id = result.getResult().getId();
		
		 //添加操作日志
		LogOperateInfoDto logOperateInfo = new LogOperateInfoDto();
		logOperateInfo.setOperSouce(OperSouce.VAS_TRANSFER_CITY);
		logOperateInfo.setSourceId(id);
		logOperateInfo.setOperType(OperType.VAS_TRANSFER_CITY_ADD);
		logOperateInfo.setOperDesc("新增促销活动");
		logOperateInfo.setOperTime(new Date());
		PermUser user = (PermUser)ServletUtil.getSession(request, response, Constant.SESSION_BACK_USER);
		if(null!=user){
			logOperateInfo.setOperAccount(user.getUserName());	
			logOperateInfo.setOperName(OperName.TRANSFER);
		}
		vasLogClient.insertVasOpLog(logOperateInfo);
		return retMap;
	}

	@Override
	@RequestMapping(value="toEditTPromotionActivityInfo/{cityId}",method=RequestMethod.GET)
	public String toEditTPromotionActivityInfo(Model model,@PathVariable Long cityId) {
		TPromotionActivityInfoDto transferCity = vasTransferClient.queryTPromotionActivityInfoById(cityId);
		model.addAttribute("tPromotionActivityInfo", transferCity); 
		model.addAttribute("validStatus", ValidStatus.values());
		return "vas/edit_tPromotionActivityInfo";
	}

	@Override
	@RequestMapping("editTPromotionActivityInfo")
	@ResponseBody
	public Map<String, Object> editTPromotionActivityInfo(Model model,
			TPromotionActivityInfoForm TPromotionActivityInfoForm,
			HttpServletRequest request, HttpServletResponse response) {
		String oldCityCode = (String)request.getAttribute("oldCityCode");
		Map<String, Object> retMap = new HashMap<String, Object>();
		TPromotionActivityInfoDto TPromotionActivityInfoDto = TPromotionActivityInfoForm.getTPromotionActivityInfoDto();
		BaseSingleResultDto<TPromotionActivityInfoDto> result = vasTransferClient.editTPromotionActivityInfo(TPromotionActivityInfoDto);
		retMap.put("flag", result.getStatus().name());

		// 添加操作日志
		LogOperateInfoDto logOperateInfo = new LogOperateInfoDto();
		logOperateInfo.setOperSouce(OperSouce.VAS_TRANSFER_CITY);
		logOperateInfo.setSourceId(TPromotionActivityInfoDto.getId());
		logOperateInfo.setOperType(OperType.VAS_TRANSFER_CITY_UPDATE);
		logOperateInfo.setOperDesc("编辑促销活动");
		logOperateInfo.setOperTime(new Date());
		PermUser user = (PermUser) ServletUtil.getSession(request, response,
				Constant.SESSION_BACK_USER);
		if (null != user) {
			logOperateInfo.setOperAccount(user.getUserName());
			logOperateInfo.setOperName(OperName.TRANSFER);
		}
		vasLogClient.insertVasOpLog(logOperateInfo);

		return retMap;
	}
}
2017-08-24 14:35:55,513 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java 文件不存在!
2017-08-24 14:35:55,514 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java 文件创建成功!
2017-08-24 14:35:55,515 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java 写入成功!
2017-08-24 14:35:55,515 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoControllerImpl.java
2017-08-24 14:35:55,516 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java
2017-08-24 14:35:55,517 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.offline.web.form.promotion;

import java.io.Serializable;

import com.lvmama.lvf.common.dto.Pagination;
import com.lvmama.lvf.common.form.Form;
import com.lvmama.lvtraffic.promotion.common.dto.enums.ValidStatus;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto;

public class TPromotionActivityInfoForm extends TPromotionActivityInfoDto implements Form,Serializable {
	private static final long serialVersionUID = 1L;

	private Pagination pagination = new Pagination();

	private String createTimeStr;
	private String updateTimeStr;   
	private TPromotionActivityInfoDto tPromotionActivityInfoDto = new TPromotionActivityInfoDto();

	public Pagination getPagination() {
		return pagination;
	}

	public void setPagination(Pagination pagination) {
		this.pagination = pagination;
	}

	public TPromotionActivityInfoDto getTPromotionActivityInfoDto() {
		return tPromotionActivityInfoDto;
	}

	public void setTPromotionActivityInfoDto(TPromotionActivityInfoDto tPromotionActivityInfoDto) {
		this.tPromotionActivityInfoDto = tPromotionActivityInfoDto;
	}

	public void countRecords(int records) {
		pagination.countRecords(records);
	}

	public int getEndRow() {
		return pagination.getEndRow();
	}

	public int getPage() {
		return pagination.getPage();
	}

	public int getRecords() {
		return pagination.getRecords();
	}

	public int getRows() {
		return pagination.getRows();
	}

	public String getSidx() {
		return pagination.getSidx();
	}

	public String getSord() {
		return pagination.getSord();
	}

	public int getStartRow() {
		return pagination.getStartRow();
	}

	public int getTotal() {
		return pagination.getTotal();
	}

	public boolean isSearch() {
		return pagination.isSearch();
	}

	public void setPage(int page) {
		pagination.setPage(page);
	}

	public void setRecords(int records) {
		pagination.setRecords(records);
	}

	public void setRows(int rows) {
		pagination.setRows(rows);
	}

	public void setRowsByCustom(int customRows) {
		pagination.setRowsByCustom(customRows);
	}

	public void setSearch(boolean search) {
		pagination.setSearch(search);
	}

	public void setSidx(String sidx) {
		pagination.setSidx(sidx);
	}

	public void setSord(String sord) {
		pagination.setSord(sord);
	}

	public void setTotal(int total) {
		pagination.setTotal(total);
	} 
	
	public void setCreateTimeStr(String createTimeStr) {
		this.createTimeStr = createTimeStr;
	}

	public void setUpdateTimeStr(String updateTimeStr) {
		this.updateTimeStr = updateTimeStr;
	} 
 
	public String getCreateTimeStr() {
		return createTimeStr;
	}

	public String getUpdateTimeStr() {
		return updateTimeStr;
	} 
}
2017-08-24 14:35:55,517 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java 文件不存在!
2017-08-24 14:35:55,518 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java 文件创建成功!
2017-08-24 14:35:55,519 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java 写入成功!
2017-08-24 14:35:55,519 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoForm.java
2017-08-24 14:35:55,520 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java
2017-08-24 14:35:55,521 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.persistence.mapper;

import org.apache.ibatis.annotations.Param;

import com.lvmama.lvf.common.domain.DomainEntityBaseMapper;
import com.lvmama.lvf.common.domain.DomainEntityByNoMapper;
import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.Dto;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto;
import java.util.List;
public interface TPromotionActivityInfoMapper	extends
		DomainEntityBaseMapper<TPromotionActivityInfoDto, BaseQueryDto<? extends Dto>>,
		DomainEntityByNoMapper<TPromotionActivityInfoDto> {
	 /**
	 * 不分页查询
	 * @param q
	 * @return
	 */
	public List<TPromotionActivityInfoDto> queryNoPage(BaseQueryDto<TPromotionActivityInfoDto> q);
}
2017-08-24 14:35:55,522 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java 文件不存在!
2017-08-24 14:35:55,522 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java 文件创建成功!
2017-08-24 14:35:55,524 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java 写入成功!
2017-08-24 14:35:55,524 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.java
2017-08-24 14:35:55,525 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml
2017-08-24 14:35:55,624 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
<?xml version="1.0" encoding="UTF-8" ?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lvmama.lvtraffic.promotion.persistence.mapper.TPromotionActivityInfoMapper"> 
     <resultMap id="BaseResultMap" type="com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto" >  
		<result column="id" property="id" jdbcType="INTEGER" />
		<result column="activity_name" property="activityName" jdbcType="VARCHAR" />
		<result column="category_type" property="categoryType" jdbcType="VARCHAR" />
		<result column="activity_type" property="activityType" jdbcType="VARCHAR" />
		<result column="activity_source" property="activitySource" jdbcType="VARCHAR" />
		<result column="vst_activity_id" property="vstActivityId" jdbcType="VARCHAR" />
		<result column="exclusive" property="exclusive" jdbcType="VARCHAR" />
		<result column="frist_channel_code" property="fristChannelCode" jdbcType="VARCHAR" />
		<result column="frist_channel_name" property="fristChannelName" jdbcType="VARCHAR" />
		<result column="second_chanel_code" property="secondChanelCode" jdbcType="VARCHAR" />
		<result column="second_channel_name" property="secondChannelName" jdbcType="VARCHAR" />
		<result column="fee_chanel_code" property="feeChanelCode" jdbcType="VARCHAR" />
		<result column="fee_chanel_name" property="feeChanelName" jdbcType="VARCHAR" />
		<result column="total_amount" property="totalAmount" jdbcType="VARCHAR" />
		<result column="balance" property="balance" jdbcType="VARCHAR" />
		<result column="start_time" property="startTime" jdbcType="TIMESTAMP" />
		<result column="endtime" property="endtime" jdbcType="TIMESTAMP" />
		<result column="desc_str" property="descStr" jdbcType="VARCHAR" />
		<result column="prom_branchs" property="promBranchs" jdbcType="VARCHAR" />
		<result column="start_visit_time" property="startVisitTime" jdbcType="TIMESTAMP" />
		<result column="end_visit_time" property="endVisitTime" jdbcType="TIMESTAMP" />
		<result column="amount_type" property="amountType" jdbcType="VARCHAR" />
		<result column="rule_type" property="ruleType" jdbcType="VARCHAR" />
		<result column="rule_value" property="ruleValue" jdbcType="VARCHAR" />
		<result column="add_each" property="addEach" jdbcType="VARCHAR" />
		<result column="fixed_amount" property="fixedAmount" jdbcType="VARCHAR" />
		<result column="rate_amount" property="rateAmount" jdbcType="VARCHAR" />
		<result column="price_type" property="priceType" jdbcType="VARCHAR" />
		<result column="user_type" property="userType" jdbcType="VARCHAR" />
		<result column="user_levels" property="userLevels" jdbcType="VARCHAR" />
		<result column="order_sources" property="orderSources" jdbcType="VARCHAR" />
		<result column="buy_tickets_types" property="buyTicketsTypes" jdbcType="VARCHAR" />
		<result column="all_line_valid" property="allLineValid" jdbcType="VARCHAR" />
		<result column="status" property="status" jdbcType="VARCHAR" />
		<result column="first_order_valid" property="firstOrderValid" jdbcType="VARCHAR" />
		<result column="first_order_username" property="firstOrderUsername" jdbcType="VARCHAR" />
		<result column="first_order_facility" property="firstOrderFacility" jdbcType="VARCHAR" />
		<result column="first_order_phone" property="firstOrderPhone" jdbcType="VARCHAR" />
		<result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
		<result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
	 </resultMap> 
	 
  <sql id="columns" >
		id,activity_name,category_type,activity_type,activity_source,vst_activity_id,exclusive,frist_channel_code,frist_channel_name,second_chanel_code,second_channel_name,fee_chanel_code,fee_chanel_name,total_amount,balance,start_time,endtime,desc_str,prom_branchs,start_visit_time,end_visit_time,amount_type,rule_type,rule_value,add_each,fixed_amount,rate_amount,price_type,user_type,user_levels,order_sources,buy_tickets_types,all_line_valid,status,first_order_valid,first_order_username,first_order_facility,first_order_phone,create_time,update_time
   </sql> 
	
	<sql id="queryCondition">
		<trim prefix="WHERE" prefixOverrides="AND"> 
			<if test="condition != null">
				<if test="condition.id!=null and condition.id != ''">
					AND id = #{condition.id,jdbcType=INTEGER}
				</if>
				<if test="condition.activityName!=null and condition.activityName != ''">
					AND activity_name = #{condition.activityName,jdbcType=VARCHAR}
				</if>
				<if test="condition.categoryType!=null and condition.categoryType != ''">
					AND category_type = #{condition.categoryType,jdbcType=VARCHAR}
				</if>
				<if test="condition.activityType!=null and condition.activityType != ''">
					AND activity_type = #{condition.activityType,jdbcType=VARCHAR}
				</if>
				<if test="condition.activitySource!=null and condition.activitySource != ''">
					AND activity_source = #{condition.activitySource,jdbcType=VARCHAR}
				</if>
				<if test="condition.vstActivityId!=null and condition.vstActivityId != ''">
					AND vst_activity_id = #{condition.vstActivityId,jdbcType=VARCHAR}
				</if>
				<if test="condition.exclusive!=null and condition.exclusive != ''">
					AND exclusive = #{condition.exclusive,jdbcType=VARCHAR}
				</if>
				<if test="condition.fristChannelCode!=null and condition.fristChannelCode != ''">
					AND frist_channel_code = #{condition.fristChannelCode,jdbcType=VARCHAR}
				</if>
				<if test="condition.fristChannelName!=null and condition.fristChannelName != ''">
					AND frist_channel_name = #{condition.fristChannelName,jdbcType=VARCHAR}
				</if>
				<if test="condition.secondChanelCode!=null and condition.secondChanelCode != ''">
					AND second_chanel_code = #{condition.secondChanelCode,jdbcType=VARCHAR}
				</if>
				<if test="condition.secondChannelName!=null and condition.secondChannelName != ''">
					AND second_channel_name = #{condition.secondChannelName,jdbcType=VARCHAR}
				</if>
				<if test="condition.feeChanelCode!=null and condition.feeChanelCode != ''">
					AND fee_chanel_code = #{condition.feeChanelCode,jdbcType=VARCHAR}
				</if>
				<if test="condition.feeChanelName!=null and condition.feeChanelName != ''">
					AND fee_chanel_name = #{condition.feeChanelName,jdbcType=VARCHAR}
				</if>
				<if test="condition.totalAmount!=null and condition.totalAmount != ''">
					AND total_amount = #{condition.totalAmount,jdbcType=VARCHAR}
				</if>
				<if test="condition.balance!=null and condition.balance != ''">
					AND balance = #{condition.balance,jdbcType=VARCHAR}
				</if>
				<if test="condition.startTime!=null and condition.startTime != ''">
					AND start_time = #{condition.startTime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.endtime!=null and condition.endtime != ''">
					AND endtime = #{condition.endtime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.descStr!=null and condition.descStr != ''">
					AND desc_str = #{condition.descStr,jdbcType=VARCHAR}
				</if>
				<if test="condition.promBranchs!=null and condition.promBranchs != ''">
					AND prom_branchs = #{condition.promBranchs,jdbcType=VARCHAR}
				</if>
				<if test="condition.startVisitTime!=null and condition.startVisitTime != ''">
					AND start_visit_time = #{condition.startVisitTime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.endVisitTime!=null and condition.endVisitTime != ''">
					AND end_visit_time = #{condition.endVisitTime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.amountType!=null and condition.amountType != ''">
					AND amount_type = #{condition.amountType,jdbcType=VARCHAR}
				</if>
				<if test="condition.ruleType!=null and condition.ruleType != ''">
					AND rule_type = #{condition.ruleType,jdbcType=VARCHAR}
				</if>
				<if test="condition.ruleValue!=null and condition.ruleValue != ''">
					AND rule_value = #{condition.ruleValue,jdbcType=VARCHAR}
				</if>
				<if test="condition.addEach!=null and condition.addEach != ''">
					AND add_each = #{condition.addEach,jdbcType=VARCHAR}
				</if>
				<if test="condition.fixedAmount!=null and condition.fixedAmount != ''">
					AND fixed_amount = #{condition.fixedAmount,jdbcType=VARCHAR}
				</if>
				<if test="condition.rateAmount!=null and condition.rateAmount != ''">
					AND rate_amount = #{condition.rateAmount,jdbcType=VARCHAR}
				</if>
				<if test="condition.priceType!=null and condition.priceType != ''">
					AND price_type = #{condition.priceType,jdbcType=VARCHAR}
				</if>
				<if test="condition.userType!=null and condition.userType != ''">
					AND user_type = #{condition.userType,jdbcType=VARCHAR}
				</if>
				<if test="condition.userLevels!=null and condition.userLevels != ''">
					AND user_levels = #{condition.userLevels,jdbcType=VARCHAR}
				</if>
				<if test="condition.orderSources!=null and condition.orderSources != ''">
					AND order_sources = #{condition.orderSources,jdbcType=VARCHAR}
				</if>
				<if test="condition.buyTicketsTypes!=null and condition.buyTicketsTypes != ''">
					AND buy_tickets_types = #{condition.buyTicketsTypes,jdbcType=VARCHAR}
				</if>
				<if test="condition.allLineValid!=null and condition.allLineValid != ''">
					AND all_line_valid = #{condition.allLineValid,jdbcType=VARCHAR}
				</if>
				<if test="condition.status!=null and condition.status != ''">
					AND status = #{condition.status,jdbcType=VARCHAR}
				</if>
				<if test="condition.firstOrderValid!=null and condition.firstOrderValid != ''">
					AND first_order_valid = #{condition.firstOrderValid,jdbcType=VARCHAR}
				</if>
				<if test="condition.firstOrderUsername!=null and condition.firstOrderUsername != ''">
					AND first_order_username = #{condition.firstOrderUsername,jdbcType=VARCHAR}
				</if>
				<if test="condition.firstOrderFacility!=null and condition.firstOrderFacility != ''">
					AND first_order_facility = #{condition.firstOrderFacility,jdbcType=VARCHAR}
				</if>
				<if test="condition.firstOrderPhone!=null and condition.firstOrderPhone != ''">
					AND first_order_phone = #{condition.firstOrderPhone,jdbcType=VARCHAR}
				</if>
				<if test="condition.createTime!=null and condition.createTime != ''">
					AND create_time = #{condition.createTime,jdbcType=TIMESTAMP}
				</if>
				<if test="condition.updateTime!=null and condition.updateTime != ''">
					AND update_time = #{condition.updateTime,jdbcType=TIMESTAMP}
				</if>
			</if>
		</trim>
	</sql>
	  
	<select id="get" resultMap="BaseResultMap">
		SELECT 
			<include refid="columns"/>
		FROM t_promotion_activity_info a 
		WHERE a.id = #{id}
	</select>
	
	<select id="query"  resultMap="BaseResultMap">
		select distinct * from  (SELECT 
			<include refid="columns"/>
		FROM t_promotion_activity_info a 
		<include refid="queryCondition"/>) t
		<include refid="MYSQL.pagination" />
	</select>
	
	<select id="queryNoPage"  resultMap="BaseResultMap">
		SELECT 
			<include refid="columns"/>
		FROM t_promotion_activity_info a 
		<include refid="queryCondition"/>
	</select>
	
	<select id="count" resultType="java.lang.Integer">
		SELECT COUNT(1) from 		
		(select distinct (a.id)  from t_promotion_activity_info a 
		<include refid="queryCondition"/>) t
	</select>
	
	<insert id="insert">
		INSERT INTO t_promotion_activity_info(
			id, 
			activity_name, 
			category_type, 
			activity_type, 
			activity_source, 
			vst_activity_id, 
			exclusive, 
			frist_channel_code, 
			frist_channel_name, 
			second_chanel_code, 
			second_channel_name, 
			fee_chanel_code, 
			fee_chanel_name, 
			total_amount, 
			balance, 
			start_time, 
			endtime, 
			desc_str, 
			prom_branchs, 
			start_visit_time, 
			end_visit_time, 
			amount_type, 
			rule_type, 
			rule_value, 
			add_each, 
			fixed_amount, 
			rate_amount, 
			price_type, 
			user_type, 
			user_levels, 
			order_sources, 
			buy_tickets_types, 
			all_line_valid, 
			status, 
			first_order_valid, 
			first_order_username, 
			first_order_facility, 
			first_order_phone, 
			create_time, 
			update_time
		) VALUES (
			#{id}, 
			#{activityName}, 
			#{categoryType}, 
			#{activityType}, 
			#{activitySource}, 
			#{vstActivityId}, 
			#{exclusive}, 
			#{fristChannelCode}, 
			#{fristChannelName}, 
			#{secondChanelCode}, 
			#{secondChannelName}, 
			#{feeChanelCode}, 
			#{feeChanelName}, 
			#{totalAmount}, 
			#{balance}, 
			#{startTime}, 
			#{endtime}, 
			#{descStr}, 
			#{promBranchs}, 
			#{startVisitTime}, 
			#{endVisitTime}, 
			#{amountType}, 
			#{ruleType}, 
			#{ruleValue}, 
			#{addEach}, 
			#{fixedAmount}, 
			#{rateAmount}, 
			#{priceType}, 
			#{userType}, 
			#{userLevels}, 
			#{orderSources}, 
			#{buyTicketsTypes}, 
			#{allLineValid}, 
			#{status}, 
			#{firstOrderValid}, 
			#{firstOrderUsername}, 
			#{firstOrderFacility}, 
			#{firstOrderPhone}, 
			#{createTime}, 
			#{updateTime}
		)
	</insert>
	
	<select id="getById" resultMap="BaseResultMap" parameterType="java.lang.Long">
		SELECT 
			<include refid="columns"/>
		FROM t_promotion_activity_info a 
		WHERE id = #{id}
	</select>  
	
	<update id="updateById">
		UPDATE t_promotion_activity_info  
		<set> 	
			<if test="i.id!=null">
				id = #{i.id,jdbcType=INTEGER},
			</if>
			<if test="i.activityName!=null">
				activity_name = #{i.activityName,jdbcType=VARCHAR},
			</if>
			<if test="i.categoryType!=null">
				category_type = #{i.categoryType,jdbcType=VARCHAR},
			</if>
			<if test="i.activityType!=null">
				activity_type = #{i.activityType,jdbcType=VARCHAR},
			</if>
			<if test="i.activitySource!=null">
				activity_source = #{i.activitySource,jdbcType=VARCHAR},
			</if>
			<if test="i.vstActivityId!=null">
				vst_activity_id = #{i.vstActivityId,jdbcType=VARCHAR},
			</if>
			<if test="i.exclusive!=null">
				exclusive = #{i.exclusive,jdbcType=VARCHAR},
			</if>
			<if test="i.fristChannelCode!=null">
				frist_channel_code = #{i.fristChannelCode,jdbcType=VARCHAR},
			</if>
			<if test="i.fristChannelName!=null">
				frist_channel_name = #{i.fristChannelName,jdbcType=VARCHAR},
			</if>
			<if test="i.secondChanelCode!=null">
				second_chanel_code = #{i.secondChanelCode,jdbcType=VARCHAR},
			</if>
			<if test="i.secondChannelName!=null">
				second_channel_name = #{i.secondChannelName,jdbcType=VARCHAR},
			</if>
			<if test="i.feeChanelCode!=null">
				fee_chanel_code = #{i.feeChanelCode,jdbcType=VARCHAR},
			</if>
			<if test="i.feeChanelName!=null">
				fee_chanel_name = #{i.feeChanelName,jdbcType=VARCHAR},
			</if>
			<if test="i.totalAmount!=null">
				total_amount = #{i.totalAmount,jdbcType=VARCHAR},
			</if>
			<if test="i.balance!=null">
				balance = #{i.balance,jdbcType=VARCHAR},
			</if>
			<if test="i.startTime!=null">
				start_time = #{i.startTime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.endtime!=null">
				endtime = #{i.endtime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.descStr!=null">
				desc_str = #{i.descStr,jdbcType=VARCHAR},
			</if>
			<if test="i.promBranchs!=null">
				prom_branchs = #{i.promBranchs,jdbcType=VARCHAR},
			</if>
			<if test="i.startVisitTime!=null">
				start_visit_time = #{i.startVisitTime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.endVisitTime!=null">
				end_visit_time = #{i.endVisitTime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.amountType!=null">
				amount_type = #{i.amountType,jdbcType=VARCHAR},
			</if>
			<if test="i.ruleType!=null">
				rule_type = #{i.ruleType,jdbcType=VARCHAR},
			</if>
			<if test="i.ruleValue!=null">
				rule_value = #{i.ruleValue,jdbcType=VARCHAR},
			</if>
			<if test="i.addEach!=null">
				add_each = #{i.addEach,jdbcType=VARCHAR},
			</if>
			<if test="i.fixedAmount!=null">
				fixed_amount = #{i.fixedAmount,jdbcType=VARCHAR},
			</if>
			<if test="i.rateAmount!=null">
				rate_amount = #{i.rateAmount,jdbcType=VARCHAR},
			</if>
			<if test="i.priceType!=null">
				price_type = #{i.priceType,jdbcType=VARCHAR},
			</if>
			<if test="i.userType!=null">
				user_type = #{i.userType,jdbcType=VARCHAR},
			</if>
			<if test="i.userLevels!=null">
				user_levels = #{i.userLevels,jdbcType=VARCHAR},
			</if>
			<if test="i.orderSources!=null">
				order_sources = #{i.orderSources,jdbcType=VARCHAR},
			</if>
			<if test="i.buyTicketsTypes!=null">
				buy_tickets_types = #{i.buyTicketsTypes,jdbcType=VARCHAR},
			</if>
			<if test="i.allLineValid!=null">
				all_line_valid = #{i.allLineValid,jdbcType=VARCHAR},
			</if>
			<if test="i.status!=null">
				status = #{i.status,jdbcType=VARCHAR},
			</if>
			<if test="i.firstOrderValid!=null">
				first_order_valid = #{i.firstOrderValid,jdbcType=VARCHAR},
			</if>
			<if test="i.firstOrderUsername!=null">
				first_order_username = #{i.firstOrderUsername,jdbcType=VARCHAR},
			</if>
			<if test="i.firstOrderFacility!=null">
				first_order_facility = #{i.firstOrderFacility,jdbcType=VARCHAR},
			</if>
			<if test="i.firstOrderPhone!=null">
				first_order_phone = #{i.firstOrderPhone,jdbcType=VARCHAR},
			</if>
			<if test="i.createTime!=null">
				create_time = #{i.createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="i.updateTime!=null">
				update_time = #{i.updateTime,jdbcType=TIMESTAMP}
			</if>
		</set> 	
		WHERE id = #{id}
	</update>
	
	<update id="delete">
		DELETE FROM t_promotion_activity_info
		WHERE id = #{id}
	</update>
	
</mapper>
2017-08-24 14:35:55,625 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml 文件不存在!
2017-08-24 14:35:55,626 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml 文件创建成功!
2017-08-24 14:35:55,627 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml 写入成功!
2017-08-24 14:35:55,627 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml
2017-08-24 14:35:55,628 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java
2017-08-24 14:35:55,632 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.service;

import java.util.List;

import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvf.common.dto.Pagination;
import com.lvmama.lvtraffic.promotion.business.service.TPromotionActivityInfoService;
import com.lvmama.lvtraffic.promotion.common.client.path.TPromotionActivityInfoBusinessClientPath;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoVehicleDto;

@Component
@Path("")
public class TPromotionActivityInfoResource{
	
	private static final Logger logger = LoggerFactory.getLogger(TPromotionActivityInfoResource.class);
	
	@Autowired
	private  TPromotionActivityInfoService tPromotionActivityInfoService;
	
	/**
	 * 
	 * @Description: 根据id获得促销活动
	 * @param request
	 * @return Response 
	 * @throws
	 */
	@POST
	@Produces(MediaType.APPLICATION_JSON)
	@Consumes(MediaType.APPLICATION_JSON)
	@Path(TPromotionActivityInfoBusinessClientPath.Path.QUERY_TPROMOTIONACTIVITYINFO_BY_ID)
	public Response queryTPromotionActivityInfoById(Long cityId){ 
		try {
			TPromotionActivityInfoDto tPromotionActivityInfoDto = tPromotionActivityInfoService.queryTPromotionActivityInfoById(cityId);
			return Response.ok(tPromotionActivityInfoDto).build();
		} catch (Exception e) {
			e.printStackTrace();
			return Response.noContent().build();
		}
	}  
	
	@POST
	@GET
	@Produces(MediaType.APPLICATION_JSON)
	@Consumes(MediaType.APPLICATION_JSON)
	@Path(TPromotionActivityInfoBusinessClientPath.Path.QUERY_TPROMOTIONACTIVITYINFO_LIST)
	public Response queryTPromotionActivityInfoList(BaseQueryDto<TPromotionActivityInfoDto> request){
		try { 
			BaseResultDto<TPromotionActivityInfoDto> baseResult = new BaseResultDto<TPromotionActivityInfoDto>(); 
			List<TPromotionActivityInfoDto> data = tPromotionActivityInfoService.queryTPromotionActivityInfos(request);
			int count = tPromotionActivityInfoService.queryTPromotionActivityInfoCount(request);
			Pagination pagination = request.getPagination();
			pagination.setRecords(count);
			pagination.countRecords(count); 
			
			baseResult.setResults(data);
			baseResult.setPagination(pagination);
			return Response.ok(baseResult).build();
		} catch (Exception e) {
			logger.error(e.getMessage(),e);
			return Response.noContent().build();
		}
	}
	
	@POST
	@Produces(MediaType.APPLICATION_JSON)
	@Consumes(MediaType.APPLICATION_JSON)
	@Path(TPromotionActivityInfoBusinessClientPath.Path.INSERT_TPROMOTIONACTIVITYINFO)
	public Response insertTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto){ 
		try{ 
			BaseSingleResultDto<TPromotionActivityInfoDto> result = new BaseSingleResultDto<TPromotionActivityInfoDto>();		
			
			result = tPromotionActivityInfoService.insertTPromotionActivityInfo(tPromotionActivityInfoDto);
			
			return Response.ok(result).build();
		}catch (Exception e) {
			
			e.printStackTrace();
			return Response.noContent().build();
		}
	}
	
	@POST
	@Produces(MediaType.APPLICATION_JSON)
	@Consumes(MediaType.APPLICATION_JSON)
	@Path(TPromotionActivityInfoBusinessClientPath.Path.EDIT_TPROMOTIONACTIVITYINFO)
	public Response editTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto){ 
		try{ 
			BaseSingleResultDto<TPromotionActivityInfoDto> result = new BaseSingleResultDto<TPromotionActivityInfoDto>();		
			
			result = tPromotionActivityInfoService.updateTPromotionActivityInfo(tPromotionActivityInfoDto);
			
			return Response.ok(result).build();
		}catch (Exception e) {
			
			e.printStackTrace();
			return Response.noContent().build();
		}
	}
}
2017-08-24 14:35:55,633 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java 文件不存在!
2017-08-24 14:35:55,634 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java 文件创建成功!
2017-08-24 14:35:55,635 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java 写入成功!
2017-08-24 14:35:55,635 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoResource.java
2017-08-24 14:35:55,636 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java
2017-08-24 14:35:55,637 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.business.service;

import java.util.List;

import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto; 
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto; 

/**
 * 促销活动服务
* @author Administrator
* @date 
*/
public interface TPromotionActivityInfoService {   
	/**
	 * 查询促销活动.
	 * @param queryCondition
	 * @return
	 */
	List<TPromotionActivityInfoDto> queryTPromotionActivityInfos(BaseQueryDto<TPromotionActivityInfoDto> queryCondition);
	
	/**
	 * 查询促销活动.
	 * @param queryCondition
	 * @return
	 */
	TPromotionActivityInfoDto queryTPromotionActivityInfoById(Long id);
	
	/**
	 * 查询促销活动数量
	 * @param queryCondition
	 * @return
	 */
	int queryTPromotionActivityInfoCount(BaseQueryDto<TPromotionActivityInfoDto> queryCondition);
	
	/**
	 * 新增促销活动
	 * @param tPromotionActivityInfoDto
	 * @return
	 */
	public BaseSingleResultDto<TPromotionActivityInfoDto> insertTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto);
	
	/**
	 * 修改促销活动.
	 * @param tPromotionActivityInfoDto
	 * @return
	 */
	public BaseSingleResultDto<TPromotionActivityInfoDto> updateTPromotionActivityInfo(TPromotionActivityInfoDto tPromotionActivityInfoDto);  
}
2017-08-24 14:35:55,637 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java 文件不存在!
2017-08-24 14:35:55,638 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java 文件创建成功!
2017-08-24 14:35:55,639 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java 写入成功!
2017-08-24 14:35:55,639 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoService.java
2017-08-24 14:35:55,640 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl
2017-08-24 14:35:55,653 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
     <link rel="stylesheet" href="${request.contextPath}/css/trip-list.css">
    <link rel="stylesheet" href="${request.contextPath}/css/order-details.css" type="text/css"/>
	<link type="text/css" rel="stylesheet" href="${request.contextPath}/js/resources/jquery-ui-1.8.11/css/redmond/jquery-ui-1.8.11.css"/>
	<link type="text/css" rel="stylesheet" href="${request.contextPath}/js/resources/jqGrid/css/ui.jqgrid.css"/>
	<script src="${request.contextPath}/js/resources/jqGrid/js/jquery-1.7.2.min.js"> </script>
	<script src="${request.contextPath}/js/resources/jquery-ui-1.8.10.custom.min.js"></script>
	<script src="${request.contextPath}/js/resources/jqGrid/src/i18n/grid.locale-cn.js"></script>
	<script src="${request.contextPath}/js/resources/jqGrid/js/jquery.jqGrid.src.js"></script>
	<script type="text/javascript" src="${request.contextPath}/js/My97DatePicker/WdatePicker.js"></script>

  	<style>
        span{
            width: 15%;
        }
    </style>
</head>
<body>
<div class="content content1">
    <div class="breadnav"><span>增值服务</span>>促销活动</div>
    <form id="myForm" autocomplete="off" >
        <div class="infor1">
            <div class="product message">
                <div class="main">

                    <div class="part">
                                      
                    </div>

                </div>
            </div>
        </div>

        <div class="click">
            <a href="javascript:;"><div class="button" onclick="query()">查询</div></a>
            <a href="javascript:;"><div class="button" onclick="add()">新增</div></a> 
        </div>

    </form>

    <div class="content1" style="margin-top:50px;">
        <table id="tPromotionActivityInfoList"></table>
        <div id="pager"></div>
    </div>

	<div id="jsContainer" class="jsContainer" style="height: 0">
		<div id="tuna_alert"
			style="display: none; position: absolute; z-index: 999; overflow: hidden;"></div>
		<div id="tuna_jmpinfo"
			style="visibility: hidden; position: absolute; z-index: 120;"></div>
	</div>                 
	
		
	<div id="addLayer" class="content content1" style="display:none; width: 400px; height: 380px;">
		<table width="100%" style="margin-top: 5px;">
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>id：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addId" name="addId"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>促销活动名称：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addActivityName" name="addActivityName"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动品类类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addCategoryType" name="addCategoryType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addActivityType" name="addActivityType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动来源(VST/大交通)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addActivitySource" name="addActivitySource"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>VST活动ID：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addVstActivityId" name="addVstActivityId"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>是否排他(Y/N)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addExclusive" name="addExclusive"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>一级渠道code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFristChannelCode" name="addFristChannelCode"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>一级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFristChannelName" name="addFristChannelName"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>二级渠道code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addSecondChanelCode" name="addSecondChanelCode"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>二级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addSecondChannelName" name="addSecondChannelName"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>三级渠道Code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFeeChanelCode" name="addFeeChanelCode"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>三级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFeeChanelName" name="addFeeChanelName"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动总金额：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addTotalAmount" name="addTotalAmount"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动剩余金额：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addBalance" name="addBalance"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动开始时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addStartTime" name="addStartTime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>活动结束时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addEndtime" name="addEndtime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>备注说明：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addDescStr" name="addDescStr"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠类别(成人/儿童)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addPromBranchs" name="addPromBranchs"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>游玩开始时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addStartVisitTime" name="addStartVisitTime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>游玩结束时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addEndVisitTime" name="addEndVisitTime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠方式(按金额/按折扣)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addAmountType" name="addAmountType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠规则类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addRuleType" name="addRuleType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠起始值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addRuleValue" name="addRuleValue"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠每次增加值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addAddEach" name="addAddEach"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>按金额立减值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFixedAmount" name="addFixedAmount"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>按百分比立减值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addRateAmount" name="addRateAmount"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>针对价格类型(销售价/结算价)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addPriceType" name="addPriceType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>会员类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addUserType" name="addUserType"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>选中会员等级：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addUserLevels" name="addUserLevels"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>优惠支持渠道(PC,WAP等)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addOrderSources" name="addOrderSources"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>购票方式(自取票/12306购票等)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addBuyTicketsTypes" name="addBuyTicketsTypes"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>所有线路城市是否优惠：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addAllLineValid" name="addAllLineValid"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>促销活动状态(是否开启)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addStatus" name="addStatus"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>是否首单立减：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFirstOrderValid" name="addFirstOrderValid"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>首单是否判断用户名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFirstOrderUsername" name="addFirstOrderUsername"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>首单判断设配号：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFirstOrderFacility" name="addFirstOrderFacility"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>首单判断手机号：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addFirstOrderPhone" name="addFirstOrderPhone"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>create_time：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addCreateTime" name="addCreateTime"/>
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style=" color:red">*</font>update_time：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="addUpdateTime" name="addUpdateTime"/>
				</td>
			</tr>
		</table>
		<div class="click" style="margin:0px 240px;margin-top: 20px;">
			<a href="javascript:void(0);" id="bt_add_tPromotionActivityInfo"><div class="button" id="div2310">保存</div></a>
		</div>
	</div>

	<div id="editLayer" class="content content1" style="display:none; width: 400px; height: 380px;">
		<table width="100%" style="margin-top: 5px;">
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>id：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editId" name="editId" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>促销活动名称：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editActivityName" name="editActivityName" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动品类类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editCategoryType" name="editCategoryType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editActivityType" name="editActivityType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动来源(VST/大交通)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editActivitySource" name="editActivitySource" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>VST活动ID：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editVstActivityId" name="editVstActivityId" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>是否排他(Y/N)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editExclusive" name="editExclusive" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>一级渠道code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFristChannelCode" name="editFristChannelCode" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>一级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFristChannelName" name="editFristChannelName" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>二级渠道code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editSecondChanelCode" name="editSecondChanelCode" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>二级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editSecondChannelName" name="editSecondChannelName" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>三级渠道Code：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFeeChanelCode" name="editFeeChanelCode" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>三级渠道名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFeeChanelName" name="editFeeChanelName" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动总金额：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editTotalAmount" name="editTotalAmount" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动剩余金额：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editBalance" name="editBalance" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动开始时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editStartTime" name="editStartTime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>活动结束时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editEndtime" name="editEndtime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>备注说明：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editDescStr" name="editDescStr" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠类别(成人/儿童)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editPromBranchs" name="editPromBranchs" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>游玩开始时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editStartVisitTime" name="editStartVisitTime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>游玩结束时间：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editEndVisitTime" name="editEndVisitTime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠方式(按金额/按折扣)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editAmountType" name="editAmountType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠规则类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editRuleType" name="editRuleType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠起始值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editRuleValue" name="editRuleValue" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠每次增加值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editAddEach" name="editAddEach" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>按金额立减值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFixedAmount" name="editFixedAmount" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>按百分比立减值：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editRateAmount" name="editRateAmount" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>针对价格类型(销售价/结算价)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editPriceType" name="editPriceType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>会员类型：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editUserType" name="editUserType" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>选中会员等级：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editUserLevels" name="editUserLevels" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>优惠支持渠道(PC,WAP等)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editOrderSources" name="editOrderSources" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>购票方式(自取票/12306购票等)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editBuyTicketsTypes" name="editBuyTicketsTypes" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>所有线路城市是否优惠：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editAllLineValid" name="editAllLineValid" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>促销活动状态(是否开启)：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editStatus" name="editStatus" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>是否首单立减：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFirstOrderValid" name="editFirstOrderValid" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>首单是否判断用户名：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFirstOrderUsername" name="editFirstOrderUsername" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>首单判断设配号：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFirstOrderFacility" name="editFirstOrderFacility" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>首单判断手机号：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editFirstOrderPhone" name="editFirstOrderPhone" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>create_time：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editCreateTime" name="editCreateTime" />
				</td>
			</tr>
			<tr height="30">
				<td align="left" width="120"><font style="color:red">*</font>update_time：</td>
				<td colspan="3">
					<input type="text" style="width: 80%" id="editUpdateTime" name="editUpdateTime" />
				</td>
			</tr>
		</table>
		<div class="click" style="margin:0px 240px;margin-top: 20px;">
			<a href="javascript:void(0);" id="bt_edit_tPromotionActivityInfo"><div class="button" id="div2311">保存</div></a>
		</div>
	</div> 
</div>
</body>
<script type="text/javascript"> 
    $(function (){ 
        initGrid(); 
		
		$("#bt_edit_tPromotionActivityInfo").on("click",function(){ 
			var idVal = $("#editId").val();
			var activityNameVal = $("#editActivityName").val();
			var categoryTypeVal = $("#editCategoryType").val();
			var activityTypeVal = $("#editActivityType").val();
			var activitySourceVal = $("#editActivitySource").val();
			var vstActivityIdVal = $("#editVstActivityId").val();
			var exclusiveVal = $("#editExclusive").val();
			var fristChannelCodeVal = $("#editFristChannelCode").val();
			var fristChannelNameVal = $("#editFristChannelName").val();
			var secondChanelCodeVal = $("#editSecondChanelCode").val();
			var secondChannelNameVal = $("#editSecondChannelName").val();
			var feeChanelCodeVal = $("#editFeeChanelCode").val();
			var feeChanelNameVal = $("#editFeeChanelName").val();
			var totalAmountVal = $("#editTotalAmount").val();
			var balanceVal = $("#editBalance").val();
			var startTimeVal = $("#editStartTime").val();
			var endtimeVal = $("#editEndtime").val();
			var descStrVal = $("#editDescStr").val();
			var promBranchsVal = $("#editPromBranchs").val();
			var startVisitTimeVal = $("#editStartVisitTime").val();
			var endVisitTimeVal = $("#editEndVisitTime").val();
			var amountTypeVal = $("#editAmountType").val();
			var ruleTypeVal = $("#editRuleType").val();
			var ruleValueVal = $("#editRuleValue").val();
			var addEachVal = $("#editAddEach").val();
			var fixedAmountVal = $("#editFixedAmount").val();
			var rateAmountVal = $("#editRateAmount").val();
			var priceTypeVal = $("#editPriceType").val();
			var userTypeVal = $("#editUserType").val();
			var userLevelsVal = $("#editUserLevels").val();
			var orderSourcesVal = $("#editOrderSources").val();
			var buyTicketsTypesVal = $("#editBuyTicketsTypes").val();
			var allLineValidVal = $("#editAllLineValid").val();
			var statusVal = $("#editStatus").val();
			var firstOrderValidVal = $("#editFirstOrderValid").val();
			var firstOrderUsernameVal = $("#editFirstOrderUsername").val();
			var firstOrderFacilityVal = $("#editFirstOrderFacility").val();
			var firstOrderPhoneVal = $("#editFirstOrderPhone").val();
			var createTimeVal = $("#editCreateTime").val();
			var updateTimeVal = $("#editUpdateTime").val();
			
			/*
            if(cityNameVal == ''){
				alert("城市名称不能空");
				return false;
			} */
            $.ajax({
                url : '${request.contextPath}/tPromotionActivityInfo/editTPromotionActivityInfo',
                type : 'POST',
                data : {
	                "tPromotionActivityInfoDto.id" : idVal, 
	                	                "tPromotionActivityInfoDto.activityName" : activityNameVal, 
	                	                "tPromotionActivityInfoDto.categoryType" : categoryTypeVal, 
	                	                "tPromotionActivityInfoDto.activityType" : activityTypeVal, 
	                	                "tPromotionActivityInfoDto.activitySource" : activitySourceVal, 
	                	                "tPromotionActivityInfoDto.vstActivityId" : vstActivityIdVal, 
	                	                "tPromotionActivityInfoDto.exclusive" : exclusiveVal, 
	                	                "tPromotionActivityInfoDto.fristChannelCode" : fristChannelCodeVal, 
	                	                "tPromotionActivityInfoDto.fristChannelName" : fristChannelNameVal, 
	                	                "tPromotionActivityInfoDto.secondChanelCode" : secondChanelCodeVal, 
	                	                "tPromotionActivityInfoDto.secondChannelName" : secondChannelNameVal, 
	                	                "tPromotionActivityInfoDto.feeChanelCode" : feeChanelCodeVal, 
	                	                "tPromotionActivityInfoDto.feeChanelName" : feeChanelNameVal, 
	                	                "tPromotionActivityInfoDto.totalAmount" : totalAmountVal, 
	                	                "tPromotionActivityInfoDto.balance" : balanceVal, 
	                	                "tPromotionActivityInfoDto.startTime" : startTimeVal, 
	                	                "tPromotionActivityInfoDto.endtime" : endtimeVal, 
	                	                "tPromotionActivityInfoDto.descStr" : descStrVal, 
	                	                "tPromotionActivityInfoDto.promBranchs" : promBranchsVal, 
	                	                "tPromotionActivityInfoDto.startVisitTime" : startVisitTimeVal, 
	                	                "tPromotionActivityInfoDto.endVisitTime" : endVisitTimeVal, 
	                	                "tPromotionActivityInfoDto.amountType" : amountTypeVal, 
	                	                "tPromotionActivityInfoDto.ruleType" : ruleTypeVal, 
	                	                "tPromotionActivityInfoDto.ruleValue" : ruleValueVal, 
	                	                "tPromotionActivityInfoDto.addEach" : addEachVal, 
	                	                "tPromotionActivityInfoDto.fixedAmount" : fixedAmountVal, 
	                	                "tPromotionActivityInfoDto.rateAmount" : rateAmountVal, 
	                	                "tPromotionActivityInfoDto.priceType" : priceTypeVal, 
	                	                "tPromotionActivityInfoDto.userType" : userTypeVal, 
	                	                "tPromotionActivityInfoDto.userLevels" : userLevelsVal, 
	                	                "tPromotionActivityInfoDto.orderSources" : orderSourcesVal, 
	                	                "tPromotionActivityInfoDto.buyTicketsTypes" : buyTicketsTypesVal, 
	                	                "tPromotionActivityInfoDto.allLineValid" : allLineValidVal, 
	                	                "tPromotionActivityInfoDto.status" : statusVal, 
	                	                "tPromotionActivityInfoDto.firstOrderValid" : firstOrderValidVal, 
	                	                "tPromotionActivityInfoDto.firstOrderUsername" : firstOrderUsernameVal, 
	                	                "tPromotionActivityInfoDto.firstOrderFacility" : firstOrderFacilityVal, 
	                	                "tPromotionActivityInfoDto.firstOrderPhone" : firstOrderPhoneVal, 
	                	                "tPromotionActivityInfoDto.createTime" : createTimeVal, 
	                	                "tPromotionActivityInfoDto.updateTime" : updateTimeVal   
                },
                success : function(data){ 
                    if(data.flag == 'SUCCESS'){
                        alert("数据修改成功！");
						$("#editLayer").dialog('close')  ;				
						query();
                    }else{
                        alert("数据修改失败");
                    }
                }
            });
        });
		
		 $("#bt_add_tPromotionActivityInfo").on("click",function(){  
			var idVal = $("#addId").val();
			var activityNameVal = $("#addActivityName").val();
			var categoryTypeVal = $("#addCategoryType").val();
			var activityTypeVal = $("#addActivityType").val();
			var activitySourceVal = $("#addActivitySource").val();
			var vstActivityIdVal = $("#addVstActivityId").val();
			var exclusiveVal = $("#addExclusive").val();
			var fristChannelCodeVal = $("#addFristChannelCode").val();
			var fristChannelNameVal = $("#addFristChannelName").val();
			var secondChanelCodeVal = $("#addSecondChanelCode").val();
			var secondChannelNameVal = $("#addSecondChannelName").val();
			var feeChanelCodeVal = $("#addFeeChanelCode").val();
			var feeChanelNameVal = $("#addFeeChanelName").val();
			var totalAmountVal = $("#addTotalAmount").val();
			var balanceVal = $("#addBalance").val();
			var startTimeVal = $("#addStartTime").val();
			var endtimeVal = $("#addEndtime").val();
			var descStrVal = $("#addDescStr").val();
			var promBranchsVal = $("#addPromBranchs").val();
			var startVisitTimeVal = $("#addStartVisitTime").val();
			var endVisitTimeVal = $("#addEndVisitTime").val();
			var amountTypeVal = $("#addAmountType").val();
			var ruleTypeVal = $("#addRuleType").val();
			var ruleValueVal = $("#addRuleValue").val();
			var addEachVal = $("#addAddEach").val();
			var fixedAmountVal = $("#addFixedAmount").val();
			var rateAmountVal = $("#addRateAmount").val();
			var priceTypeVal = $("#addPriceType").val();
			var userTypeVal = $("#addUserType").val();
			var userLevelsVal = $("#addUserLevels").val();
			var orderSourcesVal = $("#addOrderSources").val();
			var buyTicketsTypesVal = $("#addBuyTicketsTypes").val();
			var allLineValidVal = $("#addAllLineValid").val();
			var statusVal = $("#addStatus").val();
			var firstOrderValidVal = $("#addFirstOrderValid").val();
			var firstOrderUsernameVal = $("#addFirstOrderUsername").val();
			var firstOrderFacilityVal = $("#addFirstOrderFacility").val();
			var firstOrderPhoneVal = $("#addFirstOrderPhone").val();
			var createTimeVal = $("#addCreateTime").val();
			var updateTimeVal = $("#addUpdateTime").val();
			/*
            if(cityNameV == ''){
				alert("城市名称不能空");
				return false;
			} */
			
            $.ajax({
                url : '${request.contextPath}/tPromotionActivityInfo/insertTPromotionActivityInfo',
                type : 'POST',
                data : {
	                "tPromotionActivityInfoDto.id" : idVal, 
	                	                "tPromotionActivityInfoDto.activityName" : activityNameVal, 
	                	                "tPromotionActivityInfoDto.categoryType" : categoryTypeVal, 
	                	                "tPromotionActivityInfoDto.activityType" : activityTypeVal, 
	                	                "tPromotionActivityInfoDto.activitySource" : activitySourceVal, 
	                	                "tPromotionActivityInfoDto.vstActivityId" : vstActivityIdVal, 
	                	                "tPromotionActivityInfoDto.exclusive" : exclusiveVal, 
	                	                "tPromotionActivityInfoDto.fristChannelCode" : fristChannelCodeVal, 
	                	                "tPromotionActivityInfoDto.fristChannelName" : fristChannelNameVal, 
	                	                "tPromotionActivityInfoDto.secondChanelCode" : secondChanelCodeVal, 
	                	                "tPromotionActivityInfoDto.secondChannelName" : secondChannelNameVal, 
	                	                "tPromotionActivityInfoDto.feeChanelCode" : feeChanelCodeVal, 
	                	                "tPromotionActivityInfoDto.feeChanelName" : feeChanelNameVal, 
	                	                "tPromotionActivityInfoDto.totalAmount" : totalAmountVal, 
	                	                "tPromotionActivityInfoDto.balance" : balanceVal, 
	                	                "tPromotionActivityInfoDto.startTime" : startTimeVal, 
	                	                "tPromotionActivityInfoDto.endtime" : endtimeVal, 
	                	                "tPromotionActivityInfoDto.descStr" : descStrVal, 
	                	                "tPromotionActivityInfoDto.promBranchs" : promBranchsVal, 
	                	                "tPromotionActivityInfoDto.startVisitTime" : startVisitTimeVal, 
	                	                "tPromotionActivityInfoDto.endVisitTime" : endVisitTimeVal, 
	                	                "tPromotionActivityInfoDto.amountType" : amountTypeVal, 
	                	                "tPromotionActivityInfoDto.ruleType" : ruleTypeVal, 
	                	                "tPromotionActivityInfoDto.ruleValue" : ruleValueVal, 
	                	                "tPromotionActivityInfoDto.addEach" : addEachVal, 
	                	                "tPromotionActivityInfoDto.fixedAmount" : fixedAmountVal, 
	                	                "tPromotionActivityInfoDto.rateAmount" : rateAmountVal, 
	                	                "tPromotionActivityInfoDto.priceType" : priceTypeVal, 
	                	                "tPromotionActivityInfoDto.userType" : userTypeVal, 
	                	                "tPromotionActivityInfoDto.userLevels" : userLevelsVal, 
	                	                "tPromotionActivityInfoDto.orderSources" : orderSourcesVal, 
	                	                "tPromotionActivityInfoDto.buyTicketsTypes" : buyTicketsTypesVal, 
	                	                "tPromotionActivityInfoDto.allLineValid" : allLineValidVal, 
	                	                "tPromotionActivityInfoDto.status" : statusVal, 
	                	                "tPromotionActivityInfoDto.firstOrderValid" : firstOrderValidVal, 
	                	                "tPromotionActivityInfoDto.firstOrderUsername" : firstOrderUsernameVal, 
	                	                "tPromotionActivityInfoDto.firstOrderFacility" : firstOrderFacilityVal, 
	                	                "tPromotionActivityInfoDto.firstOrderPhone" : firstOrderPhoneVal, 
	                	                "tPromotionActivityInfoDto.createTime" : createTimeVal, 
	                	                "tPromotionActivityInfoDto.updateTime" : updateTimeVal   
                },
                success : function(data){ 
                    if(data.flag == 'SUCCESS'){
                        alert("数据新增成功！"); 
						$("#addLayer").dialog('close')  ;	
						query(); 
                    }else{
                        alert("数据新增失败");
                    }
                }
            });
        });
    });

    //清空查询信息
    function reset() {
        document.getElementById("myForm").reset();
    } 
	
    //查询列表信息
    function query() { 
        $("#tPromotionActivityInfoList").jqGrid('setGridParam', {
            url : "${request.contextPath}/tPromotionActivityInfo/queryTPromotionActivityInfoList",
            datatype : "json",
            mtype : "POST",
            postData : getQueryParams()
        }).trigger("reloadGrid");
    }
 
	
	//修改
	function edit(trNode) {  
		$("#editId").val($(trNode).children().eq(1).text());
		$("#editActivityName").val($(trNode).children().eq(2).text());
		$("#editCategoryType").val($(trNode).children().eq(3).text());
		$("#editActivityType").val($(trNode).children().eq(4).text());
		$("#editActivitySource").val($(trNode).children().eq(5).text());
		$("#editVstActivityId").val($(trNode).children().eq(6).text());
		$("#editExclusive").val($(trNode).children().eq(7).text());
		$("#editFristChannelCode").val($(trNode).children().eq(8).text());
		$("#editFristChannelName").val($(trNode).children().eq(9).text());
		$("#editSecondChanelCode").val($(trNode).children().eq(10).text());
		$("#editSecondChannelName").val($(trNode).children().eq(11).text());
		$("#editFeeChanelCode").val($(trNode).children().eq(12).text());
		$("#editFeeChanelName").val($(trNode).children().eq(13).text());
		$("#editTotalAmount").val($(trNode).children().eq(14).text());
		$("#editBalance").val($(trNode).children().eq(15).text());
		$("#editStartTime").val($(trNode).children().eq(16).text());
		$("#editEndtime").val($(trNode).children().eq(17).text());
		$("#editDescStr").val($(trNode).children().eq(18).text());
		$("#editPromBranchs").val($(trNode).children().eq(19).text());
		$("#editStartVisitTime").val($(trNode).children().eq(20).text());
		$("#editEndVisitTime").val($(trNode).children().eq(21).text());
		$("#editAmountType").val($(trNode).children().eq(22).text());
		$("#editRuleType").val($(trNode).children().eq(23).text());
		$("#editRuleValue").val($(trNode).children().eq(24).text());
		$("#editAddEach").val($(trNode).children().eq(25).text());
		$("#editFixedAmount").val($(trNode).children().eq(26).text());
		$("#editRateAmount").val($(trNode).children().eq(27).text());
		$("#editPriceType").val($(trNode).children().eq(28).text());
		$("#editUserType").val($(trNode).children().eq(29).text());
		$("#editUserLevels").val($(trNode).children().eq(30).text());
		$("#editOrderSources").val($(trNode).children().eq(31).text());
		$("#editBuyTicketsTypes").val($(trNode).children().eq(32).text());
		$("#editAllLineValid").val($(trNode).children().eq(33).text());
		$("#editStatus").val($(trNode).children().eq(34).text());
		$("#editFirstOrderValid").val($(trNode).children().eq(35).text());
		$("#editFirstOrderUsername").val($(trNode).children().eq(36).text());
		$("#editFirstOrderFacility").val($(trNode).children().eq(37).text());
		$("#editFirstOrderPhone").val($(trNode).children().eq(38).text());
		$("#editCreateTime").val($(trNode).children().eq(39).text());
		$("#editUpdateTime").val($(trNode).children().eq(40).text());
		
		$('#editLayer').dialog({
				title:'修改数据',
				width:600,
				height:400,
				modal:'true'
			});
	} 
	
	function add(){ 
		 $('#addLayer input').val('');
		 $('#addLayer').dialog({
			title:'新增数据',
			width:600,
			height:400,
			modal:'true'
		});
	}
  

   function getQueryParams() {  
    } 
		
    function initGrid() {
        $("#tPromotionActivityInfoList").jqGrid({
            url : "${request.contextPath}/tPromotionActivityInfo/queryTPromotionActivityInfoList",
            datatype : "json",
            mtype : "POST",
            colNames : ['id','促销活动名称','活动品类类型','优惠类型','活动来源(VST/大交通)','VST活动ID','是否排他(Y/N)','一级渠道code','一级渠道名','二级渠道code','二级渠道名','三级渠道Code','三级渠道名','活动总金额','活动剩余金额','活动开始时间','活动结束时间','备注说明','优惠类别(成人/儿童)','游玩开始时间','游玩结束时间','优惠方式(按金额/按折扣)','优惠规则类型','优惠起始值','优惠每次增加值','按金额立减值','按百分比立减值','针对价格类型(销售价/结算价)','会员类型','选中会员等级','优惠支持渠道(PC,WAP等)','购票方式(自取票/12306购票等)','所有线路城市是否优惠','促销活动状态(是否开启)','是否首单立减','首单是否判断用户名','首单判断设配号','首单判断手机号','create_time','update_time','操作'],
            colModel : [{
                name : 'id',//id
                index : 'id',
                align : 'center', 
                sortable:false
            },{
                name : 'activityName',//促销活动名称
                index : 'activityName',
                align : 'center', 
                sortable:false
            },{
                name : 'categoryType',//活动品类类型
                index : 'categoryType',
                align : 'center', 
                sortable:false
            },{
                name : 'activityType',//优惠类型
                index : 'activityType',
                align : 'center', 
                sortable:false
            },{
                name : 'activitySource',//活动来源(VST/大交通)
                index : 'activitySource',
                align : 'center', 
                sortable:false
            },{
                name : 'vstActivityId',//VST活动ID
                index : 'vstActivityId',
                align : 'center', 
                sortable:false
            },{
                name : 'exclusive',//是否排他(Y/N)
                index : 'exclusive',
                align : 'center', 
                sortable:false
            },{
                name : 'fristChannelCode',//一级渠道code
                index : 'fristChannelCode',
                align : 'center', 
                sortable:false
            },{
                name : 'fristChannelName',//一级渠道名
                index : 'fristChannelName',
                align : 'center', 
                sortable:false
            },{
                name : 'secondChanelCode',//二级渠道code
                index : 'secondChanelCode',
                align : 'center', 
                sortable:false
            },{
                name : 'secondChannelName',//二级渠道名
                index : 'secondChannelName',
                align : 'center', 
                sortable:false
            },{
                name : 'feeChanelCode',//三级渠道Code
                index : 'feeChanelCode',
                align : 'center', 
                sortable:false
            },{
                name : 'feeChanelName',//三级渠道名
                index : 'feeChanelName',
                align : 'center', 
                sortable:false
            },{
                name : 'totalAmount',//活动总金额
                index : 'totalAmount',
                align : 'center', 
                sortable:false
            },{
                name : 'balance',//活动剩余金额
                index : 'balance',
                align : 'center', 
                sortable:false
            },{
                name : 'startTime',//活动开始时间
                index : 'startTime',
                align : 'center', 
                sortable:false
            },{
                name : 'endtime',//活动结束时间
                index : 'endtime',
                align : 'center', 
                sortable:false
            },{
                name : 'descStr',//备注说明
                index : 'descStr',
                align : 'center', 
                sortable:false
            },{
                name : 'promBranchs',//优惠类别(成人/儿童)
                index : 'promBranchs',
                align : 'center', 
                sortable:false
            },{
                name : 'startVisitTime',//游玩开始时间
                index : 'startVisitTime',
                align : 'center', 
                sortable:false
            },{
                name : 'endVisitTime',//游玩结束时间
                index : 'endVisitTime',
                align : 'center', 
                sortable:false
            },{
                name : 'amountType',//优惠方式(按金额/按折扣)
                index : 'amountType',
                align : 'center', 
                sortable:false
            },{
                name : 'ruleType',//优惠规则类型
                index : 'ruleType',
                align : 'center', 
                sortable:false
            },{
                name : 'ruleValue',//优惠起始值
                index : 'ruleValue',
                align : 'center', 
                sortable:false
            },{
                name : 'addEach',//优惠每次增加值
                index : 'addEach',
                align : 'center', 
                sortable:false
            },{
                name : 'fixedAmount',//按金额立减值
                index : 'fixedAmount',
                align : 'center', 
                sortable:false
            },{
                name : 'rateAmount',//按百分比立减值
                index : 'rateAmount',
                align : 'center', 
                sortable:false
            },{
                name : 'priceType',//针对价格类型(销售价/结算价)
                index : 'priceType',
                align : 'center', 
                sortable:false
            },{
                name : 'userType',//会员类型
                index : 'userType',
                align : 'center', 
                sortable:false
            },{
                name : 'userLevels',//选中会员等级
                index : 'userLevels',
                align : 'center', 
                sortable:false
            },{
                name : 'orderSources',//优惠支持渠道(PC,WAP等)
                index : 'orderSources',
                align : 'center', 
                sortable:false
            },{
                name : 'buyTicketsTypes',//购票方式(自取票/12306购票等)
                index : 'buyTicketsTypes',
                align : 'center', 
                sortable:false
            },{
                name : 'allLineValid',//所有线路城市是否优惠
                index : 'allLineValid',
                align : 'center', 
                sortable:false
            },{
                name : 'status',//促销活动状态(是否开启)
                index : 'status',
                align : 'center', 
                sortable:false
            },{
                name : 'firstOrderValid',//是否首单立减
                index : 'firstOrderValid',
                align : 'center', 
                sortable:false
            },{
                name : 'firstOrderUsername',//首单是否判断用户名
                index : 'firstOrderUsername',
                align : 'center', 
                sortable:false
            },{
                name : 'firstOrderFacility',//首单判断设配号
                index : 'firstOrderFacility',
                align : 'center', 
                sortable:false
            },{
                name : 'firstOrderPhone',//首单判断手机号
                index : 'firstOrderPhone',
                align : 'center', 
                sortable:false
            },{
                name : 'createTime',//create_time
                index : 'createTime',
                align : 'center', 
                sortable:false
            },{
                name : 'updateTime',//update_time
                index : 'updateTime',
                align : 'center', 
                sortable:false
            },{
                name : 'operate',
                index : 'operate',
                align : 'center',
                sortable:false
            }],
            rowNum: 10,            //每页显示记录数
            autowidth: true,      //自动匹配宽度
            pager: '#pager',      //表格数据关联的分页条，html元素
            rowList:[10,20,50,500],   //分页选项，可以下拉选择每页显示记录数
            viewrecords: true,    //显示总记录数
            height:'auto',//高度，表格高度。可为数值、百分比或'auto' 
            gridview:true,        //加速显示
            viewrecords: true,    //显示总记录数
            multiselect : true,
            sortable:true,        //可以排序
            sortname: 'createTime',  //排序字段名
            sortorder: "desc",    //排序方式：倒序
            caption : '促销活动列表',
            jsonReader : {
                root : "results",                
                page : "pagination.page",       
                records : "pagination.records",  
                total:'pagination.total',        
                repeatitems : false            
            },
            onPaging : function(pgButton) {
                $("#tPromotionActivityInfoList").jqGrid('setGridParam', {
                    postData : getQueryParams()
                });
            },
            postData : getQueryParams(),
            gridComplete:function(){  
                var ids=jQuery("#tPromotionActivityInfoList").jqGrid('getDataIDs');
                for(var i=0; i<ids.length; i++){
                    var id=ids[i];
                    var rowData = $('#tPromotionActivityInfoList').jqGrid('getRowData',id);
					var operateClick = '<a href="javascript:;" style="color:blue" onclick="edit(this.parentNode.parentNode)" >修改</a> ';
                    jQuery("#tPromotionActivityInfoList").jqGrid('setRowData', id , {operate:operateClick});
                }
            }
        });
    } 
     
    </script> 
</html>
2017-08-24 14:35:55,663 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl 文件不存在!
2017-08-24 14:35:55,664 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl 文件创建成功!
2017-08-24 14:35:55,665 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl 写入成功!
2017-08-24 14:35:55,665 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfo_list.ftl
2017-08-24 14:35:55,666 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java
2017-08-24 14:35:55,668 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.business.service.impl;

import java.util.Date;
import java.util.List;

import org.apache.commons.lang.StringUtils;
import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.lvmama.lvf.common.dto.BaseQueryDto;
import com.lvmama.lvf.common.dto.BaseResultDto;
import com.lvmama.lvf.common.dto.BaseSingleResultDto;
import com.lvmama.lvf.common.dto.status.ResultStatus;
import com.lvmama.lvtraffic.promotion.business.service.TPromotionActivityInfoService;
import com.lvmama.lvtraffic.promotion.common.dto.enums.ValidStatus; 
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto; 
import com.lvmama.lvtraffic.promotion.persistence.mapper.TPromotionActivityInfoMapper; 

/**
 * 促销活动服务实现类.
 * @author Administrator
 *
 */
@Service
public class TPromotionActivityInfoServiceImpl implements TPromotionActivityInfoService {
	public static Logger logger = Logger.getLogger(TPromotionActivityInfoServiceImpl.class);

	@Autowired
	private TPromotionActivityInfoMapper tPromotionActivityInfoMapper; 
	 
	@Override
	public List<TPromotionActivityInfoDto> queryTPromotionActivityInfos(
			BaseQueryDto<TPromotionActivityInfoDto> q) { 
		List<TPromotionActivityInfoDto> promotionOrderInfoDtoList = tPromotionActivityInfoMapper.query(q); 
		return promotionOrderInfoDtoList;
	}

	@Override
	public int queryTPromotionActivityInfoCount(BaseQueryDto<TPromotionActivityInfoDto> q) {
		return tPromotionActivityInfoMapper.count(q); 
	}

	@Override
	public TPromotionActivityInfoDto queryTPromotionActivityInfoById(Long id) { 
		return tPromotionActivityInfoMapper.getById(id);
	}  
	
	@Override
	public BaseSingleResultDto<TPromotionActivityInfoDto> insertTPromotionActivityInfo(
			TPromotionActivityInfoDto tPromotionActivityInfoDto) {
		BaseSingleResultDto<TPromotionActivityInfoDto> result = new BaseSingleResultDto<TPromotionActivityInfoDto>();
		int  record = tPromotionActivityInfoMapper.insert(tPromotionActivityInfoDto);
		
		result.setResult(tPromotionActivityInfoDto);
		if(record == 0){ 
			result.setErrorMessage("新增促销活动失败");
			return result;
		} 
		return result;
	}

	@Override
	public BaseSingleResultDto<TPromotionActivityInfoDto> updateTPromotionActivityInfo(
			TPromotionActivityInfoDto tPromotionActivityInfoDto) {
		BaseSingleResultDto<TPromotionActivityInfoDto> result = new BaseSingleResultDto<TPromotionActivityInfoDto>();
		try{
			tPromotionActivityInfoMapper.updateById(tPromotionActivityInfoDto.getId(), tPromotionActivityInfoDto);
		}catch(Exception e){ 
			logger.error(e.getMessage(),e); 
			result.setErrorMessage("新增促销活动失败:"+e.getMessage());
			return result; 
		}  
		result.setResult(tPromotionActivityInfoDto); 
		return result;
	} 
}
2017-08-24 14:35:55,668 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java 文件不存在!
2017-08-24 14:35:55,669 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java 文件创建成功!
2017-08-24 14:35:55,670 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java 写入成功!
2017-08-24 14:35:55,670 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoServiceImpl.java
2017-08-24 14:35:55,671 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  fileName === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java
2017-08-24 14:35:55,674 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  content === 
package com.lvmama.lvtraffic.promotion.business.service;

import java.io.Serializable;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import com.lvmama.lvf.common.dto.Entity;  
import com.lvmama.lvtraffic.promotion.common.dto.request.transfer.TPromotionActivityInfoSearchRequest;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoDto;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoProductDto;
import com.lvmama.lvtraffic.promotion.common.dto.transfer.TPromotionActivityInfoVehicleDto;

/**
 * 促销活动信息
* @author Administrator
* @date 
*/
public class TPromotionActivityInfoDto  extends Entity implements Serializable {
	private static final long serialVersionUID = 1L; 
 	//id
 	private Long id;
 	
 	public Long getId(){
 		return this.id;
 	}
 	
 	public void setId(Long id){
 		this.id = id;
 	} 
 	
 	//促销活动名称
 	private String activityName;
 	
 	public String getActivityName(){
 		return this.activityName;
 	}
 	
 	public void setActivityName(String activityName){
 		this.activityName = activityName;
 	} 
 	
 	//活动品类类型
 	private String categoryType;
 	
 	public String getCategoryType(){
 		return this.categoryType;
 	}
 	
 	public void setCategoryType(String categoryType){
 		this.categoryType = categoryType;
 	} 
 	
 	//优惠类型
 	private String activityType;
 	
 	public String getActivityType(){
 		return this.activityType;
 	}
 	
 	public void setActivityType(String activityType){
 		this.activityType = activityType;
 	} 
 	
 	//活动来源(VST/大交通)
 	private String activitySource;
 	
 	public String getActivitySource(){
 		return this.activitySource;
 	}
 	
 	public void setActivitySource(String activitySource){
 		this.activitySource = activitySource;
 	} 
 	
 	//VST活动ID
 	private String vstActivityId;
 	
 	public String getVstActivityId(){
 		return this.vstActivityId;
 	}
 	
 	public void setVstActivityId(String vstActivityId){
 		this.vstActivityId = vstActivityId;
 	} 
 	
 	//是否排他(Y/N)
 	private String exclusive;
 	
 	public String getExclusive(){
 		return this.exclusive;
 	}
 	
 	public void setExclusive(String exclusive){
 		this.exclusive = exclusive;
 	} 
 	
 	//一级渠道code
 	private String fristChannelCode;
 	
 	public String getFristChannelCode(){
 		return this.fristChannelCode;
 	}
 	
 	public void setFristChannelCode(String fristChannelCode){
 		this.fristChannelCode = fristChannelCode;
 	} 
 	
 	//一级渠道名
 	private String fristChannelName;
 	
 	public String getFristChannelName(){
 		return this.fristChannelName;
 	}
 	
 	public void setFristChannelName(String fristChannelName){
 		this.fristChannelName = fristChannelName;
 	} 
 	
 	//二级渠道code
 	private String secondChanelCode;
 	
 	public String getSecondChanelCode(){
 		return this.secondChanelCode;
 	}
 	
 	public void setSecondChanelCode(String secondChanelCode){
 		this.secondChanelCode = secondChanelCode;
 	} 
 	
 	//二级渠道名
 	private String secondChannelName;
 	
 	public String getSecondChannelName(){
 		return this.secondChannelName;
 	}
 	
 	public void setSecondChannelName(String secondChannelName){
 		this.secondChannelName = secondChannelName;
 	} 
 	
 	//三级渠道Code
 	private String feeChanelCode;
 	
 	public String getFeeChanelCode(){
 		return this.feeChanelCode;
 	}
 	
 	public void setFeeChanelCode(String feeChanelCode){
 		this.feeChanelCode = feeChanelCode;
 	} 
 	
 	//三级渠道名
 	private String feeChanelName;
 	
 	public String getFeeChanelName(){
 		return this.feeChanelName;
 	}
 	
 	public void setFeeChanelName(String feeChanelName){
 		this.feeChanelName = feeChanelName;
 	} 
 	
 	//活动总金额
 	private String totalAmount;
 	
 	public String getTotalAmount(){
 		return this.totalAmount;
 	}
 	
 	public void setTotalAmount(String totalAmount){
 		this.totalAmount = totalAmount;
 	} 
 	
 	//活动剩余金额
 	private String balance;
 	
 	public String getBalance(){
 		return this.balance;
 	}
 	
 	public void setBalance(String balance){
 		this.balance = balance;
 	} 
 	
 	//活动开始时间
 	private Date startTime;
 	
 	public Date getStartTime(){
 		return this.startTime;
 	}
 	
 	public void setStartTime(Date startTime){
 		this.startTime = startTime;
 	} 
 	
 	//活动结束时间
 	private Date endtime;
 	
 	public Date getEndtime(){
 		return this.endtime;
 	}
 	
 	public void setEndtime(Date endtime){
 		this.endtime = endtime;
 	} 
 	
 	//备注说明
 	private String descStr;
 	
 	public String getDescStr(){
 		return this.descStr;
 	}
 	
 	public void setDescStr(String descStr){
 		this.descStr = descStr;
 	} 
 	
 	//优惠类别(成人/儿童)
 	private String promBranchs;
 	
 	public String getPromBranchs(){
 		return this.promBranchs;
 	}
 	
 	public void setPromBranchs(String promBranchs){
 		this.promBranchs = promBranchs;
 	} 
 	
 	//游玩开始时间
 	private Date startVisitTime;
 	
 	public Date getStartVisitTime(){
 		return this.startVisitTime;
 	}
 	
 	public void setStartVisitTime(Date startVisitTime){
 		this.startVisitTime = startVisitTime;
 	} 
 	
 	//游玩结束时间
 	private Date endVisitTime;
 	
 	public Date getEndVisitTime(){
 		return this.endVisitTime;
 	}
 	
 	public void setEndVisitTime(Date endVisitTime){
 		this.endVisitTime = endVisitTime;
 	} 
 	
 	//优惠方式(按金额/按折扣)
 	private String amountType;
 	
 	public String getAmountType(){
 		return this.amountType;
 	}
 	
 	public void setAmountType(String amountType){
 		this.amountType = amountType;
 	} 
 	
 	//优惠规则类型
 	private String ruleType;
 	
 	public String getRuleType(){
 		return this.ruleType;
 	}
 	
 	public void setRuleType(String ruleType){
 		this.ruleType = ruleType;
 	} 
 	
 	//优惠起始值
 	private String ruleValue;
 	
 	public String getRuleValue(){
 		return this.ruleValue;
 	}
 	
 	public void setRuleValue(String ruleValue){
 		this.ruleValue = ruleValue;
 	} 
 	
 	//优惠每次增加值
 	private String addEach;
 	
 	public String getAddEach(){
 		return this.addEach;
 	}
 	
 	public void setAddEach(String addEach){
 		this.addEach = addEach;
 	} 
 	
 	//按金额立减值
 	private String fixedAmount;
 	
 	public String getFixedAmount(){
 		return this.fixedAmount;
 	}
 	
 	public void setFixedAmount(String fixedAmount){
 		this.fixedAmount = fixedAmount;
 	} 
 	
 	//按百分比立减值
 	private String rateAmount;
 	
 	public String getRateAmount(){
 		return this.rateAmount;
 	}
 	
 	public void setRateAmount(String rateAmount){
 		this.rateAmount = rateAmount;
 	} 
 	
 	//针对价格类型(销售价/结算价)
 	private String priceType;
 	
 	public String getPriceType(){
 		return this.priceType;
 	}
 	
 	public void setPriceType(String priceType){
 		this.priceType = priceType;
 	} 
 	
 	//会员类型
 	private String userType;
 	
 	public String getUserType(){
 		return this.userType;
 	}
 	
 	public void setUserType(String userType){
 		this.userType = userType;
 	} 
 	
 	//选中会员等级
 	private String userLevels;
 	
 	public String getUserLevels(){
 		return this.userLevels;
 	}
 	
 	public void setUserLevels(String userLevels){
 		this.userLevels = userLevels;
 	} 
 	
 	//优惠支持渠道(PC,WAP等)
 	private String orderSources;
 	
 	public String getOrderSources(){
 		return this.orderSources;
 	}
 	
 	public void setOrderSources(String orderSources){
 		this.orderSources = orderSources;
 	} 
 	
 	//购票方式(自取票/12306购票等)
 	private String buyTicketsTypes;
 	
 	public String getBuyTicketsTypes(){
 		return this.buyTicketsTypes;
 	}
 	
 	public void setBuyTicketsTypes(String buyTicketsTypes){
 		this.buyTicketsTypes = buyTicketsTypes;
 	} 
 	
 	//所有线路城市是否优惠
 	private String allLineValid;
 	
 	public String getAllLineValid(){
 		return this.allLineValid;
 	}
 	
 	public void setAllLineValid(String allLineValid){
 		this.allLineValid = allLineValid;
 	} 
 	
 	//促销活动状态(是否开启)
 	private String status;
 	
 	public String getStatus(){
 		return this.status;
 	}
 	
 	public void setStatus(String status){
 		this.status = status;
 	} 
 	
 	//是否首单立减
 	private String firstOrderValid;
 	
 	public String getFirstOrderValid(){
 		return this.firstOrderValid;
 	}
 	
 	public void setFirstOrderValid(String firstOrderValid){
 		this.firstOrderValid = firstOrderValid;
 	} 
 	
 	//首单是否判断用户名
 	private String firstOrderUsername;
 	
 	public String getFirstOrderUsername(){
 		return this.firstOrderUsername;
 	}
 	
 	public void setFirstOrderUsername(String firstOrderUsername){
 		this.firstOrderUsername = firstOrderUsername;
 	} 
 	
 	//首单判断设配号
 	private String firstOrderFacility;
 	
 	public String getFirstOrderFacility(){
 		return this.firstOrderFacility;
 	}
 	
 	public void setFirstOrderFacility(String firstOrderFacility){
 		this.firstOrderFacility = firstOrderFacility;
 	} 
 	
 	//首单判断手机号
 	private String firstOrderPhone;
 	
 	public String getFirstOrderPhone(){
 		return this.firstOrderPhone;
 	}
 	
 	public void setFirstOrderPhone(String firstOrderPhone){
 		this.firstOrderPhone = firstOrderPhone;
 	} 
 	
 	//create_time
 	private Date createTime;
 	
 	public Date getCreateTime(){
 		return this.createTime;
 	}
 	
 	public void setCreateTime(Date createTime){
 		this.createTime = createTime;
 	} 
 	
 	//update_time
 	private Date updateTime;
 	
 	public Date getUpdateTime(){
 		return this.updateTime;
 	}
 	
 	public void setUpdateTime(Date updateTime){
 		this.updateTime = updateTime;
 	} 
 	
}
2017-08-24 14:35:55,676 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java 文件不存在!
2017-08-24 14:35:55,677 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java 文件创建成功!
2017-08-24 14:35:55,678 [main] DEBUG [com.thinkgem.jeesite.common.utils.FileUtils] - 文件 E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java 写入成功!
2017-08-24 14:35:55,678 [main] DEBUG [com.thinkgem.jeesite.modules.gen.util.GenUtils] -  file create === E:\github\jeesite_mybatis\jeesite\online\src\main\resources\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoDto.java
2017-08-24 14:35:55,763 [Thread-2] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 清除SpringContextHolder中的ApplicationContext:org.springframework.context.support.GenericApplicationContext@5f159092: startup date [Thu Aug 24 14:35:51 CST 2017]; root of context hierarchy
2017-08-24 14:36:44,819 [main] WARN  [org.springframework.web.context.support.XmlWebApplicationContext] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
2017-08-24 14:36:44,823 [main] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 娓SpringContextHolder涓ApplicationContext:Root WebApplicationContext: startup date [Thu Aug 24 14:36:39 CST 2017]; root of context hierarchy
2017-08-24 14:36:44,883 [main] ERROR [org.springframework.web.context.ContextLoader] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:359)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:108)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1475)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1220)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:736)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:762)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)
	at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:434)
	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)
	at com.thinkgem.jeesite.modules.sys.listener.WebContextListener.initWebApplicationContext(WebContextListener.java:16)
	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)
	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:746)
	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:238)
	at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1240)
	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:689)
	at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:482)
	at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
	at org.eclipse.jetty.server.Server.doStart(Server.java:281)
	at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:520)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:365)
	at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:521)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1572)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:351)
	... 62 more
Caused by: org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:522)
	at org.mybatis.spring.SqlSessionFactoryBean.afterPropertiesSet(SqlSessionFactoryBean.java:374)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1631)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1568)
	... 69 more
Caused by: org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:145)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:103)
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:519)
	... 72 more
Caused by: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:103)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:313)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:297)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElements(XMLMapperBuilder.java:289)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:140)
	... 74 more
Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:117)
	at org.apache.ibatis.builder.BaseBuilder.resolveAlias(BaseBuilder.java:130)
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:101)
	... 78 more
Caused by: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:190)
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:89)
	at org.apache.ibatis.io.Resources.classForName(Resources.java:256)
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:113)
	... 80 more
2017-08-24 14:41:02,079 [Thread-2] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 清除SpringContextHolder中的ApplicationContext:org.springframework.context.support.GenericApplicationContext@1cd302d3: startup date [Thu Aug 24 14:40:58 CST 2017]; root of context hierarchy
2017-08-24 14:41:31,647 [main] WARN  [org.springframework.web.context.support.XmlWebApplicationContext] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
2017-08-24 14:41:31,650 [main] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 娓SpringContextHolder涓ApplicationContext:Root WebApplicationContext: startup date [Thu Aug 24 14:41:26 CST 2017]; root of context hierarchy
2017-08-24 14:41:31,686 [main] ERROR [org.springframework.web.context.ContextLoader] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:359)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:108)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1475)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1220)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:736)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:762)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)
	at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:434)
	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)
	at com.thinkgem.jeesite.modules.sys.listener.WebContextListener.initWebApplicationContext(WebContextListener.java:16)
	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)
	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:746)
	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:238)
	at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1240)
	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:689)
	at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:482)
	at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
	at org.eclipse.jetty.server.Server.doStart(Server.java:281)
	at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:520)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:365)
	at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:521)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1572)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:351)
	... 62 more
Caused by: org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:522)
	at org.mybatis.spring.SqlSessionFactoryBean.afterPropertiesSet(SqlSessionFactoryBean.java:374)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1631)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1568)
	... 69 more
Caused by: org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:145)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:103)
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:519)
	... 72 more
Caused by: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:103)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:313)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:297)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElements(XMLMapperBuilder.java:289)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:140)
	... 74 more
Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:117)
	at org.apache.ibatis.builder.BaseBuilder.resolveAlias(BaseBuilder.java:130)
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:101)
	... 78 more
Caused by: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:190)
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:89)
	at org.apache.ibatis.io.Resources.classForName(Resources.java:256)
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:113)
	... 80 more
2017-08-24 14:43:03,452 [main] WARN  [org.springframework.web.context.support.XmlWebApplicationContext] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
2017-08-24 14:43:03,455 [main] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 娓SpringContextHolder涓ApplicationContext:Root WebApplicationContext: startup date [Thu Aug 24 14:42:58 CST 2017]; root of context hierarchy
2017-08-24 14:43:03,492 [main] ERROR [org.springframework.web.context.ContextLoader] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:359)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:108)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1475)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1220)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:736)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:762)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)
	at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:434)
	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)
	at com.thinkgem.jeesite.modules.sys.listener.WebContextListener.initWebApplicationContext(WebContextListener.java:16)
	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)
	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:746)
	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:238)
	at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1240)
	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:689)
	at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:482)
	at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
	at org.eclipse.jetty.server.Server.doStart(Server.java:281)
	at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:520)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:365)
	at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:521)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1572)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:351)
	... 62 more
Caused by: org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:522)
	at org.mybatis.spring.SqlSessionFactoryBean.afterPropertiesSet(SqlSessionFactoryBean.java:374)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1631)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1568)
	... 69 more
Caused by: org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:145)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:103)
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:519)
	... 72 more
Caused by: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:103)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:313)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:297)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElements(XMLMapperBuilder.java:289)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:140)
	... 74 more
Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:117)
	at org.apache.ibatis.builder.BaseBuilder.resolveAlias(BaseBuilder.java:130)
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:101)
	... 78 more
Caused by: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:190)
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:89)
	at org.apache.ibatis.io.Resources.classForName(Resources.java:256)
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:113)
	... 80 more
2017-08-24 14:46:11,212 [Thread-2] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 清除SpringContextHolder中的ApplicationContext:org.springframework.context.support.GenericApplicationContext@1cd302d3: startup date [Thu Aug 24 14:46:08 CST 2017]; root of context hierarchy
2017-08-24 14:47:03,946 [main] WARN  [org.springframework.web.context.support.XmlWebApplicationContext] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
2017-08-24 14:47:03,949 [main] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 娓SpringContextHolder涓ApplicationContext:Root WebApplicationContext: startup date [Thu Aug 24 14:46:59 CST 2017]; root of context hierarchy
2017-08-24 14:47:03,982 [main] ERROR [org.springframework.web.context.ContextLoader] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'articleDao' defined in URL [jar:file:/D:/shuiqing/maven/com/thinkgem/jeesite/crm/1.2.7/crm-1.2.7.jar!/com/thinkgem/jeesite/modules/cms/dao/ArticleDao.class]: Cannot resolve reference to bean 'sqlSessionFactory' while setting bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:359)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:108)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1475)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1220)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:537)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:736)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:762)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:480)
	at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:434)
	at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)
	at com.thinkgem.jeesite.modules.sys.listener.WebContextListener.initWebApplicationContext(WebContextListener.java:16)
	at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)
	at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:746)
	at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:238)
	at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1240)
	at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:689)
	at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:482)
	at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:256)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:172)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:229)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:95)
	at org.eclipse.jetty.server.Server.doStart(Server.java:281)
	at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:65)
	at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:64)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:520)
	at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:365)
	at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:521)
	at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
	at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
	at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
	at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
	at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
	at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
	at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
	at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
	at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:47)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\spring-context.xml]: Invocation of init method failed; nested exception is org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1572)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:539)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:476)
	at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:303)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:299)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:351)
	... 62 more
Caused by: org.springframework.core.NestedIOException: Failed to parse mapping resource: 'file [E:\github\jeesite_mybatis\jeesite\online\src\main\webapp\WEB-INF\classes\mappings\lvtraffic\promotion\activity\TPromotionActivityInfoMapper.xml]'; nested exception is org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:522)
	at org.mybatis.spring.SqlSessionFactoryBean.afterPropertiesSet(SqlSessionFactoryBean.java:374)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1631)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1568)
	... 69 more
Caused by: org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:145)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:103)
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:519)
	... 72 more
Caused by: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:103)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:313)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:297)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElements(XMLMapperBuilder.java:289)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:140)
	... 74 more
Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:117)
	at org.apache.ibatis.builder.BaseBuilder.resolveAlias(BaseBuilder.java:130)
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:101)
	... 78 more
Caused by: java.lang.ClassNotFoundException: Cannot find class: com.lvmama.lvtraffic.promotion.common.dto.activity.TPromotionActivityInfoDto
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:190)
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:89)
	at org.apache.ibatis.io.Resources.classForName(Resources.java:256)
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:113)
	... 80 more
2017-08-24 17:45:40,936 [Thread-2] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 清除SpringContextHolder中的ApplicationContext:org.springframework.context.support.GenericApplicationContext@142edebe: startup date [Thu Aug 24 17:45:38 CST 2017]; root of context hierarchy
2017-08-24 17:49:02,290 [http-8080-1] DEBUG [com.thinkgem.jeesite.modules.sys.dao.DictDao.findAllList] - ==>  Preparing: SELECT * FROM sys_dict WHERE del_flag = ? ORDER BY type, sort, update_date DESC 
2017-08-24 17:49:02,300 [http-8080-1] DEBUG [com.thinkgem.jeesite.modules.sys.dao.DictDao.findAllList] - ==> Parameters: 0(String)
2017-08-24 17:49:02,550 [http-8080-1] DEBUG [com.thinkgem.jeesite.modules.sys.dao.DictDao.findAllList] - <==      Total: 78
2017-08-24 17:49:04,399 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.security.SystemAuthorizingRealm] - login submit, active session size: 1, username: thinkgem
2017-08-24 17:49:04,402 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.UserDao.getByLoginName] - ==>  Preparing: SELECT a.id, a.company_id AS "company.id", a.office_id AS "office.id", a.login_name, a.password, a.no, a.name, a.email, a.phone, a.mobile, a.user_type, a.login_ip, a.login_date, a.remarks, a.login_flag, a.photo, a.create_by AS "createBy.id", a.create_date, a.update_by AS "updateBy.id", a.update_date, a.del_flag, c.name AS "company.name", c.parent_id AS "company.parent.id", c.parent_ids AS "company.parentIds", ca.id AS "company.area.id", ca.name AS "company.area.name", ca.parent_id AS "company.area.parent.id", ca.parent_ids AS "company.area.parentIds", o.name AS "office.name", o.parent_id AS "office.parent.id", o.parent_ids AS "office.parentIds", oa.id AS "office.area.id", oa.name AS "office.area.name", oa.parent_id AS "office.area.parent.id", oa.parent_ids AS "office.area.parentIds", cu.id AS "company.primaryPerson.id", cu.name AS "company.primaryPerson.name", cu2.id AS "company.deputyPerson.id", cu2.name AS "company.deputyPerson.name", ou.id AS "office.primaryPerson.id", ou.name AS "office.primaryPerson.name", ou2.id AS "office.deputyPerson.id", ou2.name AS "office.deputyPerson.name" FROM sys_user a LEFT JOIN sys_office c ON c.id = a.company_id LEFT JOIN sys_area ca ON ca.id = c.area_id LEFT JOIN sys_office o ON o.id = a.office_id LEFT JOIN sys_area oa ON oa.id = o.area_id LEFT JOIN sys_user cu ON cu.id = c.primary_person LEFT JOIN sys_user cu2 ON cu2.id = c.deputy_person LEFT JOIN sys_user ou ON ou.id = o.primary_person LEFT JOIN sys_user ou2 ON ou2.id = o.deputy_person WHERE a.login_name = ? AND a.del_flag = ? 
2017-08-24 17:49:04,402 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.UserDao.getByLoginName] - ==> Parameters: thinkgem(String), 0(String)
2017-08-24 17:49:04,594 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.UserDao.getByLoginName] - <==      Total: 1
2017-08-24 17:49:04,653 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.RoleDao.findList] - ==>  Preparing: SELECT a.id, a.office_id AS "office.id", a.name, a.enname, a.role_type AS roleType, a.data_scope AS dataScope, a.remarks, a.create_by AS "createBy.id", a.create_date, a.update_by AS "updateBy.id", a.update_date, a.del_flag, o.name AS "office.name", o.code, a.useable AS useable, a.is_sys AS sysData , ro.office_id AS "officeList.id" FROM sys_role a LEFT JOIN sys_office o ON o.id = a.office_id LEFT JOIN sys_user_role ur ON ur.role_id = a.id LEFT JOIN sys_user u ON u.id = ur.user_id LEFT JOIN sys_role_office ro ON ro.role_id = a.id WHERE a.del_flag = ? AND a.useable=? AND u.id = ? AND u.login_name = ? ORDER BY o.code, a.name 
2017-08-24 17:49:04,653 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.RoleDao.findList] - ==> Parameters: 0(String), 1(String), 1(String), thinkgem(String)
2017-08-24 17:49:04,731 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.RoleDao.findList] - <==      Total: 2
2017-08-24 17:49:04,786 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 寮濮璁℃: 05:49:04.786  URI: /online/a
2017-08-24 17:49:04,795 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.MenuDao.findAllList] - ==>  Preparing: SELECT a.id, a.parent_id AS "parent.id", a.parent_ids, a.name, a.href, a.target, a.icon, a.sort, a.is_show, a.permission, a.remarks, a.create_by AS "createBy.id", a.create_date, a.update_by AS "updateBy.id", a.update_date, a.del_flag, p.name AS "parent.name" FROM sys_menu a LEFT JOIN sys_menu p ON p.id = a.parent_id WHERE a.del_flag = ? ORDER BY a.sort 
2017-08-24 17:49:04,795 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.MenuDao.findAllList] - ==> Parameters: 0(String)
2017-08-24 17:49:04,875 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.MenuDao.findAllList] - <==      Total: 95
2017-08-24 17:49:04,879 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.UserDao.updateLoginInfo] - ==>  Preparing: UPDATE sys_user SET login_ip = ?, login_Date = ? WHERE id = ? 
2017-08-24 17:49:04,880 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.UserDao.updateLoginInfo] - ==> Parameters: 0:0:0:0:0:0:0:1(String), 2017-08-24 17:49:04.879(Timestamp), 1(String)
2017-08-24 17:49:04,881 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.dao.UserDao.updateLoginInfo] - <==    Updates: 1
2017-08-24 17:49:04,977 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==>  Preparing: INSERT INTO sys_log( id, type, title, create_by, create_date, remote_addr, user_agent, request_uri, method, params, exception ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2017-08-24 17:49:04,979 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==> Parameters: 0c683f96b94a458eaeb473b61d3ef628(String), 1(String), 绯荤诲(String), 1(String), 2017-08-24 17:49:04.976(Timestamp), 0:0:0:0:0:0:0:1(String), Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36(String), /online/a(String), GET(String), login=(String), (String)
2017-08-24 17:49:05,006 [http-8080-5] INFO  [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - ViewName: modules/sys/sysIndex
2017-08-24 17:49:05,040 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - <==    Updates: 1
2017-08-24 17:49:05,192 [http-8080-5] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 璁℃剁锛05:49:05.191  讹0:0:0.405  URI: /online/a  澶у瀛: 3612m  宸插瀛: 908m  宸插瀛涓╀绌洪: 353m  澶уㄥ瀛: 3057m
2017-08-24 17:49:05,193 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.MenuDao.findAllList] - ==>  Preparing: SELECT a.id, a.parent_id AS "parent.id", a.parent_ids, a.name, a.href, a.target, a.icon, a.sort, a.is_show, a.permission, a.remarks, a.create_by AS "createBy.id", a.create_date, a.update_by AS "updateBy.id", a.update_date, a.del_flag, p.name AS "parent.name" FROM sys_menu a LEFT JOIN sys_menu p ON p.id = a.parent_id WHERE a.del_flag = ? ORDER BY a.sort 
2017-08-24 17:49:05,195 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.MenuDao.findAllList] - ==> Parameters: 0(String)
2017-08-24 17:49:05,272 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.MenuDao.findAllList] - <==      Total: 95
2017-08-24 17:49:05,658 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 寮濮璁℃: 05:49:05.658  URI: /online/a/sys/user/info
2017-08-24 17:49:05,672 [http-8080-2] INFO  [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - ViewName: modules/sys/userInfo
2017-08-24 17:49:06,100 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 璁℃剁锛05:49:06.100  讹0:0:0.442  URI: /online/a/sys/user/info  澶у瀛: 3612m  宸插瀛: 908m  宸插瀛涓╀绌洪: 195m  澶уㄥ瀛: 2899m
2017-08-24 17:49:06,101 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==>  Preparing: INSERT INTO sys_log( id, type, title, create_by, create_date, remote_addr, user_agent, request_uri, method, params, exception ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2017-08-24 17:49:06,102 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==> Parameters: 2975dba259514230a5b36dae7c37320c(String), 1(String), ㈡-涓浜轰俊-涓浜轰俊(String), 1(String), 2017-08-24 17:49:06.1(Timestamp), 0:0:0:0:0:0:0:1(String), Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36(String), /online/a/sys/user/info(String), GET(String), (String), (String)
2017-08-24 17:49:06,165 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - <==    Updates: 1
2017-08-24 17:49:07,548 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 寮濮璁℃: 05:49:07.548  URI: /online/a/oa/oaNotify/self
2017-08-24 17:49:07,552 [http-8080-2] DEBUG [com.thinkgem.jeesite.common.persistence.interceptor.PaginationInterceptor] - COUNT SQL: select count(1) from (SELECT         a.ID AS "id",   a.TYPE AS "type",   a.TITLE AS "title",   a.CONTENT AS "content",   a.FILES AS "files",   a.STATUS AS "status",   a.CREATE_BY AS "createBy.id",   a.CREATE_DATE AS "createDate",   a.UPDATE_BY AS "updateBy.id",   a.UPDATE_DATE AS "updateDate",   a.REMARKS AS "remarks",   a.DEL_FLAG AS "delFlag",      b.read_num,      b.un_read_num        ,     r.read_flag        FROM oa_notify a          LEFT JOIN (             SELECT r.oa_notify_id,                     sum(case when r.read_flag = '1' then 1 else 0 end) read_num,                    sum(case when r.read_flag != '1' then 1 else 0 end) un_read_num              FROM oa_notify_record r GROUP BY r.oa_notify_id      ) b ON b.oa_notify_id = a.id              JOIN oa_notify_record r ON r.oa_notify_id = a.id AND r.user_id = ?       WHERE a.del_flag = ?                    AND a.STATUS = '1'       ) tmp_count
2017-08-24 17:49:07,554 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.oa.dao.OaNotifyDao.findList] - ==>  Preparing: SELECT a.ID AS "id", a.TYPE AS "type", a.TITLE AS "title", a.CONTENT AS "content", a.FILES AS "files", a.STATUS AS "status", a.CREATE_BY AS "createBy.id", a.CREATE_DATE AS "createDate", a.UPDATE_BY AS "updateBy.id", a.UPDATE_DATE AS "updateDate", a.REMARKS AS "remarks", a.DEL_FLAG AS "delFlag", b.read_num, b.un_read_num , r.read_flag FROM oa_notify a LEFT JOIN ( SELECT r.oa_notify_id, sum(case when r.read_flag = '1' then 1 else 0 end) read_num, sum(case when r.read_flag != '1' then 1 else 0 end) un_read_num FROM oa_notify_record r GROUP BY r.oa_notify_id ) b ON b.oa_notify_id = a.id JOIN oa_notify_record r ON r.oa_notify_id = a.id AND r.user_id = ? WHERE a.del_flag = ? AND a.STATUS = '1' ORDER BY a.update_date DESC limit 30 
2017-08-24 17:49:07,554 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.oa.dao.OaNotifyDao.findList] - ==> Parameters: 1(String), 0(String)
2017-08-24 17:49:07,555 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.oa.dao.OaNotifyDao.findList] - <==      Total: 0
2017-08-24 17:49:07,559 [http-8080-2] INFO  [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - ViewName: modules/oa/oaNotifyList
2017-08-24 17:49:07,741 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 璁℃剁锛05:49:07.741  讹0:0:0.193  URI: /online/a/oa/oaNotify/self  澶у瀛: 3612m  宸插瀛: 908m  宸插瀛涓╀绌洪: 113m  澶уㄥ瀛: 2817m
2017-08-24 17:49:07,742 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==>  Preparing: INSERT INTO sys_log( id, type, title, create_by, create_date, remote_addr, user_agent, request_uri, method, params, exception ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2017-08-24 17:49:07,743 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==> Parameters: 6cf75d629eb649b7a7cfd24636d41441(String), 1(String), ㄧ嚎-ラ-(String), 1(String), 2017-08-24 17:49:07.741(Timestamp), 0:0:0:0:0:0:0:1(String), Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36(String), /online/a/oa/oaNotify/self(String), GET(String), (String), (String)
2017-08-24 17:49:07,828 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - <==    Updates: 1
2017-08-24 17:49:08,592 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 寮濮璁℃: 05:49:08.591  URI: /online/a/money/tallytype
2017-08-24 17:49:08,748 [http-8080-2] DEBUG [com.thinkgem.jeesite.common.persistence.interceptor.PaginationInterceptor] - COUNT SQL: select count(1) from (SELECT         a.tally_type_sno AS "id",   a.tally_type_desc AS "moneyTypeDesc",   a.money_type AS "moneyType",   a.parent_code AS "parentCode",   a.type_code AS "typeCode",   a.orderid AS "orderId"       FROM tally_type_t    a) tmp_count
2017-08-24 17:49:08,751 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.money.dao.TallyTypeDao.findList] - ==>  Preparing: SELECT a.tally_type_sno AS "id", a.tally_type_desc AS "moneyTypeDesc", a.money_type AS "moneyType", a.parent_code AS "parentCode", a.type_code AS "typeCode", a.orderid AS "orderId" FROM tally_type_t a limit 30 
2017-08-24 17:49:08,751 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.money.dao.TallyTypeDao.findList] - ==> Parameters: 
2017-08-24 17:49:08,757 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.money.dao.TallyTypeDao.findList] - <==      Total: 30
2017-08-24 17:49:08,771 [http-8080-2] INFO  [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - ViewName: modules/money/tallyTypeList
2017-08-24 17:49:08,929 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 璁℃剁锛05:49:08.929  讹0:0:0.338  URI: /online/a/money/tallytype  澶у瀛: 3612m  宸插瀛: 879m  宸插瀛涓╀绌洪: 723m  澶уㄥ瀛: 3456m
2017-08-24 17:49:08,930 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==>  Preparing: INSERT INTO sys_log( id, type, title, create_by, create_date, remote_addr, user_agent, request_uri, method, params, exception ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2017-08-24 17:49:08,930 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==> Parameters: e4217eb35a9f4b07ba762c6a4cefa0a3(String), 1(String), 璐㈣板-伴缃-棰绫诲(String), 1(String), 2017-08-24 17:49:08.929(Timestamp), 0:0:0:0:0:0:0:1(String), Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36(String), /online/a/money/tallytype(String), GET(String), (String), (String)
2017-08-24 17:49:08,982 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - <==    Updates: 1
2017-08-24 17:49:09,862 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 寮濮璁℃: 05:49:09.862  URI: /online/a/moneydetail/moneyDetailT
2017-08-24 17:49:09,869 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 璁℃剁锛05:49:09.869  讹0:0:0.7  URI: /online/a/moneydetail/moneyDetailT  澶у瀛: 3612m  宸插瀛: 879m  宸插瀛涓╀绌洪: 718m  澶уㄥ瀛: 3451m
2017-08-24 17:49:09,869 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==>  Preparing: INSERT INTO sys_log( id, type, title, create_by, create_date, remote_addr, user_agent, request_uri, method, params, exception ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2017-08-24 17:49:09,870 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==> Parameters: 50ed887e134549f0a5129b79352ae387(String), 1(String), 璐㈣板-伴缃-test(String), 1(String), 2017-08-24 17:49:09.869(Timestamp), 0:0:0:0:0:0:0:1(String), Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36(String), /online/a/moneydetail/moneyDetailT(String), GET(String), (String), (String)
2017-08-24 17:49:09,912 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - <==    Updates: 1
2017-08-24 17:49:10,714 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 寮濮璁℃: 05:49:10.713  URI: /online/a/money/tallytype
2017-08-24 17:49:10,728 [http-8080-2] DEBUG [com.thinkgem.jeesite.common.persistence.interceptor.PaginationInterceptor] - COUNT SQL: select count(1) from (SELECT         a.tally_type_sno AS "id",   a.tally_type_desc AS "moneyTypeDesc",   a.money_type AS "moneyType",   a.parent_code AS "parentCode",   a.type_code AS "typeCode",   a.orderid AS "orderId"       FROM tally_type_t    a) tmp_count
2017-08-24 17:49:10,730 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.money.dao.TallyTypeDao.findList] - ==>  Preparing: SELECT a.tally_type_sno AS "id", a.tally_type_desc AS "moneyTypeDesc", a.money_type AS "moneyType", a.parent_code AS "parentCode", a.type_code AS "typeCode", a.orderid AS "orderId" FROM tally_type_t a limit 30 
2017-08-24 17:49:10,730 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.money.dao.TallyTypeDao.findList] - ==> Parameters: 
2017-08-24 17:49:10,738 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.money.dao.TallyTypeDao.findList] - <==      Total: 30
2017-08-24 17:49:10,754 [http-8080-2] INFO  [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - ViewName: modules/money/tallyTypeList
2017-08-24 17:49:10,772 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 璁℃剁锛05:49:10.772  讹0:0:0.59  URI: /online/a/money/tallytype  澶у瀛: 3612m  宸插瀛: 879m  宸插瀛涓╀绌洪: 675m  澶уㄥ瀛: 3407m
2017-08-24 17:49:10,772 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==>  Preparing: INSERT INTO sys_log( id, type, title, create_by, create_date, remote_addr, user_agent, request_uri, method, params, exception ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2017-08-24 17:49:10,773 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==> Parameters: f333071f130645e49c026723e5dafad4(String), 1(String), 璐㈣板-伴缃-棰绫诲(String), 1(String), 2017-08-24 17:49:10.772(Timestamp), 0:0:0:0:0:0:0:1(String), Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36(String), /online/a/money/tallytype(String), GET(String), (String), (String)
2017-08-24 17:49:10,804 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - <==    Updates: 1
2017-08-24 17:49:11,778 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 寮濮璁℃: 05:49:11.778  URI: /online/a/oa/oaNotify/self
2017-08-24 17:49:11,783 [http-8080-2] DEBUG [com.thinkgem.jeesite.common.persistence.interceptor.PaginationInterceptor] - COUNT SQL: select count(1) from (SELECT         a.ID AS "id",   a.TYPE AS "type",   a.TITLE AS "title",   a.CONTENT AS "content",   a.FILES AS "files",   a.STATUS AS "status",   a.CREATE_BY AS "createBy.id",   a.CREATE_DATE AS "createDate",   a.UPDATE_BY AS "updateBy.id",   a.UPDATE_DATE AS "updateDate",   a.REMARKS AS "remarks",   a.DEL_FLAG AS "delFlag",      b.read_num,      b.un_read_num        ,     r.read_flag        FROM oa_notify a          LEFT JOIN (             SELECT r.oa_notify_id,                     sum(case when r.read_flag = '1' then 1 else 0 end) read_num,                    sum(case when r.read_flag != '1' then 1 else 0 end) un_read_num              FROM oa_notify_record r GROUP BY r.oa_notify_id      ) b ON b.oa_notify_id = a.id              JOIN oa_notify_record r ON r.oa_notify_id = a.id AND r.user_id = ?       WHERE a.del_flag = ?                    AND a.STATUS = '1'       ) tmp_count
2017-08-24 17:49:11,786 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.oa.dao.OaNotifyDao.findList] - ==>  Preparing: SELECT a.ID AS "id", a.TYPE AS "type", a.TITLE AS "title", a.CONTENT AS "content", a.FILES AS "files", a.STATUS AS "status", a.CREATE_BY AS "createBy.id", a.CREATE_DATE AS "createDate", a.UPDATE_BY AS "updateBy.id", a.UPDATE_DATE AS "updateDate", a.REMARKS AS "remarks", a.DEL_FLAG AS "delFlag", b.read_num, b.un_read_num , r.read_flag FROM oa_notify a LEFT JOIN ( SELECT r.oa_notify_id, sum(case when r.read_flag = '1' then 1 else 0 end) read_num, sum(case when r.read_flag != '1' then 1 else 0 end) un_read_num FROM oa_notify_record r GROUP BY r.oa_notify_id ) b ON b.oa_notify_id = a.id JOIN oa_notify_record r ON r.oa_notify_id = a.id AND r.user_id = ? WHERE a.del_flag = ? AND a.STATUS = '1' ORDER BY a.update_date DESC limit 30 
2017-08-24 17:49:11,786 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.oa.dao.OaNotifyDao.findList] - ==> Parameters: 1(String), 0(String)
2017-08-24 17:49:11,787 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.oa.dao.OaNotifyDao.findList] - <==      Total: 0
2017-08-24 17:49:11,791 [http-8080-2] INFO  [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - ViewName: modules/oa/oaNotifyList
2017-08-24 17:49:11,798 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 璁℃剁锛05:49:11.798  讹0:0:0.20  URI: /online/a/oa/oaNotify/self  澶у瀛: 3612m  宸插瀛: 879m  宸插瀛涓╀绌洪: 673m  澶уㄥ瀛: 3406m
2017-08-24 17:49:11,798 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==>  Preparing: INSERT INTO sys_log( id, type, title, create_by, create_date, remote_addr, user_agent, request_uri, method, params, exception ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2017-08-24 17:49:11,800 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==> Parameters: 1bb8b3345ef54eeaad794d06044d7c8a(String), 1(String), ㄧ嚎-ラ-(String), 1(String), 2017-08-24 17:49:11.798(Timestamp), 0:0:0:0:0:0:0:1(String), Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36(String), /online/a/oa/oaNotify/self(String), GET(String), (String), (String)
2017-08-24 17:49:11,837 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - <==    Updates: 1
2017-08-24 17:49:12,506 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 寮濮璁℃: 05:49:12.505  URI: /online/a/sys/user/info
2017-08-24 17:49:12,522 [http-8080-2] INFO  [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - ViewName: modules/sys/userInfo
2017-08-24 17:49:12,533 [http-8080-2] DEBUG [com.thinkgem.jeesite.modules.sys.interceptor.LogInterceptor] - 璁℃剁锛05:49:12.533  讹0:0:0.28  URI: /online/a/sys/user/info  澶у瀛: 3612m  宸插瀛: 879m  宸插瀛涓╀绌洪: 671m  澶уㄥ瀛: 3404m
2017-08-24 17:49:12,534 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==>  Preparing: INSERT INTO sys_log( id, type, title, create_by, create_date, remote_addr, user_agent, request_uri, method, params, exception ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) 
2017-08-24 17:49:12,535 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - ==> Parameters: e195384e85d74cd2a9120eecd2fc5ab9(String), 1(String), ㈡-涓浜轰俊-涓浜轰俊(String), 1(String), 2017-08-24 17:49:12.534(Timestamp), 0:0:0:0:0:0:0:1(String), Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36(String), /online/a/sys/user/info(String), GET(String), (String), (String)
2017-08-24 17:49:12,575 [SaveLogThread] DEBUG [com.thinkgem.jeesite.modules.sys.dao.LogDao.insert] - <==    Updates: 1
2017-08-24 18:00:18,572 [ContainerBackgroundProcessor[StandardEngine[localEngine]]] DEBUG [com.thinkgem.jeesite.common.utils.SpringContextHolder] - 娓SpringContextHolder涓ApplicationContext:Root WebApplicationContext: startup date [Thu Aug 24 17:47:57 CST 2017]; root of context hierarchy
